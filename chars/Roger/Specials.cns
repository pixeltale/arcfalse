
;5S: Eruption Slam (Start Up)
;-----------------------------
[Statedef 1000]
type    = S
movetype= A
physics	= N
ctrl = 0
anim =10000
sprpriority = 2

[State 0, MAPSET]
type 		= MapSet
trigger1 		= 1
map 		= "ScratchLockout"
value 		= 10
ignorehitpause 	= 1
persistent		= 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = vel x * 0.8
y = 0


[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = ,NT
time = 1

;Throw Tech not allowed
[State 1060, Explod]
type = Explod
trigger1 = !NumExplod(44020)
anim = 99856
ID = 44020
removetime = -1
removeongethit = 0
persistent = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

 ;============================
[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		=  4
ignorehitpause 	=  1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		=  1	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		=  1	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0
;============================

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 1001
p2stateno = 1052

[State 0, VarAdd]
type = MapSet
trigger1 = !time
map = "ChargeTime"
value = 0
ignorehitpause = 1
[State 0, VarAdd]
type = MapAdd
trigger1 = 1
map = "ChargeTime"
value = 1
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
triggerall=time>2
trigger1 = command != "hold_b" 
value = 10005


[State 0, ChangeState]
type = ChangeState
trigger1 = map(ChargeTime) > 35
value = 10010

;5S: Eruption Slam (Attempt)
;-----------------------------
[Statedef 10000]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim =10001
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = time <=6
value = ,NT
time = 1

 ;============================
[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		=  4
ignorehitpause 	=  1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		=  0.80	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		=  0.80	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0
;============================

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkxy = P2BodyDist X + -40, -35 ;P2BodyDist X, so the hitspark is relative to P1
sparkxy = -5, P2BodyDist X - -35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 1001
p2stateno = 1052

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;5S: Eruption Slam (Attempt)
;-----------------------------
[Statedef 10005]
type    = S
movetype= A
physics = S
ctrl = 0
anim =10001
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = time <=6
value = ,NT
time = 1

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 1000
sparkxy = P2BodyDist X + -40, -35 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = -.75,-10
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = -.75,-10
air.hittime = 24
fall = 1
p1stateno = 10002
p2stateno = 1052

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;5S: Eruption Slam (Hit)
;-----------------------------
[Statedef 10002]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =10002
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 8 && palno = 9
value = 7613,1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 8 && palno != 9
value = 8000,0

[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 1056
ID = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 53,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
time = 3
id = -1
pos = 46,-31 

[State 0, TargetFacing]
type = TargetFacing
trigger1 = animelem = 4
trigger2 = animelem = 7
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
time = 3
id = -1
pos = -42,-32 

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 7
time = 3
id = -1
pos = 62,0 



[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 10012
ctrl = 1

;5S: Eruption Slam (Air Leap)
;-----------------------------
[Statedef 10012]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =10003
sprpriority =-5
velset = 0,-9

[State 0. MapSet]
type 		= MapSet
trigger1 		= 1
map 		= "comboTimer"
value 		= -1
ignorehitpause 	= 1
persistent 		= 1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 999
id = -1
pos = 0,-190

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .30

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 11
x = 0
y = 9


[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 1056
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 10003

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 45
value = 3000,2
volumescale = 1000000
channel = 1
freqmul = 1.0
ignorehitpause = 1

;5S: Charged Grab Attempt
;-----------------------------
[Statedef 10010]
type    = S
movetype= A
physics = S
ctrl = 0
anim =10001
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time<=6
value = ,NT
time = 1

;Throw Tech not allowed
[State 1060, Explod]
type = Explod
trigger1 = !NumExplod(44020)
anim = 99856
ID = 44020
removetime = -1
removeongethit = 0
persistent = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 25
freq = 250
ampl = -4
phase = 90

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

 ;============================
[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		=  4
ignorehitpause 	=  1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		=  1	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		=  1	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0
;============================

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = P2BodyDist X + -40, -35 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 10004
p2stateno = 1052
getpower = (100)*(cond(var(var(2)) = 1, 1, .5))

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;5S: Full Charge Success
;-----------------------------
[Statedef 10004]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =10002
sprpriority = 2

[State 0, PlaySnd] ;gimme
type = PlaySnd
trigger1 = time = 0 && palno = 9
value = 7615,4

[State 0, PlaySnd] ;SLAMMAAAHHH
type = PlaySnd
trigger1 = time = 3 && palno != 9
value = 8000,1

[State 0, SuperPause]
type = SuperPause
trigger1 = animelem = 3
time = 10
anim = 99999
sound = S10,0
movetime = 0
darken = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10042
ID = 10042
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99
scale = .7,.7
sprpriority = 6

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 60606070
ID = 60606060
pos = 30,-71
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99
scale = 1,1
sprpriority = 6

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 60606061
ID = 60606060
pos = 30,-71
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99
scale = .1,.9
sprpriority = 6

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 60606061
ID = 60606060
pos = 30,-71
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99
scale = 3.1,.1
sprpriority = 6

[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 1056
ID = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 53,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
time = 3
id = -1
pos = 46,-31 

[State 0, TargetFacing]
type = TargetFacing
trigger1 = animelem = 4
trigger2 = animelem = 7
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
time = 3
id = -1
pos = -42,-32 

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 7
time = 3
id = -1
pos = 62,0 



[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 10014
ctrl = 1

;5S: Full Chrage Leap
;-----------------------------
[Statedef 10014]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =10003
sprpriority =-5
velset = 0,-29

[State 0. MapSet]
type 		= MapSet
trigger1 		= 1
map 		= "comboTimer"
value 		= -2
ignorehitpause 	= 1
persistent 		= 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value =0
movecamera = 0,0


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 999
id = -1
pos = 0,-190

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .9


[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 1056
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 10003

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 60
value = 3000,2
volumescale = 1000000
channel = 1
freqmul = .8
ignorehitpause = 1

;---------------------------------------------------------------------------
[Statedef 101010]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 30
ctrl = 0
anim = 101010
sprpriority = 2

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
time = 1
facing = 0
pos = 0,-100
;ignorehitpause = 
;persistent = 


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 0, ChangeState]
type = destroyself
trigger1 = root, pos y = 0

;---------------------------------------------------------------------------
;5S: Eruption Slam (Slam)
;-----------------------------
[Statedef 10003]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 0
ctrl = 0
anim =10004
sprpriority = -6
velset = 0,0

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 30
freq = 60

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10005
ID = 206
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .76,.76
sprpriority =4
ontop = 1
removeongethit = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 0
time = 1
id = -1
pos = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
x = -9
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = -10

 ;============================
[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		=  3
ignorehitpause 	=  1


[State -2, P1 Value Set]
type 		= MapSet
triggerall		= prevstateno = 10012
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		= 0.8	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
triggerall		= prevstateno = 10012
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		= 0.90	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0

[State -2, P1 Value Set]
type 		= MapSet
triggerall		= prevstateno = 10014
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		= 1.5	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
triggerall		= prevstateno = 10014
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		= 1.5	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0

[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0
;============================

[State 210, 2]
type = HitDef 
p2facing = 1
triggerall = var(8)>0
trigger1 = (time = 0 && prevstateno = 10012)
attr = S, ST
animtype  = Light
damage = 400, 0
hitflag = MAFD
guardflag = MA
pausetime = 20,20
sparkno = 2
sparkxy = -10,-34
hitsound   = 5,3
guardsound = 6,2
ground.type = trip
air.type = trip
p2sprpriority = 6
ground.slidetime = 12
ground.hittime  = ceil(cond(fvar(15) *24 < 9, 9, fvar(15) * 24))
air.hittime  = ceil(cond(fvar(15) *30 < 9, 9, fvar(15) * 30))
down.hittime = ceil(cond(fvar(15) *30 < 9, 9, fvar(15) * 30))
ground.velocity = 0,19
air.velocity = .25,19
fall.yvelocity = -15.5
fall = 1
air.fall = 1
fall.yvelocity = -3
palfx.time = 12
palfx.add = 100, 0,20
guard.hittime = 25
guard.ctrltime = 16
envshake.time = 30
envshake.freq = 150
envshake.ampl = 5

[State 210, 2]
type = HitDef 
p2facing = 1
triggerall = var(8)<=0
trigger1 = (time = 0 && prevstateno = 10012)
attr = S, ST
animtype  = Light
damage = 400*MAP(P4), 0
hitflag = MAFD
guardflag = MA
pausetime = 20,30
sparkno = 2
sparkxy = -10,-34
hitsound   = 5,3
guardsound = 6,2
ground.type = trip
air.type = trip
p2sprpriority = 6
ground.slidetime = 12
ground.hittime  = 45
air.hittime  = 45
down.hittime = 45
ground.velocity = 0,28
air.velocity = 0,28
fall.yvelocity = -10
fall = 1
air.fall = 1
palfx.time = 12
palfx.add = 100, 0,20
guard.hittime = 25
guard.ctrltime = 16
envshake.time = 30
envshake.freq = 150
envshake.ampl = 5


[State 210, 2]
type 	= HitDef 
p2facing 	= 1
trigger1 	= (time = 0 && prevstateno = 10014)
attr 	= S, ST
animtype  	= Light
damage 		= 750, 0
hitflag 		= MAFD
guardflag		= MA
pausetime 	= 20,20
sparkno 		= 2
sparkxy 		= -10,-34
hitsound   	= 5,3
guardsound 	= 6,2
ground.type 	= trip
air.type 		= trip
p2sprpriority 	= 6
ground.slidetime 	= 12
ground.hittime  	= 9999
air.hittime  	= 9999
down.hittime 	= 9999
ground.velocity 	= 0,35
air.velocity 	= 0,35
fall.yvelocity 	= -10
fall 		= 1
air.fall 		= 1
palfx.time 	= 12
palfx.add 		= 100, 0,20
guard.hittime 	= 25
guard.ctrltime 	= 16
envshake.time 	= 30
envshake.freq 	= 200
envshake.ampl 	= 5
p2stateno 	= 5255
p2getp1state 	= 0

[State 0, VarAdd]
type = VarAdd
triggerall=prevstateno != 10014
trigger1 = time=1
fv =13     ;fv = 
value = 7
ignorehitpause=1
persistent=0

[State 0, VarAdd]
type = VarAdd
triggerall=prevstateno = 10014
trigger1 = time=1
fv =13     ;fv = 
value = 7.05
ignorehitpause=1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;5S: Eruption Slam (Attempt)
;-----------------------------
[Statedef 10010]
type    = S
movetype= A
physics = S
poweradd = 50*var(2)
ctrl = 0
anim =10001
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 1001
p2stateno = 1052

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;5S: Eruption Slam (Hit)
;-----------------------------
[Statedef 1001]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 70*var(2)
ctrl = 0
anim =1001
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 700,1
channel = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 1900 
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
attr = S, ST
animtype  = Hard
damage = ceil(cond(fvar(11) *50 < 70, 70, fvar(11) * 50)), 0
hitflag = MAF
guardflag = MA
pausetime = 15,15
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 9999
air.hittime = 9999
ground.velocity = -2,-4
air.velocity = -2.5,-3
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p1stateno = 1007
p2stateno = 1056
getpower = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 7
time = 12
freq = 80
ampl = -8
;phase = 90
;ignorehitpause = 
;persistent = 
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 4
value = 1003
ID = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 53,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
time = 3
id = -1
pos = 46,-31 

[State 0, TargetFacing]
type = TargetFacing
trigger1 = animelem = 4
trigger2 = animelem = 7
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
time = 3
id = -1
pos = -42,-32 

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 7
time = 3
id = -1
pos = 62,0 



[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;5S: Eruption Slam (Hit)
;-----------------------------
[Statedef 1002]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 70*var(2)
ctrl = 0
anim =10002
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 700,1
channel = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
attr = S, ST
animtype  = Hard
damage = ceil(cond(fvar(11) *50 < 70, 70, fvar(11) * 50)), 0
hitflag = MAF
guardflag = MA
pausetime = 15,15
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 9999
air.hittime = 9999
ground.velocity = -2,-4
air.velocity = -2.5,-3
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p1stateno = 1007
p2stateno = 1056
getpower = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 7
time = 12
freq = 80
ampl = -8
;phase = 90
;ignorehitpause = 
;persistent = 
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 4
value = 1003
ID = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 53,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
time = 3
id = -1
pos = 46,-31 

[State 0, TargetFacing]
type = TargetFacing
trigger1 = animelem = 4
trigger2 = animelem = 7
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
time = 3
id = -1
pos = -42,-32 

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 7
time = 3
id = -1
pos = 62,0 



[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Crush Run Hurt
;-----------------------------
[Statedef 1003]
type    = A
movetype= H
physics = N
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 400
value = 5210
ctrl = 0
;5S: Eruption Slam (Hit)
;-----------------------------
[Statedef 1003]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =10002
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 700,1
channel = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
attr = S, ST
animtype  = Hard
damage = ceil(cond(fvar(11) *50 < 70, 70, fvar(11) * 50)), 0
hitflag = MAF
guardflag = MA
pausetime = 15,15
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 9999
air.hittime = 9999
ground.velocity = -2,-4
air.velocity = -2.5,-3
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p1stateno = 1007
p2stateno = 1056
getpower = (100)*(cond(var(var(2)) = 1, 1, .5))

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 7
time = 12
freq = 80
ampl = -8
;phase = 90
;ignorehitpause = 
;persistent = 
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 4
value = 1003
ID = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 53,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
time = 3
id = -1
pos = 46,-31 

[State 0, TargetFacing]
type = TargetFacing
trigger1 = animelem = 4
trigger2 = animelem = 7
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
time = 3
id = -1
pos = -42,-32 

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 7
time = 3
id = -1
pos = 62,0 

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit
fv =13     ;fv = 
value = 7
ignorehitpause=1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;5S: Eruption Slam (Air Leap)
;-----------------------------
[Statedef 1004]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =10003
sprpriority = 2
velset = 3,-8


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 0,20

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 2
time = 3
id = -1
pos = -10,-2

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 3
time = 999
id = -1
pos = -2,-36

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .45


[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 1056
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1




[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 1008

;5S: Eruption Slam (Finishing Slam)
;-----------------------------
[Statedef 1008]
type    = S
movetype= A
physics = S
velset = 4,0
poweradd= 0
ctrl = 0
anim =1104
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 700,4
channel = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0


[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
removeongethit = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
attr = S, NA
animtype  = Hard
damage = ceil(cond(fvar(11) *150 < 60, 60, fvar(11) *150)), 6
hitflag = MAF
guardflag = 
pausetime = 5,5
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,2
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -1,-6
air.velocity = -1,-4
fall = 1
fall.yvelocity = 0
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
getpower = 0

[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = time=0
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = time=0
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 5
value = 1303
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 1
id = -1
pos = 35,0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;5S: Eruption Slam (Air Leap)
;-----------------------------
[Statedef 1007]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =1002
sprpriority = 2
velset = 3,-8


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 0,20

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 2
time = 3
id = -1
pos = -10,-2

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 3
time = 999
id = -1
pos = -2,-36

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .45


[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 1056
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1




[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 1008

;5S: Eruption Slam (Finishing Slam)
;-----------------------------
[Statedef 1008]
type    = S
movetype= A
physics = S
velset = 4,0
poweradd= 0
ctrl = 0
anim =1104
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 700,4
channel = 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0


[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
removeongethit = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
attr = S, ST
animtype  = Hard
damage = ceil(cond(fvar(11) *150 < 60, 60, fvar(11) *150)), 6
hitflag = MAF
guardflag = 
pausetime = 5,5
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,2
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -1,-6
air.velocity = -1,-4
fall = 1
fall.yvelocity = 0
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
getpower = 0

[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = time=0
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = time=0
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 5
value = 1303
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 1
id = -1
pos = 35,0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;Eruption Slam P2 State 
;-----------------------------
[Statedef 1052]
type    = S
movetype= H
physics = S
juggle  = 2
ctrl = 0
sprpriority = 9

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5100

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 35
value = 5210
ctrl = 0

;Eruption Slam P2 State 
;-----------------------------
[Statedef 1053]
type    = S
movetype= H
physics = S
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5100

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 35
value = 5210
ctrl = 0
;---------------------------------------------------------------------

;Eruption Slam P2 State 
[Statedef 1056]
type    = A
movetype= H
physics = N
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5100

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 400
value = 5210
ctrl = 0

;4S: Vulcan Hoist
;-----------------------------
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =1005
sprpriority = 2

[State 0, VelAdd]
type = VelAdd
trigger1 = animelem = 1
x = 3

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 1

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 0, 1

;============================
[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		=  3
ignorehitpause 	=  1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		=  0.95	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		=  0.70	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0
;============================

[State 630, 2]
type = HitDef 
p2facing = 1 
triggerall= enemy, statetype!=A
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = MAF
guardflag = MA
priority = 3
pausetime = 0,0
guard.pausetime = 10,10
guard.velocity = -2
guard.ctrltime = 20
sparkno = 1000
sparkxy = P2BodyDist X - 50, -45 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = S5,0
guardsound = 6,0
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-2.5
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-2.5
air.hittime = 24
p1stateno = 1101
p2stateno = 11002
getpower = (100)*(cond(var(var(3)) = 1, 1, .5))


[State 630, 2]
type = HitDef 
p2facing = 1 
triggerall= enemy, statetype=A
triggerall = enemy, movetype!=A 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = MAF
guardflag = MA
priority = 3
pausetime = 0,0
guard.pausetime = 10,10
guard.velocity = -2
guard.hittime = 21
guard.slidetime = 12
guard.ctrltime = 25
sparkno = 1000
sparkxy = P2BodyDist X - 50, -45 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = S5,0
guardsound = 6,0
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-2.5
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-2.5
air.hittime = 24
p1stateno = 1101
p2stateno = 11002
getpower = (100)*(cond(var(var(3)) = 1, 1, .5))

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Vulcan Hoist hit
;-----------------------------
[Statedef 1101]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =1006
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 51    ;fv = 10
value = 1
ignorehitpause = 1
;persistent = 

[State 0, VarAdd]
type = VarAdd
trigger1 = time=1
fv =13     ;fv = 
value = 1.5
ignorehitpause=1
persistent=0

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 5
value = cond(var(11) = 0, 1103, 1104)

[State 7711]
type = Explod 
trigger1 = Time%1 = 0
trigger1 = Time >= 1
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1
postype = p2
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S0,0


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 53,0


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
time = 1
id = -1
pos = 44,-52 

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time>28
value = 1


[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Vulcan Hoist p2 state
;================
[Statedef 11002]
type    = S
movetype= H
physics = S
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 35
value = 5210
ctrl = 0

;Vulcan Hoist p2 state
;================
[Statedef 1153]
type    = A
movetype= H
physics = N
ctrl = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
[State 0, Gravity]
type = Gravity
trigger1 = 1


[State 0, VelAdd]
type = VelSet
trigger1 = time = 0
x = -.2
y = -8

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y<=0 && anim!=5051
value = 5051

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y>=0 && anim!=5061
value = 5061

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 5200
ctrl = 0

;---------------------------------------------------------------------------
;4EX P2 HURT STATE
;---------------------------------------------------------------------------
[Statedef 2099]
type    = A
movetype= H
physics = N
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 400
value = 5210
ctrl = 0

;NEW 4EX
;-----------------------------
[Statedef 10050]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 999
poweradd = -1000
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0


[State 0, NotHitBy]
type = NotHitBy
trigger1 = time <=10
value = SCA,NA,SA
time = 1

;EX Effects
[State 200, 2]
type = PlaySnd
trigger1 = time = 0
value = 6800, 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6950
ID = 6950
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6800
ID = 6800
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.9,0.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, Explod]
type = Explod
trigger1 = time=  0
anim = F99
ID = 99
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1.4,1.4
sprpriority = 4
ontop = 1
removeongethit = 0
ignorehitpause =0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = time = 20
add = 200,120,0
mul = 256,256,256
sinadd = 100,60,0,4
invertall = 0
color = 256


[State 0, AfterImage]
type = AfterImage
trigger1 =  time = 0 
time = 35
length = 25
palcolor = 256
;palinvertall = 0
palbright = 200,120,0
palcontrast = 200,120,0
palpostbright = 200,120,0
paladd = -200,-120,-00
palmul = .9,.9,9
Trans = Add
framegap = 5
timegap = 1

;============================
[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		=  1
ignorehitpause 	=  1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		=  0.80	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		=  0.93	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0
;============================

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST, SA
damage = 0, 0
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
guard.pausetime = 18, 18
sparkno = 0
sparkxy = -5,-35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 10051
getpower = 0

[State 0, TargetState]
type = TargetState
trigger1 =movehit=1
value = 10052
ID = 2
;ignorehitpause = 
;persistent = 


[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;4EX HIT
;-----------------------------
[Statedef 10051]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 0
ctrl = 0
anim =1051
sprpriority = 2

[State 0, PlaySnd] ;futile
type = PlaySnd
trigger1 = time = 3 && palno != 9
value =8000,7

[State -3, Cursed Voices] ;3000!!!!
type = PlaySnd
trigger1 = time = 0 && palno = 9
value = 7613,0

[State 0, MAPSET]
type 		= MapSet
trigger1 		= 1
map 		= "ScratchLockout"
value 		= 10
ignorehitpause 	= 1
persistent		= 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA
time = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 20    ;fv = 10
value = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 8
trigger2 = animelem = 15
trigger3 = animelem = 22
trigger4 = animelem = 29
trigger5 = animelem = 36
time = 9
freq = 60
ampl = -4


[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = animelem = 8
trigger2 = animelem = 15
trigger3 = animelem = 22
trigger4 = animelem = 29
attr = S, ST
animtype  = Hard
damage = 20*MAP(P4), 0
hitflag = MAF
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -4.5,-2
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p2stateno = 2099
getpower = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = animelem = 36
attr = S, ST
animtype  = Hard
damage = ceil(cond(fvar(11) *50 < 8, 8, fvar(11) * 50)), 2
hitflag = MAF
guardflag = MA
pausetime = 15,15
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -4.5,-2
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p1stateno = 10057
p2stateno = 2099
getpower = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 7
trigger2 = animelem = 14
trigger3 = animelem = 21
trigger4 = animelem = 27
trigger5 = animelem = 35
time = 12
freq = 80
ampl = -8
;phase = 90
;ignorehitpause = 
;persistent = 
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 4
value = 1003
ID = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 53,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
trigger2 = animelem = 11
trigger3 = animelem = 18
trigger4 = animelem = 25
trigger5 = animelem = 33
time = 3
id = -1
pos = 46,-31 

[State 0, TargetFacing]
type = TargetFacing
trigger1 = animelem = 4
trigger2 = animelem = 7
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
trigger2 = animelem = 13
trigger3 = animelem = 19
trigger4 = animelem = 26
trigger5 = animelem = 33
time = 3
id = -1
pos = -42,-32 

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 7
trigger2 = animelem = 14
trigger3 = animelem = 21
trigger4 = animelem = 28
trigger5 = animelem = 35
time = 3
id = -1
pos = 62,0 



[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------
;4EX INITIAL DUNK
[Statedef 10057]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =1002
sprpriority = 2
velset = 3,-4

[State 0, MAPSET]
type 		= MapSet
trigger1 		= 1
map 		= "ScratchLockout"
value 		= 10
ignorehitpause 	= 1
persistent		= 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0



[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 0,20

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 2
time = 3
id = -1
pos = -10,-2

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 3
time = 999
id = -1
pos = -2,-36

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .45


[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 10056
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 10058

;-----------------------------
;4EX: SLAM
;check debug for context lol
[Statedef 10058]
type    = S
movetype= A
physics = S
velset = 4,0
poweradd= 0
ctrl = 0
anim =1104
sprpriority = 2

[State 0, MAPSET]
type 		= MapSet
trigger1 		= 1
map 		= "ScratchLockout"
value 		= 10
ignorehitpause 	= 1
persistent		= 1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0


[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
removeongethit = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0 && prevstateno != 10059
attr = S, ST
animtype  = Hard
damage = 90*MAP(P4), 6
hitflag = MAF
guardflag = 
pausetime = 3,3
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,2
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,0
fall.yvelocity = 0
air.velocity = -4.5,0
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 20
envshake.freq =160
envshake.ampl = 3
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
getpower = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0 && prevstateno = 10059
attr = S, ST
animtype  = Hard
damage = ceil(cond(fvar(11) *95 < 10, 10, fvar(11) *95)), 6
hitflag = MAF
guardflag = 
pausetime = 3,3
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,2
ground.type = trip
air.type	= trip
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3, 2
fall.yvelocity = 0
air.velocity = -4.5, 2
fall = 1
air.fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 20
envshake.freq =160
envshake.ampl = 3
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
getpower = 0

[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = time=0
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = time=0
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 5
value = 1303
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 1
id = -1
pos = 35,0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 7
value = cond(prevstateno = 10059, 0,10059)
ctrl = 1


;-----------------------------
;4EX: AIR LEAP STATE
;ik its organized weird but what can you do lol
[Statedef 10059]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =1002
sprpriority = 2
velset = 2,-12

[State 0, MAPSET]
type 		= MapSet
trigger1 		= 1
map 		= "ScratchLockout"
value 		= 10
ignorehitpause 	= 1
persistent		= 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 0,20

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 2
time = 3
id = -1
pos = -10,-2

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 3
time = 999
id = -1
pos = -2,-36

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .45


[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 10056
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 10058

;----------------------------
;Eruption Slam P2 State 
;-----------------------------
[Statedef 1053]

;Eruption Slam P2 State 
[Statedef 1056]
type    = S
movetype= H
physics = S
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5100

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 35
value = 5210
ctrl = 0
;---------------------------------------------------------------------
[Statedef 10059]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =1002
sprpriority = 2
velset = 2,-12

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5100

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 400
value = 5210

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 0
value = SCA,NA,SA,NP,SP,NT,ST
time = 5

;EX Effects
[State 200, 2]
type = PlaySnd
trigger1 = time = 0
value = 6800, 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6950
ID = 6950
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6800
ID = 6800
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.9,0.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, Explod]
type = Explod
trigger1 = time=  0
anim = F99
ID = 99
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1.4,1.4
sprpriority = 4
ontop = 1
removeongethit = 0
ignorehitpause =0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = time = 20
add = 200,120,0
mul = 256,256,256
sinadd = 100,60,0,4
invertall = 0
color = 256


[State 0, AfterImage]
type = AfterImage
trigger1 =  time = 0 
time = 35
length = 25
palcolor = 256
;palinvertall = 0
palbright = 200,120,0
palcontrast = 200,120,0
palpostbright = 200,120,0
paladd = -200,-120,-00
palmul = .9,.9,9
Trans = Add
framegap = 5
timegap = 1

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 10051
p2stateno = 2099
getpower = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 20    ;fv = 10
value = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 8
trigger2 = animelem = 15
trigger3 = animelem = 22
trigger4 = animelem = 29
trigger5 = animelem = 36
time = 9
freq = 60
ampl = -4


[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = animelem = 8
trigger2 = animelem = 15
trigger3 = animelem = 22
trigger4 = animelem = 29
attr = S, ST
animtype  = Hard
damage = ceil(cond(fvar(11) *20 < 12, 12, fvar(11) * 20)), 0
hitflag = MAF
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -4.5,-2
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p2stateno = 2099
getpower = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = animelem = 36
attr = S, ST
animtype  = Hard
damage = ceil(cond(fvar(11) *50 < 70, 70, fvar(11) * 50)), 0
hitflag = MAF
guardflag = MA
pausetime = 15,15
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -4.5,-2
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p1stateno = 10057
p2stateno = 2099
getpower = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 7
trigger2 = animelem = 14
trigger3 = animelem = 21
trigger4 = animelem = 27
trigger5 = animelem = 35
time = 12
freq = 80
ampl = -8
;phase = 90
;ignorehitpause = 
;persistent = 
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 4
value = 1003
ID = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 53,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
trigger2 = animelem = 11
trigger3 = animelem = 18
trigger4 = animelem = 25
trigger5 = animelem = 33
time = 3
id = -1
pos = 46,-31 

[State 0, TargetFacing]
type = TargetFacing
trigger1 = animelem = 4
trigger2 = animelem = 7
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
trigger2 = animelem = 13
trigger3 = animelem = 19
trigger4 = animelem = 26
trigger5 = animelem = 33
time = 3
id = -1
pos = -42,-32 

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 7
trigger2 = animelem = 14
trigger3 = animelem = 21
trigger4 = animelem = 28
trigger5 = animelem = 35
time = 3
id = -1
pos = 62,0 



[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 1001
p2stateno = 1052


[State 0, VarSet]
type = VarSet
trigger1 = prevstateno!=(666999) && time = 0
v = 55    ;fv = 10
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = 1
v = 55
value = 1
ignorehitpause = 1
;-----------------------------
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim =10001
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 1001
p2stateno = 1052

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
type    = S
movetype= A
physics = S
ctrl = 0
anim =10001
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 10002
p2stateno = 1052

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
type    = L
movetype= H
physics = N

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = ceil(ifElse(enemy, fvar(11) * -300 > -80, -80, enemy, fvar(11) * -300))

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20
freq = 160
ampl = -8

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
[State 0, ChangeState]
type = selfState
trigger1 = time = 60
value = 5120
ctrl = 0
;anim =
;ignorehitpause = 
;persistent = 

;[State 5110, EnvShake]
;type = FallEnvShake
;trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

;[State 5110, 6]
;type = PlaySnd
;trigger1 = Time = 0
;trigger1 = !SysVar(0)
;value = F7, (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56))

[State 5110, 7]
type = Explod
trigger1 = Time = 0
trigger1 = !SysVar(0)
anim = F(60 + (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56)))
pos = 0, 0
sprpriority = ifelse (sysvar(1) <= Const720p(56), -10, 10)

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14] ;Friction
type = VelSet
trigger1 = abs(Vel x) < Const(movement.down.friction.threshold)
persistent = 0
x = 0

[State 5110, 15]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 16]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 10002
p2stateno = 1052

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = M-
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 10002
p2stateno = 1052

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 0,20

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 2
time = 3
id = -1
pos = -10,-2

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 3
time = 999
id = -1
pos = -2,-36

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .45


[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 10056
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 10058

;||EX GRAB (WHIFF)
;-----------------------------
[Statedef 2001]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd=-1000
ctrl = 0
anim =10010
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 =time<=6
value = ,NT
time = 1

;EX Effects
[State 200, 2]
type = PlaySnd
trigger1 = time = 0
value = 6800, 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6950
ID = 6950
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6800
ID = 6800
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.9,0.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, Explod]
type = Explod
trigger1 = time=  0
anim = F99
ID = 99
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1.4,1.4
sprpriority = 4
ontop = 1
removeongethit = 0
ignorehitpause =0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = time = 20
add = 200,120,0
mul = 256,256,256
sinadd = 100,60,0,4
invertall = 0
color = 256

 ;============================
[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		=  4
ignorehitpause 	=  1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		=  1.2	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		=  1	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0
;============================

[State 0, AfterImage]
type = AfterImage
trigger1 =  time = 0 
time = 35
length = 25
palcolor = 256
;palinvertall = 0
palbright = 200,120,0
palcontrast = 200,120,0
palpostbright = 200,120,0
paladd = -200,-120,-00
palmul = .9,.9,9
Trans = Add
framegap = 5
timegap = 1

[State 630, 2]
type = HitDef 
trigger1 = p2stateno != [120,199]
trigger1 = p2stateno != [40, 43]
hitonce = 1
attr = S, HT
damage = 0, 0
hitflag = M
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = 5,0
guardsound = 6,0
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
getpower = 0
p1stateno = 2005
p2stateno = 3002

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;EX Grab (CONFIRM)
;-----------------------------
[Statedef 2005]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =10002
sprpriority = 2

[State 0, PlaySnd] ;SLAMMAAAHHH
type = PlaySnd
trigger1 = time = 8 && palno = 9
value = 7613,4

[State 0, PlaySnd] ;SLAMMAAAHHH
type = PlaySnd
trigger1 = time = 3 && palno != 9
value = 8000,1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10042
ID = 10042
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99
scale = .7,.7
sprpriority = 6

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 60606070
ID = 60606060
pos = 30,-71
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99
scale = 1,1
sprpriority = 6

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 60606061
ID = 60606060
pos = 30,-71
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99
scale = .1,.9
sprpriority = 6

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 60606061
ID = 60606060
pos = 30,-71
postype = p1  ;p2,front,back,left,right
facing = 1
removetime = -2
supermovetime = 99
scale = 3.1,.1
sprpriority = 6

[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 1052
ID = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 53,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
time = 3
id = -1
pos = 46,-31 

[State 0, TargetFacing]
type = TargetFacing
trigger1 = animelem = 4
trigger2 = animelem = 7
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
time = 3
id = -1
pos = -42,-32 

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 7
time = 3
id = -1
pos = 62,0 



[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 40015
ctrl = 1

;EX Grab (Air Leap)
;-----------------------------
[Statedef 40015]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =10003
sprpriority =-5
velset = 0,-11

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "camera"
ID = 10002
stateno = 101010
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value =0
movecamera = 0,0


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 999
id = -1
pos = 0,-190

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .30

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 11
x = 0
y = 9


[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = time = 0
value = 1056
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1


[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 40016



;---------------------------------------------------------------------------
;EX Grab (Slam)
;-----------------------------
[Statedef 40016]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 0
ctrl = 0
anim =10004
sprpriority = -6
velset = 0,0

;============================
[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		=  2
ignorehitpause 	=  1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		=  0.89	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		=  0.90	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0
;============================


[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 30
freq = 150

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 10008
ID = 206
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .76,.76
sprpriority =4
ontop = 1
removeongethit = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 0
time = 1
id = -1
pos = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
x = -9
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = -10


[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
attr = S, HT
animtype  = Light
damage = 300*MAP(P4), 0
hitflag = MAFD
guardflag = MA
pausetime = 35,45
sparkno = 2
sparkxy = -10,-34
hitsound   = 5,2
guardsound = 6,2
ground.type = trip
air.type	= trip
p2sprpriority = 9
ground.slidetime = 12
ground.hittime  = ceil(cond(fvar(15) *24 < 9, 9, fvar(15) * 24))
air.hittime  = ceil(cond(fvar(15) *30 < 9, 9, fvar(15) * 30))
down.hittime = ceil(cond(fvar(15) *30 < 9, 9, fvar(15) * 30))
ground.velocity = 0,19
air.velocity = 0,19
fall.yvelocity =-13
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
guard.hittime = 25
guard.ctrltime = 16
envshake.time = 30
envshake.freq = 200
envshake.ampl = 5
getpower = 0


[State 0, VarAdd]
type = VarAdd
trigger1 = time=1
fv =13     ;fv = 
value = 7
ignorehitpause=1
persistent=0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------
;EX Grab Hurt
[Statedef 3002]
type    = A
movetype= H
physics = S
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 35
value = 5210

;EX 4S: Vulcan Hoist Attempt
;-----------------------------
[Statedef 1150]
type    = S
movetype= A
physics = S
ctrl = 0
anim =1000
poweradd = -1000
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time <=8
value = SCA,NA,SA,NP,SP,NT,ST
time = 1

;EX Effects
[State 200, 2]
type = PlaySnd
trigger1 = time = 0
value = 6800, 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6950
ID = 6950
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6800
ID = 6800
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.9,0.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, Explod]
type = Explod
trigger1 = time=  0
anim = F99
ID = 99
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1.4,1.4
sprpriority = 4
ontop = 1
removeongethit = 0
ignorehitpause =0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = time = 20
add = 200,120,0
mul = 256,256,256
sinadd = 100,60,0,4
invertall = 0
color = 256


[State 0, AfterImage]
type = AfterImage
trigger1 =  time = 0 
time = 35
length = 25
palcolor = 256
;palinvertall = 0
palbright = 200,120,0
palcontrast = 200,120,0
palpostbright = 200,120,0
paladd = -200,-120,-00
palmul = .9,.9,9
Trans = Add
framegap = 5
timegap = 1

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = S, ST
damage = 0, 0
hitflag = MAFD
guardflag = MA
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 1151
p2stateno = 10052
getpower = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;EX 4S Followup
;-----------------------------
[Statedef 1151]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= 0
ctrl = 0
anim =1051
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 20    ;fv = 10
value = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 8
trigger2 = animelem = 15
trigger3 = animelem = 22
trigger4 = animelem = 29
trigger5 = animelem = 36
time = 9
freq = 60
ampl = -4


[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = animelem = 8
trigger2 = animelem = 15
trigger3 = animelem = 22
trigger4 = animelem = 29
attr = S, ST
animtype  = Hard
damage = ceil(cond(fvar(11) *25 < 15, 15, fvar(11) * 25)), 0
hitflag = MAF
guardflag = MA
pausetime = 3,3
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -4.5,-2
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p2stateno = 2099
getpower = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = animelem = 36
attr = S, ST
animtype  = Hard
damage = ceil(cond(fvar(11) *100 < 75, 75, fvar(11) * 100)), 0
hitflag = MAF
guardflag = MA
pausetime = 15,15
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -4.5,-2
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
getpower = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 7
trigger2 = animelem = 14
trigger3 = animelem = 21
trigger4 = animelem = 27
trigger5 = animelem = 35
time = 12
freq = 80
ampl = -8
;phase = 90
;ignorehitpause = 
;persistent = 
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 6969, (0+(Random%4))
channel=1
[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem=7
value = 7070, 0
channel=2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 4
value = 1003
ID = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 3
id = -1
pos = 53,0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 4
trigger2 = animelem = 11
trigger3 = animelem = 18
trigger4 = animelem = 25
trigger5 = animelem = 33
time = 3
id = -1
pos = 46,-31 

[State 0, TargetFacing]
type = TargetFacing
trigger1 = animelem = 4
trigger2 = animelem = 7
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 5
trigger2 = animelem = 13
trigger3 = animelem = 19
trigger4 = animelem = 26
trigger5 = animelem = 33
time = 3
id = -1
pos = -42,-32 

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 7
trigger2 = animelem = 14
trigger3 = animelem = 21
trigger4 = animelem = 28
trigger5 = animelem = 35
time = 3
id = -1
pos = 62,0 

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;EX Vulcan Hoist p2 state
;-----------------------------
[Statedef 1152]
type    = S
movetype= H
physics = S
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 35
value = 5210
ctrl = 0

;EX Vulcan Hoist p2 state
;-----------------------------
[Statedef 1103]
type    = A
movetype= H
physics = N
ctrl = 0
sprpriority = 2

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .24

[State 0, VelAdd]
type = VelSet
trigger1 = time = 0
x = -.3
y = -6

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y<=0 && anim!=5051
value = 5051

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = vel y>=0 && anim!=5061
value = 5061

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 55
value = 5210
ctrl = 0

;EX 2S: Meteor Press (Start up)
;-----------------------------
[Statedef 1350]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd= -1000
ctrl = 0
anim =1100
sprpriority = 2


[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 22    ;fv = 10
value = 1

[State 8000, Varadd]
type = VarAdd
trigger1 = time = 0
v = 33    ;fv = 10
value = 1
persistent = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = A
time = 1

;EX Effects
[State 200, 2]
type = PlaySnd
trigger1 = time = 0
value = 6800, 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6950
ID = 6950
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6800
ID = 6800
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.9,0.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 200, 2]
type = PlaySnd
trigger1 = time = 1
value = 0, 1
[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 6500
ID = 6500
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.9
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, Explod]
type = Explod
trigger1 = time=  0
anim = F99
ID = 99
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1.4,1.4
sprpriority = 4
ontop = 1
removeongethit = 0
ignorehitpause =0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = time = 20
add = 200,120,0
mul = 256,256,256
sinadd = 100,60,0,4
invertall = 0
color = 256


[State 0, AfterImage]
type = AfterImage
trigger1 =  time = 0 
time = 35
length = 25
palcolor = 256
;palinvertall = 0
palbright = 200,120,0
palcontrast = 200,120,0
palpostbright = 200,120,0
paladd = -200,-120,-00
palmul = .9,.9,9
Trans = Add
framegap = 5
timegap = 1



[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1351

;EX 2S: Meteor Press (Airborne)
;-----------------------------
[Statedef 1351]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 0
ctrl = 0
anim =1101
velset = 3,-9
sprpriority = 2

[State 0, MAPSET]
type 		= MapSet
trigger1 		= 1
map 		= "ScratchLockout"
value 		= 30
ignorehitpause 	= 1
persistent		= 1

[State 0, VelSet]
type = VelSet
triggerall = command= "holdfwd"
trigger1 = time = 0 
x = 6
y =-6

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = time <=17
value = A
time = 1

[State 7711]
type = Explod
trigger1 = Time%1 = 0
trigger1 = Time >= 1
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 7711]
type = Explod
trigger1 = Time%4 = 0
trigger1 = Time >= 4
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1

[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		= 2
ignorehitpause 	= 1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		= 0.87	;90% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		= 0.84	;84% DMG For next hit
ignorehitpause 	= 1
persistent = 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0

[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
trigger1 = p2stateno != 120
trigger1 = p2stateno != 142
trigger1 = p2stateno != 122
trigger1 = p2stateno != 152
hitonce = 1
attr = A, ST
damage = 30, 0
hitflag = AF
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 1000
sparkxy = P2BodyDist X - -10, -130 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = 5,0
guardsound = 6,0
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 1352
p2stateno = 1353
getpower = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1330

;EX Meteor Press Hit
;-----------------------------
[Statedef 1352]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =1103
sprpriority = 2

[State 0, PlaySnd] ;HELLLLL
type = PlaySnd
triggerall=prevstateno!=1351
trigger1=palno!=9
trigger1 = time = 0 
value = 8000,2
[State 0, PlaySnd] ;DELIVERY.
type = PlaySnd
triggerall=prevstateno=1351
trigger1=palno!=9
trigger1 = time = 0 
value = 8000,5

[State 0, PlaySnd] ;futile
type = PlaySnd
trigger1=palno=9
trigger1 = time = 0 
value = 7613,5


[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .35

[State 0, VelAdd]
type = Veladd
trigger1=time=0
x = 3
ignorehitpause = 1
persistent = 0

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 7711]
type = Explod
trigger1 = Time%4 = 0
trigger1 = Time >= 4
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 5
value = 1353
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 999
id = -1
pos = -2,-36



[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 1354

;EX Meteor Press Land
;-----------------------------
[Statedef 1354]
type    = S
movetype= A
physics = S
velset = 4,0
poweradd= 0
ctrl = 0
anim =1104
sprpriority = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
fv =13     ;fv = 
value = 4

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
removeongethit = 0
ignorehitpause = 1

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
attr = S, NA
animtype  = Hard
damage = ceil(cond(fvar(11) *230 < 55, 55, fvar(11) * 180)),10
hitflag = MAF
guardflag = 
pausetime = 25,20
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 999
air.hittime = 999
ground.velocity = 0.6,-9.3
air.velocity = -0.6,-9.3
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 25
envshake.freq = 110
envshake.ampl = 5
envshake.phase = 1
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
getpower=0
guard.dist = 20
guard.slidetime = 30;
fall.yvelocity = 0
[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 5
value = 1353
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 1
id = -1
pos = 35,0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;EX Meteor Press p2 state
;-----------------------------
[Statedef 1353]
type    = A
movetype= H
physics = N
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 400
value = 5210
ctrl = 0

;2S: Meteor Press (Start up)
;-----------------------------
[Statedef 1300]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =1100
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = A
time = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
fv =13     ;fv = 
value = 4


[State 200, 2]
type = PlaySnd
trigger1 = time = 1
value = 0, 1
[State 0, Explod]
type = Explod
trigger1 = time = 1
anim = 6500
ID = 6500
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.9
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 30
time = 30
add = 150,100,0
mul = 256,256,256
sinadd = 150,100,0,30
invertall = 0
color = 256


[State 0, EnvShake]
type = EnvShake
trigger1 = time = 36
time = 12
freq = 60
ampl = -7

[State 0, Explod]
type = Explod
trigger1 = time = 36
anim = 505
ID = 206
pos = -34,-54
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 1
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = time = 36
anim = 505
ID = 206
pos = -3,-60
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = -3
removeongethit = 0



[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1301

;2S: Meteor Press (Air)
;-----------------------------
[Statedef 1301]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 0
ctrl = 0
anim =1101
velset = 3,-9
sprpriority = 2

[State 0, MAPSET]
type 		= MapSet
trigger1 		= 1
map 		= "ScratchLockout"
value 		= 30
ignorehitpause 	= 1
persistent		= 1

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = time <=17 && enemy, stateno != 900
value = A
time = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
fv =13     ;fv = 
value = 4


[State 0, VelSet]
type = VelSet
triggerall = command= "holdfwd"
trigger1 = time = 0 
x = 5
y =-6

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 7711]
type = Explod
trigger1 = Time%4 = 0
trigger1 = Time >= 4
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1


[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
trigger1 = p2stateno != [120,199] && p2stateno != 900
hitonce = 1
attr = A, ST
damage = 0, 0
hitflag = AF
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 1000
sparkxy = P2BodyDist X - -10, -130 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = 5,0
guardsound = 6,0
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 1305
p2stateno = 1307
getpower = (100)*(cond(var(var(2)) = 1, 1, .5))

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1330

;2S: Meteor Press (Air)
;-----------------------------
[Statedef 1302]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 0
ctrl = 0
anim =1101
velset = 5,-9
sprpriority = 2

[State 0, VelSet]
type = VelSet
triggerall = command= "holdfwd"
trigger1 = time = 0 
x = 4
y =-6

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
fv =13     ;fv = 
value = 4

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 7711]
type = Explod
trigger1 = Time%4 = 0
trigger1 = Time >= 4
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1


[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = A, ST
damage = 0, 0
hitflag = AF
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 1000
sparkxy = P2BodyDist X - -10, -130 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = 5,0
guardsound = 6,0
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 1305
p2stateno = 1307
getpower = (100)*(cond(var(var(2)) = 1, 1, .5))

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1330

;2S: Meteor Press (Air)
;-----------------------------
[Statedef 1303]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 0
ctrl = 0
anim =1101
velset = 6,-9
sprpriority = 2

[State 0, VelSet]
type = VelSet
triggerall = command= "holdfwd"
trigger1 = time = 0 
x = 4
y =-6

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
fv =13     ;fv = 
value = 4


[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 7711]
type = Explod
trigger1 = Time%4 = 0
trigger1 = Time >= 4
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1


[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
hitonce = 1
attr = A, ST
damage = 0, 0
hitflag = AF
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 1000
sparkxy = P2BodyDist X - -10, -130 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = 5,0
guardsound = 6,0
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
p1stateno = 1305
p2stateno = 1307
getpower = (100)*(cond(var(var(2)) = 1, 1, .5))
[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1330

;Meteor Press Hit
;-----------------------------
[Statedef 1305]
type    = A
movetype= A
physics = N
ctrl = 0
anim =1103
sprpriority = 2

[State 0, PlaySnd] ;futile
type = PlaySnd
triggerall=prevstateno!=1301
trigger1=palno!=9
trigger1 = time = 0 
value = 8000,0
[State 0, PlaySnd] ;futile
type = PlaySnd
triggerall=prevstateno=1301
trigger1=palno!=9
trigger1 = time = 0 
value = 8000,3+random%2

[State -3, WTF Voices] ;cursed palette sound lol
type = PlaySnd
trigger1 = time = 0 && palno = 9
value = 7613,1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .35

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
fv =13     ;fv = 
value = 4

[State 0, VelAdd]
type = Veladd
triggerall=time=0
trigger1 = prevstateno=1301
x = 3
ignorehitpause = 1
persistent = 0

[State 0, VelAdd]
type = Veladd
triggerall=time=0
trigger1 = prevstateno=1302
x = -3
y=3
ignorehitpause = 1
persistent = 0

[State 7711]
type = Explod
trigger1 = Time%4 = 0
trigger1 = Time >= 4
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 5
value = 1303
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 999
id = -1
pos = -2,-36

[State 0, VarSet]
type = VarSet
trigger1 = time = 0 && prevstateno = 1301
v = 55
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0 && prevstateno = 1302
v = 55
value = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0 && prevstateno = 1303
v = 55
value = 3

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y>=0 && vel y>=0
value = 1306

;Meteor Press Land
;-----------------------------
[Statedef 1306]
type    = S
movetype= A
physics = S
velset = 4,0
poweradd= 0
ctrl = 0
anim =1104
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem = 1
value = 6969, (0+(Random%4))
channel=1

[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = animelem = 1
value = 7070, 0
channel=2

[State 0, Varadd]
Type = VarAdd
trigger1 = movehit = 1
fv = 26
value = 1
ignorehitpause = 1
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
fv =13     ;fv = 
value = 4
ignorehitpause = 1
persistent = 0

[State -2, VarSet]
type = VarSet
trigger1 = !numtarget
fv = 26
value = 0

[State 0, Explod]
type = Explod
trigger1 = time = 0 && var(55) = 1
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 1&& var(55) = 2
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority =5
ontop = 1
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1900
ID = 206
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1.4,2
sprpriority =5
ontop = 1
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 6900
ID = 6900
pos = 58,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .7,.7
sprpriority =5
ontop = 1
removeongethit = 0


[State 210, 2] ;2S
type = HitDef 
p2facing = 1
trigger1 = time = 0 && prevstateno = 1305
attr = S, NA
animtype  = Hard
damage = 250*MAP(P4), 6
hitflag = MAF
guardflag = 
pausetime = 15,15
sparkno = 3
sparkxy = -35,-0
hitsound   = 5,3
guardsound = 6,2
ground.type = trip
air.type = trip
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -1,-4
air.velocity = -1,-4
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
fall.yvelocity = 0
getpower = 0

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 5
value = 1307
ID = -1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 5
value = 1307
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 1
id = -1
pos = 35,0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Meteor Press p2 state
;-----------------------------
[Statedef 1307]
type    = A
movetype= H
physics = N
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 400
value = 5210
ctrl = 0

;2S: Shoryu land
;-----------------------------
[Statedef 1330]
type    = S
movetype= I
physics = S
juggle  = 2
poweradd= 0
ctrl = 0
anim =1105
velset = 0,0
sprpriority = 2
facep2 = 1

[State 0, PlaySnd] ;wooomp
type = PlaySnd
trigger1 = time = 0 && palno = 9
value = 7615,5

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0
;ignorehitpause = 
;persistent = 
[State 200, 2]
type = PlaySnd
trigger1 = time = 0
value = 40, 0

[State 0, EnvShake]
type = EnvShake
trigger1 = time=0
time = 4
freq = 60
ampl = 3

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6800
ID = 6900
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;jS: Meteor Press Air
;-----------------------------
[Statedef 1320]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim =1099
velset = 3,-3
sprpriority = 2

[State 0, MAPSET]
type 		= MapSet
trigger1 		= 1
map 		= "ScratchLockout"
value 		= 10
ignorehitpause 	= 1
persistent		= 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 8000, Varadd]
type = VarAdd
trigger1 = time = 0
v = 33    ;fv = 10
value = 1
persistent = 0

[State 7711]
type = Explod
trigger1 = Time%4 = 0
trigger1 = Time >= 4
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1


[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
trigger1 = p2stateno != [120,155]
hitonce = 1
attr = A, ST
damage = 0, 0
hitflag = AF
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = 5,0
guardsound = 6,0
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
fall = 1
snap=1,-1
p1stateno = 1302
p2stateno = 1353

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y = 0
value = 52

;EX jS: Meteor Press Air
;-----------------------------
[Statedef 1325]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= -1000
ctrl = 0
anim =1101
velset = 3.3,-3
sprpriority = 2

[State 0, MAPSET]
type 		= MapSet
trigger1 		= 1
map 		= "ScratchLockout"
value 		= 10
ignorehitpause 	= 1
persistent		= 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 23    ;fv = 10
value = 1

[State 8000, Varadd]
type = VarAdd
trigger1 = time = 0
v = 32    ;fv = 10
value = 1
persistent = 0

;EX Effects
[State 200, 2]
type = PlaySnd
trigger1 = time = 0
value = 6800, 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6950
ID = 6950
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = time=  0
anim = F99
ID = 99
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = 1.4,1.4
sprpriority = 4
ontop = 1
removeongethit = 0
ignorehitpause =0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = time = 20
add = 200,120,0
mul = 256,256,256
sinadd = 100,60,0,4
invertall = 0
color = 256


[State 0, AfterImage]
type = AfterImage
trigger1 =  time = 0 
time = 35
length = 25
palcolor = 256
;palinvertall = 0
palbright = 200,120,0
palcontrast = 200,120,0
palpostbright = 200,120,0
paladd = -200,-120,-00
palmul = .9,.9,9
Trans = Add
framegap = 5
timegap = 1
[State 7711]
type = Explod
trigger1 = Time%1 = 0
trigger1 = Time >= 1
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1



[State 7711]
type = Explod
trigger1 = Time%4 = 0
trigger1 = Time >= 4
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1
[State 630, 2]
type = HitDef 
p2facing = 1 
trigger1 = time = 0
trigger1 = p2stateno != [120,155]
hitonce = 1
attr = A, ST
damage = 0, 0
hitflag = AF
guardflag = 
priority = 3
pausetime = 0,0
sparkno = 0
sparkxy = -5,-35
hitsound   = 5,0
guardsound = 6,0
ground.type = Low
animtype = medium
ground.slidetime = 14
ground.hittime  = 23
ground.velocity = 2,-3
fall.xvelocity = -1
fall.yvelocity = -8
air.velocity = 2,-3
air.hittime = 24
snap=1,-1
fall = 1
p1stateno = 1352
p2stateno = 1353

[State 0, ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= -10
value = 1330

;EX 6S: Crush Run (Start up)
;-----------------------------
[Statedef 1450]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
sprpriority = 2
anim = 1299
poweradd = -1000

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 7711]
type = Explod
trigger1 = Time%4 = 0
trigger1 = Time >= 4
trigger1 = Vel Y < 0
anim = 6953
pos = 0,-30
random = 50,0
ontop = 1
ownpal = 1

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

;EX Effects
[State 200, 2]
type = PlaySnd
trigger1 = time = 0
value = 6800, 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6950
ID = 6950
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 6800
ID = 6800
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.9,0.5
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, PalFXWiz]
type = PalFX
trigger1 = time = 0
time = time = 20
add = 200,120,0
mul = 256,256,256
sinadd = 100,60,0,4
invertall = 0
color = 256


[State 0, AfterImage]
type = AfterImage
trigger1 =  time = 0 
time = 35
length = 25
palcolor = 256
;palinvertall = 0
palbright = 200,120,0
palcontrast = 200,120,0
palpostbright = 200,120,0
paladd = -200,-120,-00
palmul = .9,.9,9
Trans = Add
framegap = 5
timegap = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
x = 7

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 7

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1451

;EX 6S: Crush Run (Active)
;-----------------------------
[Statedef 1451]
type    = S
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =1301
sprpriority = 2
velset = 9,0

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 0, Explod]
type = Explod
trigger1 = time>5
trigger1 = time%5=0
anim =6600
ID = 206
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .6,.6
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		= 2
ignorehitpause 	= 1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		= 0.87	;90% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		= 0.84	;84% DMG For next hit
ignorehitpause 	= 1
persistent = 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = !map(ComboStateCheck)
trigger1 = p2stateno != [120,199]
trigger1 = p2stateno != [40, 43]
trigger1 = time = 0
attr = S, ST
animtype  = Hard
damage = 0, 0
hitflag = MFD
guardflag = 
pausetime = 2,2
sparkno = 1000
sparkxy = P2BodyDist X - -50, -70 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -2,-2
palfx.time = 12
palfx.add = 100, 0,20
getpower = 0
envshake.time = 8
envshake.freq =60
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p1stateno = 1453
p2stateno = 1454

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = map(ComboStateCheck)
trigger1 = time = 0
attr = S, ST
animtype  = Hard
damage = 0, 0
hitflag = MAFD
guardflag = 
pausetime = 2,2
sparkno = 1000
sparkxy = P2BodyDist X - -50, -70 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -2,-2
palfx.time = 12
palfx.add = 100, 0,20
getpower = 0
envshake.time = 8
envshake.freq =60
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p1stateno = 1453
p2stateno = 1454

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 15
value = 1452
ctrl = 1

;EX 6S: Crush Run (whiff)
;-----------------------------
[Statedef 1452]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =1303
sprpriority = 2

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;EX Crush Run Hit
;-----------------------------
[Statedef 1453]
type    = S
movetype= A
physics = N
ctrl = 0
anim =1301
sprpriority = 2
velset = 7,0

[State 0, PlaySnd] ;REFRESHING
type = PlaySnd
trigger1 = time = 0 
value = 7615,2

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
;time = 10

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 24 
value = 1

[State 0, VelMul]
type = VelMul
trigger1 = 1 
x = 1.1
[State 0, Explod]
type = Explod
trigger1 = time>5
trigger1 = time%5=0
anim =6600
ID = 206
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .6,.6
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 4
value = 1454
ID = -1

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 999
id = -1
pos = -53,-20

[State 1000]
type = ChangeState
trigger1 = time >= 6
trigger1 = FrontEdgeDist <= 20
trigger2 = time >= 180
value = 1455

;EX Crush Run (hit wall A)
;-----------------------------
[Statedef 1455]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =1302
velset = 0,0
sprpriority = 2

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
;time = 10

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = -20
[State 0, TargetBind]
type = TargetBind
trigger1 = time = 0
time = 1
id = -1
pos = 20,0
;ignorehitpause = 
;persistent = 


[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
kill = 0
attr = S, ST
animtype  = Hard
damage = 55*MAP(P4), 0
hitflag = MAF
guardflag = 
pausetime = 10,10
sparkno = 3
sparkxy = -35,-34
hitsound   = S5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -4.5,-2
getpower = 0
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 25
envshake.freq = 80
envshake.ampl = 5
envshake.phase = 1
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p2stateno = 1457


[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1456
ctrl = 1

;EX Crush Run (second dash to wall)
;-----------------------------
[Statedef 1456]
type    = S
movetype= A
physics = N
ctrl = 0
anim =1301
sprpriority = 2
velset = -7,0

[State 0, Turn]
type = Turn
trigger1 = time = 0
;ignorehitpause = 
;persistent = 

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
;time = 10

[State 0, Explod]
type = Explod
trigger1 = time>5
trigger1 = time%5=0
anim =6600
ID = 206
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .6,.6
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
;ignorehitpause = 
;persistent = 



[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 40
y = 0
;ignorehitpause = 
;persistent = 


[State 0, VelMul]
type = VelMul
trigger1 = 1 
x = 1.09

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 1
value = 1454
ID = -1

[State 0, TargetFacing]
type = TargetFacing
trigger1 = time = 0
value = -1
ID = -1
;ignorehitpause = 
;persistent = 


[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 999
id = -1
pos = -53,-20

[State 1000]
type = ChangeState
trigger1 = time >= 6
trigger1 = FrontEdgeDist <= 20
trigger2 = time >= 180
value = 1458


;EX Crush Run (hit wall B)
;-----------------------------
[Statedef 1458]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =1302
sprpriority = 2
velset = 0,0

[State 0, Zoom]
type = zoom
triggerall	= backedgebodydist<=100
trigger1 	= movehit
trigger1 	= enemy,HitShakeOver = 0
scale 	= 1.2
lag 	= 0
stagebound 	= 1
camerabound 	= 0
pos 		= pos x + 10,0
ignorehitpause	= 1
[State 0, Zoom]
type = zoom
triggerall	= backedgebodydist>100
trigger1 	= movehit
trigger1 	= enemy,HitShakeOver = 0
scale 	= 1.5
lag 	= 0.5
stagebound 	= 1
camerabound 	= 0
pos 		= pos x,0
ignorehitpause	=1

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = -20

[State Meter Burn State, VarSet]
type = VarSet
trigger1 = movehit = 1
v = 2
value = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 0
time = 1
id = -1
pos = 20,0
;ignorehitpause = 
;persistent = 

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0 && var(47) = 0
attr = S, ST
animtype  = Hard
damage = 80*MAP(P4), 0
hitflag = MAF
guardflag = 
pausetime = 15,15
sparkno = 3
sparkxy = -35,-34
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
ground.slidetime = 999
ground.hittime  = 999
air.hittime = 999
ground.velocity = -3,-4
air.velocity = -4.5,-7
getpower = 0
fall.yvelocity = 0
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 30
envshake.freq = 120
envshake.ampl = 5
envshake.phase = 1
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0 && var(47) != 0
attr = S, SA
animtype  = Hard
damage = 80*MAP(P4), 0
hitflag = MAF
guardflag = 
pausetime = 5,5
sparkno = 3
sparkxy = -35,-34
hitsound   = S5,1
guardsound = 6,2
ground.type = Low
ground.slidetime = 12
ground.hittime  = 99
air.hittime = 999
ground.velocity = -3,3
air.velocity = -4.5,3
getpower = 0
fall.yvelocity = 0
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 47    ;fv = 10
value = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 25
value = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Crush Run Hurt
;-----------------------------
[Statedef 1454]
type    = A
movetype= H
physics = N
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 400
value = 5210
ctrl = 0

;6S: Crush Run (Start up)
;-----------------------------
[Statedef 1400]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =1300
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 1
[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 6700
ID = 6700
pos = 10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
trigger2 = animelem = 5
x = 7

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 7

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "b" && time > 15	
value = 1408

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1401
;-----------------------------
;6S: Crush Run (Full charge run)
[Statedef 1401]
type    = S
movetype= A
physics = N
juggle  = 2
poweradd= 0
ctrl = 0
anim =1301
sprpriority = 2
velset = 10,0

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "b" 
value = 1408

[State 0, Explod]
type = Explod
trigger1 = time>5
trigger1 = time%5=0
anim =6600
ID = 206
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .6,.6
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
trigger1 = p2movetype = H
attr = S, ST
animtype  = Hard
damage = 0, 0
hitflag = AFD
guardflag = 
pausetime = 2,2
guard.pausetime = 12,12
sparkno = 1000
sparkxy = 0,-55
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -4.5,-2
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 13
guard.ctrltime = 13
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p1stateno = 1403
p2stateno = 1404

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
trigger1 = p2movetype != H
attr = S, ST
animtype  = Hard
damage = 0, 0
hitflag = M
guardflag = 
pausetime = 2,2
guard.pausetime = 12,12
sparkno = 1000
sparkxy = 0,-55
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 24
ground.velocity = -3,-4
air.velocity = -4.5,-2
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 8
envshake.freq =60
;envshake.ampl = 
;envshake.phase =
fall.envshake.time = 0
guard.hittime = 13
guard.ctrltime = 13
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
p1stateno = 1403
p2stateno = 1404

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 15
value = 1402
ctrl = 1

;6S: Crush Run Whiff
;-----------------------------
[Statedef 1402]
type    = S
movetype= A
physics = S
juggle  = 2
poweradd=0
ctrl = 0
anim =1303
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = time>5
trigger1 = time%5=0
anim =6600
ID = 206
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .6,.6
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;Crush Run Hit
;-----------------------------
[Statedef 1403]
type    = S
movetype= A
physics = N
poweradd= (100)*(cond(var(var(2)) = 1, 1, 1)) 
ctrl = 0
anim =1301
sprpriority = 2
velset = 7,0

[State 0, PlaySnd] ;futile
type = PlaySnd
trigger1 = time = 0 
value =7615,1

;============================
[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		=  3
ignorehitpause 	=  1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		=  0.89	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		=  0.93	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0
;============================

[State 4000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
;time = 10

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "b" && movehit = -1
value = 1408

[State 0, Explod]
type = Explod
trigger1 = time>5
trigger1 = time%5=0
anim =6600
ID = 206
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = .6,.6
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, VelMul]
type = VelMul
trigger1 = 1 
x = 1.06

[State 0, TargetState]
type = TargetState
triggerall = NumTarget;()
trigger1 = animelem = 4
value = 5035
ID = -1

[State 0, TargetBind]
type = TargetBind
trigger1 = animelem = 1
time = 999
id = -1
pos = -53,-20

[State 1000]
type = ChangeState
trigger1 = time >= 6
trigger1 = FrontEdgeDist <= 20
trigger2 = time >= 180
value = 1405

;Crush Run (hit wall)
;-----------------------------
[Statedef 1405]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim =1302
velset = 0,0
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = -20

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 0
time = 1
id = -1
pos = 20,0


[State 0, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 5


[State 0, TargetBind]
type = TargetBind
trigger1 = time = 0
time = 1
id = -1
pos = 20,0

[State -3, Win Voices] ;Win
type = PlaySnd
trigger1 = time = 0
value = 6969, (0+(Random%4))
channel=1


;============================
[State -2, Starter Level]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "StarterLevel"
value 		=  3
ignorehitpause 	=  1

[State -2, P1 Value Set]
type 		= MapSet
trigger1 		= movehit && !map(ComboStateCheck)
map 		= "P1"
value 		=  0.89	;100% Starting DMG
ignorehitpause 	= 1
[State -2, P2 Value Set]
type 		= MapSet
trigger1 		= movehit && map(ComboStateCheck)
map 		= "P2"
value 		=  0.93	;80% DMG For next hit
ignorehitpause 	= 1
persistent 		= 0
[State -2, P2 Accumulation - Scale]
type 		= MapSet
trigger1 		= movehit
map 		= "Accumulation"
value 		= Map(Accumulation) * map(P2)
ignorehitpause 	= 1
persistent 		= 0
;============================

[State 210, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0 
attr = S, ST
animtype  = Hard
damage = 150*MAP(P4), 0
hitflag = MAF
guardflag = 
pausetime = 15,15
sparkno = 3
sparkxy = -35,-34
hitsound   = 5,4
guardsound = 6,2
ground.type = TRIP
air.type = TRIP
ground.slidetime = 12
ground.hittime  = 999
air.hittime = 999
ground.velocity = -3,-4
air.velocity = -4.5,-4
fall = 1
palfx.time = 12
palfx.add = 100, 0,20
envshake.time = 20
envshake.freq = 90
envshake.ampl = 5
envshake.phase = 1
fall.envshake.time = 0
guard.hittime = 25
guard.pausetime= 3,15
guard.velocity = -7
guard.dist = 20
guard.slidetime = 30;
fall.yvelocity = 0
getpower = (100)*(cond(var(var(2)) = 1, 1, 1)) 

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-----------------------------
;Crush Run Break
[Statedef 1408]
type    = S
movetype= I
physics = S
juggle  = 2
anim = 1308
ctrl = 0
sprpriority = 2

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 1
time = 15
freq = 60
ampl = -2

[State 200, 2]
type = PlaySnd
trigger1 = animelem = 4
value = 0, 1

[State 630, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 700, 26

[State 630, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 40, 0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
trigger2 = animelem = 5
x = 7

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 7

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl =1
;---------------------------------------------------------------------------
;j2S: Body Spurashu 
[Statedef 1600]
type    = A
movetype= A
physics = N
juggle = 0 ;  = 3
poweradd= 0
ctrl = 0
sprpriority = 2
velset = 1, -7

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
fv = 6  ;fv = 10
value = 1600 ;State of this attack
;ignorehitpause = 
;persistent = 

;Armor
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0 && anim!=1600 ;Animation of this state
value = 1600
elem = 1

[State 0, HitOverride]
type = HitOverride
triggerall = var(30)>0
triggerall = movetype != H
trigger1=  1
attr = SCA ,NA,NP,SP,HP
slot = 0
stateno = 666999 
time = 1
forceair = 0


[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .6

[State 630, 2]
type = HitDef 
p2facing = 1
trigger1 = time = 0
hitonce = 1
attr = A, SA
damage = ceil(cond(fvar(11) *100 < 65, 65, fvar(11) * 100)), 15
hitflag = MAF
guardflag = HA
priority = 3
pausetime = 16,16
sparkno = 1000
sparkxy = P2BodyDist X - -10, -130 ;P2BodyDist X, so the hitspark is relative to P1
hitsound   = 5,0
guardsound = 6,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 16
ground.velocity = -2;,10
air.velocity = -2,3
air.hittime = 24;
;fall.yvelocity = 0
guard.slidetime = 14
guard.ctrltime = 18
air.fall = 1
getpower = 45*var(2)

[State 0, ChangeState]
type = ChangeState
trigger1 =pos y>= 0
value = 1601
ctrl = 0
;Crush Run Hurt
;-----------------------------
[Statedef 1404]
type    = A
movetype= H
physics = N
juggle  = 2
ctrl = 0
sprpriority = 2

[State 0, ChangeState]
type = ChangeState
trigger1 = vel x = 0
trigger1 = time = 15
value = 5210
ctrl = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0


[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 400
value = 5210
ctrl = 0