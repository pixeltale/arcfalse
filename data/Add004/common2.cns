; common state file for M.U.G.E.N 1.0 (MOD: addoo4 Basic::BS)

; system variables usage
; ----------------------
; var name    type   purpose
; --------    ----   -------
; sysvar(0)   temp   set by state 5081 (hitl_slide) to 1 to prevent
;                    showing ground hit frame in state 5110 (hit_liedown).
;                    used by guarding states.
;                    used in state 195900 for setting partner-assist-stateno.
; sysvar(1)   temp   used by state 40 (jump start) and 45 (air jump start)
;                    to keep track of which way to jump.
;                    used by state 5100 and 5110 to remember downward
;                    velocity of player just before hitting the ground.
;                    used in state 5080 for storing the anim # to display.
; sysvar(4)   temp   team mode

; ---------
; (options)
; ---------
; sysvar(2)   temp   hitshake anim
;                    used in state 120-155 (guard) for ai-flag
; sysvar(3)   temp
; sysfvar(0)  int    lifebar helper id
;                    used by state -2
; sysfvar(1)  int    jump type
; sysfvar(4)  int    tag mode

; the following states have special handling within mugen,and should be
; overridden with caution:
; jump start (40): airjumping bookkeeping at time=0
; all guard states (120-155): guard handling throughout state
; hit_trip,shaking (5070): defense increases at time=0
; downed get-hit (hit ground from fall) (5100):
;   defense increases at time=0,player becomes invincible if within 10
;   ticks of getting up
; hit_liedown (5110): player changes to get-up state (5120) when ready
; hit_getup (5120): player's defence is restored to normal at time=0
; hitfall_recover (5200): player's defence is restored at time=0
; hitfall_airrecover (5210): player's defence is restored at time=0

;@@Debug@@;

;;---
;; Find these Marks to Config.
;; ‚±‚Ì•W‹L‚ğŒŸõ‚µ‚Äİ’è‚ğ•Ï‚¦‚Ä‚­‚¾‚³‚¢B

;;>>@Config.
;;>>@Config.System_Switch>>
;;>>@Config.Stage_Type>>
;;>>@Config.Power_Mode>>
;;>>@Config.LifeBar>>
;;>>@Config.LifeBar_Draw>>
;;>>@Config.GuardBar>>
;;>>@Config.PowerBar>>
;;>>@Config.PowerBar_Draw>>
;;>>@Config.Name_Info>>
;;>>@Config.Face_Info>>
;;>>@Config.Face>>
;;>>@Config.Combo.Pos>>
;;>>@Config.Counter_Hit>>
;;>>@Config.DamageToPower>>
;;>>@Config.Power_Start>>
;;>>@Config.Icon_FirstAttack_Pos>>
;;>>@Config.Icon_CPU_Pos>>
;;>>@Config.Score>>
;;>>@Config.Message_Pos>>
;;>>@Config.KO>>
;;>>@Config.Ground_Dust_Effect>>
;;>>@Config.AI>>
;;>>@Config.AI_Ref>>
;;>>@Config.Display_Input>>
;;>>@Config.Tag_Command>>
;;>>@Config.Tag_FirstPlayer_Select>>
;;>>@Config.Camera>>

;;>>@Config.Tag_Assist_StateNo>>
;; tag-mode.partner.statedef [190190-190199]
;; partner-assist/striker.stateno registration [195900]
;;>>@Config.Round_Fight>>
;; round-call.statedef [18000]
;;>>@Config.Ranking>>
;; rank.panel.statedef [99980]


; Common state file for M.U.G.E.N 1.0
;
; System variables usage
; ----------------------
; Var name    Type   Purpose
; --------    ----   -------
; sysvar(0)   Temp   Set by state 5081 (HITL_SLIDE) to 1 to prevent
;                    showing ground hit frame in state 5110 (HIT_LIEDOWN).
;                    Used by guarding states.
; sysvar(1)   Temp   Used by state 40 (Jump Start) amd 45 (Air Jump Start)
;                    to keep track of which way to jump.
;                    Used by state 5100 and 5110 to remember downward
;                    velocity of player just before hitting the ground.
;                    Used in state 5080 for storing the anim # to display.

; The following states have special handling within MUGEN, and should be
; overridden with caution:
; Jump Start (40): airjumping bookkeeping at time = 0
; All guard states (120-155): guard handling throughout state
; Hit_trip, shaking (5070): defense increases at time = 0
; Downed get-hit (hit ground from fall) (5100):
;   defense increases at time = 0, player becomes invincible if within 10
;   ticks of getting up
; Hit_liedown (5110): player changes to get-up state (5120) when ready
; Hit_getup (5120): player's defence is restored to normal at time = 0
; Hitfall_recover (5200): player's defence is restored at time = 0
; Hitfall_airrecover (5210): player's defence is restored at time = 0

;---------------------------------------------------------------------------
; Stand
; Common state file for M.U.G.E.N 1.0
;
; System variables usage
; ----------------------
; Var name    Type   Purpose
; --------    ----   -------
; sysvar(0)   Temp   Set by state 5081 (HITL_SLIDE) to 1 to prevent
;                    showing ground hit frame in state 5110 (HIT_LIEDOWN).
;                    Used by guarding states.
; sysvar(1)   Temp   Used by state 40 (Jump Start) amd 45 (Air Jump Start)
;                    to keep track of which way to jump.
;                    Used by state 5100 and 5110 to remember downward
;                    velocity of player just before hitting the ground.
;                    Used in state 5080 for storing the anim # to display.

; The following states have special handling within MUGEN, and should be
; overridden with caution:
; Jump Start (40): airjumping bookkeeping at time = 0
; All guard states (120-155): guard handling throughout state
; Hit_trip, shaking (5070): defense increases at time = 0
; Downed get-hit (hit ground from fall) (5100):
;   defense increases at time = 0, player becomes invincible if within 10
;   ticks of getting up
; Hit_liedown (5110): player changes to get-up state (5120) when ready
; Hit_getup (5120): player's defence is restored to normal at time = 0
; Hitfall_recover (5200): player's defence is restored at time = 0
; Hitfall_airrecover (5210): player's defence is restored at time = 0
 
;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0
[state 0] ;[.00] ; remove special helpers
	type=selfstate
	trigger1=ishelper(99997) && (var(57)=11111) && (var(58)=22222) && (var(59)=33333)
	trigger2=ishelper && (var(15)=10311) && (var(16)=10212) && (var(17)=10113) && (var(18)=30636)
	trigger3=ishelper(90900) || ishelper(159005)
	value=159990
	ignorehitpause=1

[state 0] ;[.01b] ; partner_standby ; ƒp[ƒgƒi[‘Ò‹@
	type=selfstate
	trigger1=!time && numpartner && !ishelper && sysfvar(4)>0 && alive && roundstate=2 && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(22)=4
	value=190190
[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050
ctrl = 0

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2] ;Stop moving if low velocity
type = VelSet
trigger1 = abs(vel x) < Const(movement.crouch.friction.threshold)
x = 0

[State 10, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0
[state 0] ;[.01b] ; partner_standby ; ƒp[ƒgƒi[‘Ò‹@
	type=selfstate
	trigger1=!time && numpartner && !ishelper && sysfvar(4)>0 && alive && roundstate=2 && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(22)=4
	value=190190
[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

[State 11, 2] ;Stop moving if low velocity
type = VelSet
trigger1 = abs(vel x) < Const(movement.crouch.friction.threshold)
x = 0

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0
;---
[state 0] ;[.01b] ; partner_standby ; ƒp[ƒgƒi[‘Ò‹@
	type=selfstate
	trigger1=!time && numpartner && !ishelper && sysfvar(4)>0 && alive && roundstate=2 && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(22)=4
	value=190190
[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1
facep2 = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; AirJump Start
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 41

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > Const720p(-8)
trigger1 = SelfAnimExist(anim + 3)
trigger1 = anim >= 41 && anim <= 43
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; Jump Down (empty state for compatibility)
[Statedef 51]
type    = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 52, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Run forward
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1
[state 0] ;[.01b] ; partner_standby ; ƒp[ƒgƒi[‘Ò‹@
	type=selfstate
	trigger1=!time && numpartner && !ishelper && sysfvar(4)>0 && alive && roundstate=2 && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(22)=4
	value=190190
[State 100, 1]
type = VelSet
trigger1 = 1
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 0

;---------------------------------------------------------------------------
; Hop backwards
[Statedef 105]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 2]
type = CtrlSet
trigger1 = Time = 2
value = 1

[State 105, 3]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; Hop backwards (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 47

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = 0, 0
spacing = 1

[State 106, 4]
type = VelSet
trigger1 = abs(vel x) < Const(movement.stand.friction.threshold)
x = 0

[State 106, 5]
type = ChangeState
trigger1 = Time = 7
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; Stand guard (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = command = "holddown"
value = 131

[State 130, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; Crouch guard (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = command != "holddown"
value = 130

[State 131, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; Air guard (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
trigger2 = !inguarddist
value = 140

;---------------------------------------------------------------------------
; Guard (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; Stand guard hit (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 150, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; Stand guard hit (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; Crouch guard hit (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*(command = "holddown")

[State 152, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; Crouch guard hit (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
trigger1 = statetype = S && command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
trigger1 = statetype = C && command != "holddown"
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; Air guard hit (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; Air guard hit (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; Lose (time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Draw game (time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 1] ; If no anim, use go to lose state.
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 175

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Pre-intro
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
; Intro (override this state to give character an intro)
[Statedef 191]
type = S
ctrl = 0

[State 191, 1]
type = ChangeState
trigger1 = Time = 0
value = 0

;---------------------------------------------------------------------------
; Stand get-hit (shaking)
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;Stand get-hit (knocked back)

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

;---------------------------------------------------------------------------
; Stand get-hit (knocked back)
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Crouch get-hit (shaking)
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;Crouch get-hit (knocked back)

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; Crouch get-hit (knocked back)
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; Air get-hit (shaking)
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; Air get-hit (knocked away)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = ChangeAnim
trigger1 = Anim != [5000, 5199]
trigger1 = SelfAnimExist(5030)
value = 5030

[State 5030, 2]
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5030, 3]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 4]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= Const(movement.air.gethit.groundlevel)
value = 5040 ;HITA_RECOV

[State 5030, 5]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= Const(movement.air.gethit.groundlevel)
value = 5050 ;HITA_FALL

[State 5030, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;Air get-hit (transition)

;---------------------------------------------------------------------------
; Air get-hit (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= Const(movement.air.gethit.groundlevel)
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;Air get-hit (recovering in air, not falling)

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= Const(movement.air.gethit.groundlevel)
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;Air get-hit (falling)

;---------------------------------------------------------------------------
; Air get-hit (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050
ctrl = 0

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;Jump land

;---------------------------------------------------------------------------
; Air get-hit (falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, Const720p(4), Const720p(-8))
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= Const(movement.air.gethit.groundrecover.ground.threshold)
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;Air get-hit (fall recovery on ground)

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > Const(movement.air.gethit.airrecover.threshold)
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;Air get-hit (fall recovery in air)

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, Const(movement.air.gethit.groundlevel))
value = 5100 ;Downed get-hit (hit ground from fall)

;---------------------------------------------------------------------------
; Tripped get-hit (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070, 1]
type = ChangeAnim
trigger1 = 1
value = 5070

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; Tripped get-hit (knocked away)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= Const(movement.air.gethit.trip.groundlevel)
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; Downed get-hit (shaking)
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;Downed get-hit (knocked back)

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;Air get-hit (knocked away)

;---------------------------------------------------------------------------
; Downed get-hit (knocked back)
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;Downed get-hit (lying down)

;---------------------------------------------------------------------------
; Downed get-hit (hit ground from fall)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 2004.04.14 behavior]
type = null;VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x < -1
x = -1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;Downed get-hit (lying down)

[State 5100, 8]
type = Explod
trigger1 = Time = 1
anim = F(60 + (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56)))
pos = 0, 0
sprpriority = ifelse (sysvar(1) <= Const720p(56), -10, 10)

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56))

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101 ;Downed get-hit (bounce off ground)

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; Downed get-hit (bounce off ground)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = Const(movement.down.bounce.offset.y)

[State 5101, 5]
type = PosAdd
trigger1 = Time = 0
x = Const(movement.down.bounce.offset.x)

[State 5101, 6] ;Acceleration
type = VelAdd
trigger1 = time > 0
y = Const(movement.down.bounce.yaccel)

[State 5101, 7] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= Const(movement.down.bounce.groundlevel)
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; Downed get-hit (lying down)
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56))

[State 5110, 7]
type = Explod
trigger1 = Time = 0
trigger1 = !SysVar(0)
anim = F(60 + (sysvar(1) > Const720p(20)) + (sysvar(1) > Const720p(56)))
pos = 0, 0
sprpriority = ifelse (sysvar(1) <= Const720p(56), -10, 10)

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14] ;Friction
type = VelSet
trigger1 = abs(Vel x) < Const(movement.down.friction.threshold)
persistent = 0
x = 0

[State 5110, 15]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 16]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; Downed get-hit (getting up)
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Downed get-hit (lying defeated)
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3
ctrl = 0

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = abs(Vel x) < Const(movement.down.friction.threshold)
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Air get-hit (fall recovery on ground; still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= Const(movement.air.gethit.groundrecover.groundlevel)
value = 5201

;---------------------------------------------------------------------------
; Air get-hit (fall recovery on ground)
[Statedef 5201]
type    = A
movetype= H
physics = A
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < Const720p(-20)

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
x = Const(velocity.air.gethit.groundrecover.x)
y = Const(velocity.air.gethit.groundrecover.y)

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = Explod
trigger1 = Time = 0
anim = F60
pos = 0, -floor(vel y)
sprpriority = -10

;---------------------------------------------------------------------------
; Air get-hit (fall recovery in air)
[Statedef 5210]
type    = A
movetype= I
physics = N
anim = 5210
ctrl = 0

[State 5210, 1] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128

[State 5210, 1]
type = PosFreeze
trigger1 = Time < 4

[State 5210, 2] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < Const720p(-80)

[State 5210, 1.0 behavior 1]
type = VelMul
trigger1 = Time = 4
x = Const(velocity.air.gethit.airrecover.mul.x)
y = Const(velocity.air.gethit.airrecover.mul.y)

[State 5210, 1.0 behavior 2]
type = VelAdd
trigger1 = Time = 4
x = Const(velocity.air.gethit.airrecover.add.x)
y = Const(velocity.air.gethit.airrecover.add.y)

[State 5210, 2002.04.14 behavior 1]
type = null;VelMul
trigger1 = Time = 4
x = .8
y = .8

[State 5210, 2002.04.14 behavior 2]
type = null;VelAdd
trigger1 = Time = 4
x = 0 
y = -4.5

[State 5210, 2002.04.14 behavior 3]
type = null;VelMul
trigger1 = Time = 4
trigger1 = Vel Y > 0
y = .5

[State 5210, 2002.04.14 behavior 4]
type = null;VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -3
y = -2

[State 5210, 2002.04.14 behavior 5]
type = null;VelAdd
trigger1 = Time = 4
trigger1 = Vel Y > -2
y = -1

[State 5210, 2] ;Go up
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdup"
y = Const(velocity.air.gethit.airrecover.up)

[State 5210, 2] ;Go down
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holddown"
y = Const(velocity.air.gethit.airrecover.down)

[State 5210, 2] ;Go fwd
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdfwd"
x = Const(velocity.air.gethit.airrecover.fwd)

[State 5210, 2] ;Go back
type = VelAdd
trigger1 = Time = 4
trigger1 = Command = "holdback"
x = Const(velocity.air.gethit.airrecover.back)

[State 5210, 3]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 15

[State 5210, 4]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 5210, 5]
type = VelAdd
trigger1 = Time >= 4
y = Const(movement.air.gethit.airrecover.yaccel)

[State 5210, 5] ;Land on ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;Jump land
ctrl = 1

;---------------------------------------------------------------------------
; Continue screen animation
[Statedef 5500]
type = S
ctrl = 0
anim = 5300
velset = 0,0

[State 5500, 1] ;Use continue animation if available
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5500)
value = 5500


;------------------------;------------------------
[statedef 5900]
type=s
;;---
;;--- int variables
;[state 0] ;[.00]
;	type=varrangeset
;	trigger1=roundno=1
;	last=51
;	value=0
;[state 0] ;[.01]
;	type=varrangeset
;	trigger1=roundno=1
;	fvalue=0
;;---
;;--- <<IKEMEN‚É‚Í–³—p>>
;;--- change palette (v1)
[State 5900, 3] 
;Change palette
type = RemapPal
trigger1 = 1
source = 1,1
dest = 1,palno

;;---
;;--- intro-pos-reset
;;sys::-2::st5900-f
[state 0]
	type=turn
	trigger1=!ishelper && numpartner>1 && facing=ifelse(teamside=1,-1,1)
;sys::-2::st5900-pp3
[state 0]
	type=posset
	trigger1=!ishelper && numpartner>1 && playeridexist(id-2)
	trigger1=playerid(id-2),ishelper=0 && playerid(id-2),teamside=teamside
	x=const240p(120)*ifelse(teamside=1,-1,1)
;sys::-2::st5900-pp4
[state 0]
	type=posset
	trigger1=!ishelper && numpartner>2 && playeridexist(id-3)
	trigger1=playerid(id-3),ishelper=0 && playerid(id-3),teamside=teamside
	x=const240p(145)*ifelse(teamside=1,-1,1)
;---
; goto init2
[state 0] ;[.03]
	type=changestate
	trigger1=1
	value=195900
;==========================
; * Additions
;==========================
;==========================
; Init2 / Partner Assist-Stateno Registration ; ƒp[ƒgƒi[x‰‡ƒXƒe[ƒg“o˜^
; * override this statedef to regist partner-assist-stateno
;==========================
[statedef 195900]
type=s

;;>>@Config.Tag_Assist_StateNo>>
[state 0] ;[.00]
	type=varset
	trigger1=1
	sysvar(0)=1000 ;;<-def * set to 1000 (temp)

; goto preintro
[state 0] ;[.01]
	type=changestate
	trigger1=1
	value=190000

;------------------------
; default assist-action ; (‹¦—Í‹Z‰Šúİ’è)
[statedef 1000]
type=s
physics=s
movetype=i
anim=ifelse(selfanimexist(195),195,0)
sprpriority=-2
velset=0,0
ctrl=0
[state 0] ;[.00]
	type=posset
	trigger1=!time
	y=0
[state 0] ;[.01]
	type=poweradd
	trigger1=(anim=195) && (animtime=0)
	value=1000
[state 0] ;[.02]
	type=changestate
	trigger1=(anim!=195) && (time>16)
	trigger2=(anim=195) && (animtime=0)
	value=0
	ctrl=1

;==========================
; preintro ; —\”õƒCƒ“ƒgƒ
;==========================
[statedef 190000]
ctrl=0
;---
; sys::goto_cotinue_screen
[state 0]
	type=changestate
	triggerall=!ishelper
	trigger1=numpartner
	trigger1=partner,stateno=5500 ;;Continue
	trigger2=numenemy
	trigger2=enemy,stateno=5500 ;;Continue
	value=0
;---
; intro for round 1 / turns mode
[state 0] ;[.00]
	type=changestate
	trigger1=roundno=1
	trigger2=roundno>1 && numenemy
	trigger2=(teammode=turns)||(enemy,teammode=turns)
	value=190

; all other rounds
[state 0] ;[.01]
	type=changestate
	trigger1=1
	value=0


;==========================
;==========================
; Partner Action in TagMode ; (ƒ^ƒbƒOƒ‚[ƒhƒp[ƒgƒi[ˆ—)
; [190190-190196]
;==========================
; out screen ; (‰æ–ÊŠO‚Ö)
[statedef 190190]
type=u
movetype=u
physics=n
anim=40
sprpriority=-2
velset=0,0
ctrl=0
 
[state 0]
	type = assertspecial
	trigger1 = 1
	flag = NoTurnTarget
 
;---
;sys::partner_life-recover1
[state 0]
	type=Mapset
	trigger1=!time && life<1
	value=1
;---
;sys::partner_life-recover1
[state 0]
	type=lifeadd
	trigger1=!time && life<1
	value=1
;---
[state 0]
	type=posset
	trigger1=!time
	y=0
[state 0]
	type=afterimagetime
	trigger1=!time
	time=0
;---
;sys::partner_jump-init1
[state 0]
	type=nothitby
	trigger1=1
	value=sca
[state 0]
	type=screenbound
	trigger1=sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(28)<200
	value=0
	movecamera=0,0
[state 0]
	type=playerpush
	trigger1=1
	value=0
[state 0]
	type=assertspecial
	trigger1=(pos y!=0)
	flag=noshadow
;---
;sys::partner_run-anim2
[state 0]
	type=changeanim
	triggerall= const(MVCIActiveSwitch) = 1 
      trigger1=(anim=40) && (animtime=0) && selfanimexist(100)
	value=100
	persistent=0
[state 0]
	type=turn
	trigger1=(anim=100)
	persistent=0
;sys::partner_run-vel2
[state 0]
	type=velset
	trigger1=(anim=100)
	x=9.6*const(movement.yaccel)
	y=0
;---
;---
; take off ; 離陸
;sys::partner_jump-anim1
[state 0]
	type=changeanim
	triggerall= const(MVCIActiveSwitch) = 0 
     trigger1=(anim=40) && (animtime=0)
	value=41
[state 0]
	type=changeanim
	trigger1=(anim=[41,43]) && (animtime=0) && selfanimexist(anim+3)
	value=anim+3
[State 4511, 4]
type = VelSet
trigger1=(anim=[41,46])
x = -12
y = -11

[State 0, VelAdd]
type = Veladd
trigger1=(anim=[41,46])
y = .628;sys::partner_jump-vel1
;[state 0]
;	type=velset
;	trigger1=(anim=[41,46])
;	x=-20*const(movement.yaccel)
;	y= -7*const(movement.yaccel)
;---
;sys::player_type_change1
[state 0]
	type = varset
	trigger1 = 1
	sysfvar(4) = 1  ;; (0:main / 1:assist)
;---
;sys::face_d_clear
[state 0]
	type=removeexplod
	trigger1=!time
	id=490600
;---
;sys::player_pos_y_outscreen1
[state 0]
	type=posset
	trigger1=backedgedist<-const240p(160) || frontedgedist<-const240p(160)
	y=0
[state 0]
	type=velset
	trigger1=backedgedist<-const240p(160) || frontedgedist<-const240p(160)
	x=0
	y=0
;---
;sys::partner_goto-standby1
[state 0]
	type=changestate
	triggerall=time>59 ;;<<- (60F) interval ; 間隔
	triggerall=backedgedist<-const240p(100) || frontedgedist<-const240p(100) || pos y>100 || time>218
	trigger1=sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(28)>200
	trigger2=roundstate>2
	value=190191
	ctrl=0


;------------------------
; Stand-By1 (Change OK) ; ‘Ò‹@’†1(Œğ‘Ö‰Â)
;------------------------
[statedef 190191]
type=a
movetype=i
physics=n
anim=909601 ;; empty
velset=0,0
ctrl=0
;---

[State 0]
type = text
trigger1 = time<=20
triggerall = teamside = 1
removetime = 1
layerno = 2
text = "Switch OK."
font = F3
align = 0
pos = 90,44
ignorehitpause = 1
[State 0]
type = text
trigger1 = time<=20
triggerall = teamside = 2
removetime = 1
layerno = 2
text = "Switch OK."
font = F3
align = 0
pos = 230,44
ignorehitpause = 1

[State 0]
type = text
trigger1 = time>20
trigger1 = time<=40
triggerall = teamside = 1
removetime = 1
layerno = 2
text = "Switch OK.."
font = F3
align = 0
pos = 90,44
ignorehitpause = 1
[State 0]
type = text
trigger1 = time>20
trigger1 = time<=40
triggerall = teamside = 2
removetime = 1
layerno = 2
text = "Switch OK.."
font = F3
align = 0
pos = 230,44
ignorehitpause = 1

[State 0]
type = text
trigger1 = time>40
trigger1 = time<60
triggerall = teamside = 1
removetime = 1
layerno = 2
text = "Switch OK..."
font = F3
align = 0
pos = 90,44
ignorehitpause = 1
[State 0]
type = text
trigger1 = time>40
trigger1 = time<60
triggerall = teamside = 2
removetime = 1
layerno = 2
text = "Switch OK..."
font = F3
align = 0
pos = 230,44
ignorehitpause = 1


[state 0]
	type=screenbound
	trigger1=1
	value=0
	movecamera=0,0
;---
;sys::partner-standby_id_input2
[state 0]
	type=varset
	trigger1=!time
	sysvar(0)=0
[state 0]
	type=varset
	trigger1=!ishelper && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(15)!=id
	sysvar(0)=playerid(floor(sysfvar(0))),var(15)
;---
;sys::partner-standby-set3
;[state 0]
;	type=turn
;	trigger1=sysvar(0)>0 && playeridexist(sysvar(0))
;	trigger1=facing!=playerid(sysvar(0)),facing
[state 0]
	type=posset
	trigger1=sysvar(0)>0 && playeridexist(sysvar(0))
	x=playerid(sysvar(0)),pos x -8*playerid(sysvar(0)),facing
	y=playerid(sysvar(0)),pos y-playerid(sysvar(0)),screenpos y
;---
;sys::partner-standby-out1 ; o‚é
[state 0]
	type=varset
	trigger1=!ishelper && roundstate=2 && numpartner && sysvar(0)>0 && playeridexist(sysvar(0)) && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=(playerid(sysvar(0)),alive=0 && playerid(sysvar(0)),stateno=5150) || (playerid(sysvar(0)),sysfvar(4)>0)
	trigger1=id=playerid(floor(sysfvar(0))),var(49)
	sysfvar(4)=0 ;; (0:main / 1:assist)
 ;sys::partner-standby-out1 ; o‚é
[state 0]
	type=TagIn
	trigger1=!ishelper && roundstate=2 && numpartner && sysvar(0)>0 && playeridexist(sysvar(0)) && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=(playerid(sysvar(0)),alive=0 && playerid(sysvar(0)),stateno=5150) || (playerid(sysvar(0)),sysfvar(4)>0)
	trigger1=id=playerid(floor(sysfvar(0))),var(49)
	leader=PlayerNo ;; to main-player;---
;sys::partner-standby-out2
[state 0]
	type=changestate
	;;---// normal
	trigger1=time>0 && sysfvar(4)<1
	;;---// round-over
	trigger2=(roundstate>2)
	value=190193
	ctrl=0

;---
;sys::partner_goto-standby2
[state 0]
	type=changestate
	 trigger1= time>=58 ;;<<- (158F) interval / charge-time ; ŠÔŠu/’~ÏŠúŠÔ
	value=190192

;------------------------
; Stand-By2 (Change / Partner-Assist-OK, Life-Recover) ; ‘Ò‹@’†2(Œğ‘Ö/x‰‡‰Â,‘Ì—Í‰ñ•œ)
;------------------------
[statedef 190192]
type=u
movetype=u
physics=n
velset=0,0
ctrl=0
;---
[state 0]
	type=screenbound
	trigger1=1
	value=0
	movecamera=0,0
[state 0]
	type=assertspecial
	trigger1=1
	flag=noshadow
;---

[State 0]
type = text
trigger1 = time<=60
triggerall = teamside = 1
removetime = 1
layerno = 2
text = "Assist OK"
font = F3
align = 0
pos = 90,44
ignorehitpause = 1
[State 0]
type = text
trigger1 = time<=60
triggerall = teamside = 2
removetime = 1
layerno = 2
text = "Assist OK"
font = F3
align = 0
pos = 230,44
ignorehitpause = 1

;sys::partner_life-recover3
[state 0]
	type=lifeadd
	triggerall=life<redlife
	trigger1=(time%12=0)
	value=1
;---	
	[State 0, DisplayToClipboard]
	type = PrintToConsole
	trigger1 = 1
	text = "redlife= %d  vel x = %f"
	params = redlife,vel x;---
;sys::partner_life-recover3
;[state 0]
;	type=lifeadd
;	trigger1=(time%20=19) && (life<lifemax-1)
;	value=1
;---
;sys::partner-standby_id_input3
[state 0]
	type=varset
	trigger1=!ishelper && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
	sysvar(0)=playerid(floor(sysfvar(0))),var(15)
;---
;sys::partner-standby-set5
;[state 0]
;	type=turn
;	trigger1=sysvar(0)>0 && playeridexist(sysvar(0))
;	trigger1=facing!=playerid(sysvar(0)),facing
[state 0]
	type=posset
	trigger1=sysvar(0)>0 && playeridexist(sysvar(0))
	x=playerid(sysvar(0)),pos x -8*playerid(sysvar(0)),facing
	y=playerid(sysvar(0)),pos y-playerid(sysvar(0)),screenpos y
;---
;sys::partner-standby-out3 ; o‚é
[state 0]
	type=varset
	trigger1=!ishelper && roundstate=2 && numpartner && sysvar(0)>0 && playeridexist(sysvar(0)) && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=(playerid(sysvar(0)),alive=0 && playerid(sysvar(0)),stateno=5150) || (playerid(sysvar(0)),sysfvar(4)>0)
	trigger1=id=playerid(floor(sysfvar(0))),var(49)
	sysfvar(4)=0 ;; to main-player

 
 ;sys::partner-standby-out3 ; o‚é
[state 0]
	type=TagIn
	trigger1=!ishelper && roundstate=2 && numpartner && sysvar(0)>0 && playeridexist(sysvar(0)) && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=(playerid(sysvar(0)),alive=0 && playerid(sysvar(0)),stateno=5150) || (playerid(sysvar(0)),sysfvar(4)>0)
	trigger1=id=playerid(floor(sysfvar(0))),var(49)
	leader=PlayerNo ;; to main-player
 
;sys::partner_goto-out1
[state 0]
	type=changestate
	;;---// normal
      trigger1=time>1  && sysfvar(4)<1
	;;---// round-over
	trigger2=roundstate>2
      ;;---// striker-call / summon ; (ƒXƒgƒ‰ƒCƒJ[ŒÄo)
	trigger3=sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger3=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(48)=12&& id=playerid(floor(sysfvar(0))),var(49)
       value=190193
	ctrl=0
 
;------------------------
; in (190193-190195) ; “oê
;------------------------
[statedef 190193]
type=u
movetype=u
physics=n
sprpriority=-2
velset=0,0
ctrl=0
;---
;sys::partner-out-set1
[state 0]
	type=nothitby
	trigger1=1
	value=sca
[state 0]
	type=screenbound
	trigger1=1
	value=0
	movecamera=0,0
[state 0]
	type=playerpush
	trigger1=1
	value=0
[state 0]
	type=assertspecial
	trigger1=1
	flag=invisible 
     flag2=noturntarget
 
;sys::face_d_clear
[state 0]
	type=removeexplod
	trigger1=!time
	id=490600
;---
;sys::init_assist_no
[state 0]
	type=varset
	trigger1=!time
	sysvar(1)=-1
;sys::init_assist_no
;[state 0]
;	type=mapset
;	trigger1=(sysvar(1)>159) && selfstatenoexist(sysvar(1)) && map(a4b_assist1)<160;!time
;	map="a4b_assist1"
;      value=sysvar(1) 
;---
;sys::partner-out-set2
[state 0]
	type=turn
	trigger1=sysvar(0)>0 && playeridexist(sysvar(0))
	trigger1= facing =playerid(map(mainIDTriple)),facing
;sys::partner-out-pos2
[state 0]
	type=posset
	trigger1=roundstate=2 && sysvar(0)>0 && playeridexist(sysvar(0))
	x= (playerid(sysvar(0)),pos x)-(playerid(sysvar(0)),backedgebodydist+const240p(90))*facing
	y=-const240p(180)
;sys::partner-out-pos3
[state 0]
	type=posset
	trigger1=roundstate>2 && sysvar(0)>0 && playeridexist(sysvar(0))
	x= (playerid(sysvar(0)),pos x)-facing*const240p(28)*(id-sysvar(0))
	y=-(playerid(sysvar(0)),screenpos y)-const240p(80)
;---
;sys::partner-landing-pos2
[state 0]
	type=helper
	trigger1=!time && !ishelper && roundstate=2 && sysfvar(4)=0 && !numhelper(909606) && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=(playerid(floor(sysfvar(0))),var(0)=90900) && !(playerid(floor(sysfvar(0))),var(7)&65536)
	trigger1=sysvar(0)>0 && playeridexist(sysvar(0))
	pos=(playerid(floor(sysfvar(0))),pos x-pos x)*facing, 50+(playerid(floor(sysfvar(0))),pos y-pos y);
	id=909606
	stateno=190202
 
;--- special partner / striker ; (“Á•Êx‰‡)
;sys::partner-out-plus2
;[state 0]
;	type=helper
;	trigger1=time=2 && !ishelper && roundstate=2 && !numhelper(909601) && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0))) && sysfvar(4)=3 && prevstateno=190192
;;	trigger1=(playerid(floor(sysfvar(0))),var(0)=90900) && (playerid(floor(sysfvar(0))),var(7)&131072)
;	id=909601
;	stateno=909601
;	ownpal=1
;op;	size.height=0
;	size.shadowoffset=0
;	size.draw.offset=0,0
;	size.xscale=1
;	size.yscale=1
;	persistent=0
 ;--- special partner / striker ; (“Á•Êx‰‡)
;sys::partner-out-plus2
[state 0]
type=changestate 
triggerall= const(MVCIActiveSwitch) = 1 
triggerall=playerid(sysvar(0)),sysfvar(4)=2 ;is-main-player?
trigger1=sysfvar(0)>0 && playeridexist(floor(sysfvar(0))) 
trigger1=  roundstate=2&& (sysfvar(0)>0) && playeridexist(floor(sysfvar(0))) && sysfvar(4)=0 && prevstateno=190192
value =190197
ctrl = 0
;sys::partner-out-plus2
[state 0]
type=changestate 
triggerall= const(MVCIActiveSwitch)=0 
triggerall=playerid(sysvar(0)),teamside=teamside
triggerall=playerid(sysvar(0)),sysfvar(4)=2 ;is-main-player?
trigger1=sysfvar(0)>0 && playeridexist(floor(sysfvar(0))) 
trigger1=  roundstate=2  && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0))) && sysfvar(4)=0 && prevstateno=190192
value =1251104
ctrl = 0 

;---
;sys::partner-out-vel2
[state 0]
	type=velset
	trigger1=sysvar(0)>0 && playeridexist(sysvar(0))
	x=abs(pos x-playerid(sysvar(0)),pos x)*0.065
	y=abs(pos y)*0.05
;sys::partner-out-vel3
[state 0]
	type=velset
	trigger1=sysvar(0)>0 && playeridexist(sysvar(0)) && (roundstate>2)
	x=abs(pos x-playerid(sysvar(0)),pos x +const240p(28)*(id-sysvar(0))*facing )*0.035
	y=abs(pos y)*0.035
;---
;sys::partner_goto-out2
[state 0]
	type=changestate
	trigger1=time>ifelse(roundstate<=2, 1, ifelse(win,100,160)+(id-sysvar(0))*8 )
	value=ifelse((sysfvar(4)<1), 190194, 190196)
	ctrl=0
;------------------------
; Empty States for override ; ƒXƒgƒ‰ƒCƒJ[oŒ» ã‘‚«—p’†ŠÔƒXƒe[ƒg
;------------------------
[statedef 190196]
type=u
movetype=u
ctrl=0
;---
;sys::partner_goto-out3
[state 0]
	type=changestate
	trigger1= !time  
	value=190194
	ctrl=0;---


; Partner Assist (Kick - Pasok sa scene)
[Statedef 1251104]
type = A
movetype = A
physics = N
anim = ifelse(SelfAnimExist(45),45,42)
SprPriority = 5
ctrl = 0
;sys::partner_assist-mark1
[state 0] ;; Mark: "p-1" / "p-2" / "cpu"
	type=explod
	trigger1=!time && roundstate=2 && !numexplod(296000) && numpartner
	id=296000
     anim=GO5600+(matchno<2||ishometeam=0)*teamside
	postype=p1
	pos=0,floor( (const(size.head.pos.y)-const(size.ground.front)/2-const(size.ground.back)/2) )
	facing=ifelse(facing=1,1,-1)
	scale=0.5,0.5
	sprpriority=5
	ownpal=1
	bindtime=-1
	supermovetime=-1
	pausemovetime=-1
	ignorehitpause=1
	persistent=0
;---
[state 0]
	type=palfx
	trigger1=!time && sysfvar(4)=0 && sysvar(0)>0 && playeridexist(sysvar(0))
	trigger1=playerid(sysvar(0)),sysfvar(4)=2 ;; "switch-canneling"
	time=20
	add=-256,0,256
 
;sys::player_cost_sc0 ;; ??—???
[state 0]
	type=poweradd
	trigger1=!time && sysfvar(4)=0 && sysvar(0)>0 && playeridexist(sysvar(0))
	trigger1=playerid(sysvar(0)),sysfvar(4)=2 ;; "switch-canneling"
	value=-250
	persistent=0

; Define this if necessary...
[State 1251104, Aerial Attack Anim]
type = ChangeAnim
trigger1 = p2bodydist x = [0,175]
trigger2 = Pos x = [(playerid(sysvar(0)), pos x - 150),(playerid(sysvar(0)), pos x + 150)]
value = Const(AnimAerialAttack)
persistent = 0

[State 1251104, Turn]
type = Turn
triggerall = Time = [0,1]
triggerall = NumEnemy && EnemyNear, StateNo != [190191,190192]
trigger1 = Facing = -1 && ((EnemyNear, Pos X -95) >= playerid(sysvar(0)), Pos X)
trigger2 = Facing = 1 && ((EnemyNear, Pos X +95) <= playerid(sysvar(0)), Pos X)
trigger3 = Facing != Partner, Facing

[State 1251104, InitPos]
type = PosSet
trigger1 = NumPartner && Time = [0,1]
x = (50 + (GameWidth/2))*(-1*Facing)
y = ((ifelse((Facing = playerid(sysvar(0)), Facing),(playerid(sysvar(0)), BackEdgeBodyDist+20),(playerid(sysvar(0)), FrontEdgeBodyDist+20))*-1)/2)-ifelse((playerid(sysvar(0)), NumTarget),50,-2)

[State 1251104, Vel]
type = VelSet
triggerall = NumPartner
trigger1 = Time = [1,2]
x = (abs(BackEdgeDist)+abs(pos y * 2))/12
y = (abs(pos y )/12)
persistent = 0

[State 1251104, VMClose]
type = VelMul
triggerall = Pos Y < 0
trigger1 = BackEdgeBodyDist >= 0
trigger1 = FrontEdgeBodyDist = [0,35]
x = 0.55

[State 1251104, VelAdd]
type = VelAdd
trigger1 = vel y < 1
y = 0.2

[State 1251104, hit]
type                    = HitDef
trigger1                = !MoveContact && !(NumTarget)
attr                    = A, SA
damage                  = 3, 1
animtype                = heavy
air.animtype 			= back
fall.animtype			= diagup
guardflag               = MA
hitflag                 = MAFD
priority                = 5, Hit
pauseTime               = 7, ifelse((EnemyNear, statetype = A),2,9)
sparkxy                 = -10, -80
hitsound                = 5,2
guardsound              = 6,0
ground.type             = High
ground.slideTime        = 3
ground.hitTime          = 25
guard.hitTime 			= 22
ground.velocity         = -0.25, 0
airguard.velocity       = -2.5, -1.85
air.type                = high
air.velocity            = -2, -5
air.hitTime             = 25
getpower                = 0
givepower      			= 25
fall                    = 0
air.fall                = 1
down.bounce 			= 0
down.velocity			= -1,-6
guard.kill = 0

[State 1251104, Anim2]
type = ChangeAnim
triggerall = (Anim != [42,45]) && AnimTime = 0
trigger1 = MoveContact
value = ifelse(SelfAnimExist(45),45,44)
persistent = 0

[State 1251104, NoJC]     
type = AssertSpecial
trigger1 = 1
flag = nojugglecheck
ignorehitpause = 1

[State 1251104, pause]
type = Superpause
trigger1 = MoveContact
anim = -1
Time = ifelse(MoveHit, 6, 12)
moveTime = 0
p2defmul = 1
darken = 0
persistent = 0
ignorehitpause = 1

[State 0, Shake]
type = EnvShake
trigger1 = MoveHit
Time = 8
persistent = 0
ignorehitpause = 1

[State 1251104, TVel]
type = TargetVelSet
triggerall = NumTarget = 1 && MoveHit
trigger1 = Target, statetype != S && Target, statetype != C
trigger1 = (Target, GetHitVar(yvel) >= 0 || Target, vel y >= 0)
x = 0
y = ifelse((Target, anim >= 5100),-3.5,-1.7)
persistent = 0

[State 1251104, TVel]
type = TargetVelSet
triggerall = NumTarget = 1 && MoveHit
trigger1 = Target, GetHitVar(xvel) <= -3 || Target, vel x <= -3
trigger2 = Target, GetHitVar(xvel) >= 3 || Target, vel x >= 3
x = 0
persistent = 0

[State 1251104, VelMul]
type = VelMul
triggerall = BackEdgeBodyDist > 0
trigger1 = MoveContact
trigger2 = p2bodydist x = [-50,10]
x = ifelse(FrontEdgeBodyDist <= 30,0.37,0.2)
y = ifelse(MoveContact,1.4,1)

[State 1251104, inv]
type = NotHitBy
trigger1 = BackEdgeBodyDist <= 0
value = SCA
Time = 2

[State 1251104, inv]
type = NotHitBy
trigger1 = playerid(sysvar(0)), Life <= 0
value = SCA
Time = 6

[State 1251104, sb] 
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1251104, 9]
type = VelSet
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
x = 0
y = 0

[State 1251104, End]
type = ChangeState
trigger1 = Vel Y >= 0
trigger1 = Pos Y >= 0
value = 190195
ctrl=0
 ; ENTER 2
[Statedef 190197]
type = A
movetype = A
physics = S
SprPriority = 2
anim = 100
velset = 0,0
movehitpersist = 1
hitcountpersist = 1
ctrl = 0
facep2 = 1
;sys::partner_assist-mark1
[state 0] ;; Mark: "p-1" / "p-2" / "cpu"
	type=explod
	trigger1=!time && roundstate=2 && !numexplod(296000) && numpartner
	id=296000
     anim=GO5600+(matchno<2||ishometeam=0)*teamside
	postype=p1
	pos=0,floor( (const(size.head.pos.y)-const(size.ground.front)/2-const(size.ground.back)/2) )
	facing=ifelse(facing=1,1,-1)
	scale=0.5,0.5
	sprpriority=5
	ownpal=1
	bindtime=-1
	supermovetime=-1
	pausemovetime=-1
	ignorehitpause=1
	persistent=0
 
;---
;sys::partner-out-set4
[state 0]
	type=nothitby
	trigger1= Time = [0,2] && sysvar(0)>0 && playeridexist(sysvar(0))
	trigger2 = BackEdgeBodyDist <= 5
     value=sca
	time=ifelse(playerid(sysvar(0)),alive=0,25,10)
[state 0]
	type=assertspecial
	trigger1=(pos y<0)
	flag=noshadow
[state 0]
	type=screenbound
	trigger1=1
	value=0
	movecamera=0,0
[state 0]
	type=playerpush
	trigger1=1
	value=0

;;---
[State 1251116, pause]
type = SuperPause
trigger1 = Time = [0,1]
trigger2 = (Time%6) = 0
anim = -1
Time = 2
moveTime = 2
darken = 0
unhittable = 1
 
[State 1251116, pos]
type = PosSet
trigger1 = Time = [0,1]
x = (60 + (GameWidth/2))*(-1*Facing)

[State 1251116, pos]
type = PosSet
trigger1 = 1
y = 0

[State 1251116, ghost]
type = PlayerPush
trigger1 = NumEnemy
value = ifelse((EnemyNear,Pos X=[Pos X-25,Pos X+25]),1,0)

[State 1251116, vel]
type = velset
trigger1 = NumEnemy
trigger1 = p2bodydist x != [-30,30] 
x = ceil(abs(ifelse((facing = EnemyNear, facing),(EnemyNear, BackEdgeDist),(EnemyNear, FrontEdgeDist))+ 251)/cond(EnemyNear, statetype = A,27,25))
y = 0

[State 1251116, vel]
type = VelMul
trigger1 = p2bodydist x = [-35,32]
x = 0.74
y = 0

[State 1251116, vel]
type = TargetVelSet
trigger1 = NumTarget && Target, Movetype = H && Target, Statetype = A
x = -3
[state 0]
	type=palfx
	trigger1=!time && sysfvar(4)=0 && sysvar(0)>0 && playeridexist(sysvar(0))
	trigger1=playerid(sysvar(0)),sysfvar(4)=2 ;; "switch-canneling";&& sysfvar(4)=0 && sysvar(0)>0 && playeridexist(sysvar(0))
 	time=20
	add=-256,0,256
;---
;sys::player_cost_sc0 ;; ƒpƒ[Á”ï—Ê
[state 0]
	type=poweradd
	trigger1=!time && sysfvar(4)=0 && sysvar(0)>0 && playeridexist(sysvar(0))
	trigger1=playerid(sysvar(0)),sysfvar(4)=2;; "switch-canneling"
	value=-500
	persistent=0

;---
;sys::partner_goto-assist1
[state 0]
	type=changestate
	trigger1=(anim=100) && (time>=20)
	trigger1 = p2bodydist x = [-30,25]
     trigger2 = vel x <= 0.02
     trigger3 = FrontEdgeBodyDist <= 70
     value=190195 ;; stop
	ctrl=0
 
;------------------------
; Striker-Call / Summon ; ƒXƒgƒ‰ƒCƒJ[¢Š«
;------------------------
[statedef 190194]
type=a
movetype=u
physics=n
anim=ifelse(selfanimexist(44),44,41)
sprpriority=-2
ctrl=0
hitcountpersist = 1
movehitpersist=1;---;---
;sys::partner_assist-mark1
[state 0] ;; Mark: "p-1" / "p-2" / "cpu"
	type=explod
	trigger1=!time && roundstate=2 && !numexplod(296000) && numpartner
	id=296000
	anim=GO5600+(matchno<2||ishometeam=0)*teamside
	postype=p1
	pos=0,floor( (const(size.head.pos.y)-const(size.ground.front)/2-const(size.ground.back)/2) )
	facing=ifelse(facing=1,1,-1)
	scale=0.5,0.5
	sprpriority=5
	ownpal=1
	bindtime=-1
	supermovetime=-1
	pausemovetime=-1
	ignorehitpause=1
	persistent=0
;---
;sys::partner-out-set4
[state 0]
	type=nothitby
	trigger1=!time && sysvar(0)>0 && playeridexist(sysvar(0))
	value=sca
	time=ifelse(playerid(sysvar(0)),alive=0,25,10)
[state 0]
	type=assertspecial
	trigger1=(pos y<0)
	flag=noshadow
[state 0]
	type=screenbound
	trigger1=1
	value=0
	movecamera=0,0
[state 0]
	type=playerpush
	trigger1=1
	value=0
;---
;sys::partner_goto-assist1
[state 0]
	type=changestate
	trigger1=(anim=[41,46])
	trigger1=(pos y>=0) || ((pos y+vel y>=0)&&(vel y>0))
	value=190195 ;; land
	ctrl=0
;---
[state 0]
	type=palfx
	trigger1=!time && sysfvar(4)=0 && sysvar(0)>0 && playeridexist(sysvar(0))
	trigger1=playerid(sysvar(0)),sysfvar(4)=2 ;; "switch-canneling"
	time=20
	add=-256,0,256
 
;---
[state 0]
	type=superpause
	trigger1=power >= 500 &&!time && sysfvar(4)=0 && sysvar(0)>0 && playeridexist(sysvar(0))
	trigger1=map(dohyper)>0 ;; "switch-canneling"
	time=50
	movetime=50
     pausebg=1
     darken = 0
 
;---
[state 0]
	type=palfx
	trigger1=power >= 500 &&!time && sysfvar(4)=0 && sysvar(0)>0 && playeridexist(sysvar(0))
	trigger1=map(dohyper)>0 ;; "switch-canneling"
	time=20
	add=256,0,-256

 
;------------------------
; Land > RoundOver ; ’…’n>ƒ‰ƒEƒ“ƒhI—¹
;------------------------
[statedef 190195]
type=s
movetype=i
physics=s
anim=47
sprpriority=-2
velset=0,0
ctrl=0
;---
;sys::partner_anim_change5
[state 0]
	type=changeanim
	triggerall=!time
	trigger1=(animtime>0) ;;loop-type
	trigger2=(animtime<-5) ;;too-long
	value=40 ;;start_jump
;---
;sys::partner-out-set5
[state 0]
	type=posset
	trigger1=!time
	y=0
;---
;sys::partner_goto-assist2
[state 0]
	type=changestate
	trigger1=animtime=0 && roundstate=2 && sysfvar(4)>0 && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
	value=playerid(floor(sysfvar(0))),var(53+id-playerid(floor(sysfvar(0))),sysvar(0))
	ctrl=0
;---
; sp-partner
[state 0]
	type=Changestate
;	triggerall=sysfvar(4)=0 ;; is-partner?
 	trigger1= power>=500
     trigger1 = playerid(sysvar(0)),teamside=teamside
     trigger1 = !time && sysfvar(4)=0 && sysvar(0)>0 && playeridexist(sysvar(0))  
     trigger1 =  map(dohyper)>0 
	value=const(StateTagSuperAssist)
  ;sys::partner_ex-change_safety
[state 0]
	type=changestate
	trigger1=animtime=0
	trigger2=(animtime>0) && (time>5)
	value=0
	ctrl=1



;==========================
;==========================
; Static Pos [helper] ; À•WŒÅ’è
[statedef 190202]
type=s
movetype=i
physics=n
anim=909601 ;; empty
velset=0,0
ctrl=0
;---
[state 0]
	type=screenbound
	trigger1=1
	value=1
	movecamera=1,1
[state 0]
	type=destroyself
	trigger1=(parent,stateno!=[190190,190196]) || (roundstate!=2) || time>56 ;;20

;==========================
;==========================
; Static Pos [helper] ; À•WŒÅ’è
[statedef 190402]
type=s
movetype=i
physics=n
velset=0,0
ctrl=0
[state 0]
	type=nothitby
	trigger1=1
	value=sca
[state 0]
	type=playerpush
	trigger1=1
	value=0
[state 0]
	type=assertspecial
	trigger1=1
	flag=invisible

[state 0]
	type=destroyself
	trigger1=(parent,stateno!=[190190,190396]) || (roundstate!=2) || time>56 ;;20


;==========================
;==========================
; Addon Main [Helper] ; ƒAƒhƒIƒ“’†S
;==========================
; sv00:		root id
; sv01-03:	xxx partner index/id
; --- ---
; v00:		helper id # const=90900
; v01-02:	xxx
; v03-04:	gamewidth/gameheight
; v05-06:	xxx
; v07:		<<bit flag>> system_switch
; v08:		<<bit flag>>
;	01:	---modify life
;	02:	---modify power
;	03:	---modify guard point
;	04:	---modify_score_redraw
;	05-06:	---modify pos y>=0 p1,p2
;	07:	xxx
;	08-11:	---alive flag
;	12:	---screenbound switch
;	13:	xxx
;	14-25:	---key pressed switch
; v09:		<<bit flag>>
;	01:	---getting nums of combo
;	02:	x--timer check
;	03:	---draw lifebar
;	04:	---draw power
;	05:	---getting damage
;	06-07:	---first attack
;	08:	x--hyper combo finish
;	09:	x--speci combo finish
;	10:	---round over
;	11:	x--(perfect) not used
;	12:	---bonus statge / no result / no combo
;	13:	---red 1/3 life
;	14-15:	---counter hit
;	16:	---options-noko
;	17-18:	---options-mod-life
;	19:	---options-mod-face
;	20-24:	xxx
;	25:	---finest_ko_flag
; v10:		xxx
; v11-13:	combo / real combo / counter pos / hits type
; v14:		temp
; v15-16:	current player/enemy ID //ƒvƒŒ[ƒ„[/‘Šè¯•Ê”Ô†
; v17:		against_throw //“Š‚°ŠO‚µ
; v18-19:	ReAction ID Ref.(for a.i.) / s“®‘ÎˆQÆ—p(å‚ÉAI‚É’ñ‹Ÿ)
; v20-21:	power0/power_view
; v22:		players type
; v23:		life-mod (recover-damage...)
; v24:		stages type (1:water...)
; v25:		pow-max mode timer
; v26-27:	player time
; v28:		roundstate_time
; v29:		--- life/damage_bar_coloring_counter
; v30:		xxx
; v31-32:	lifebar draw x/y
; v33-34:	powerbar draw x/y
; v35-37:	guard crush
; v38-39:	message type / pos(index)
; v40:		life0/players life (!=root,life)
; v41:		options_life-mod
; v42:		damage_real
; v43:		life_view
; v44:		jump counter
; v45:		xxx
; v46:		draw depth //•`‰æ[“x
; v47:		debug_key_input
; v48:		switch_tag_mode_change_call_striker
; v49:		partner_id in tag-mode
; v50:		dizzy
; v51:		ai(def:/player:-1/cpu:1-8)
; v52:		xxx dizzy recover counter
; v53-56:	striker stateno (p1-p4)
; v57-58:	score
; v59:		xxx
; --- ---
; f00:		zoom / local / scale 1/2/3 [const240/480/720p]
; f01-02:	xxx
; --- ---	[ranking]
; f03:		maxhitcombo
; f04:		xxx
; f05:		rank counter hits
; f06:		rank bk/jd
; f07:		rank defence
; f08:		rank attack
; --- ---
; f09:		- zoom
; --- ---	
; f10-19:	[main/partner_name_info]
; --- ---
; f20-36:	[main/partner_face_info]
; f37-39:	xxx

;==========================
; starter [helper for init]
; ‰Šú‰»—p
;==========================
[statedef 90909]
type=s
movetype=i
physics=n
anim=909601 ;; empty
velset=0,0
ctrl=0
;---
[state 0]
	type=assertspecial
	trigger1=1
	flag=nobardisplay
	flag2=invisible
;---
;>>sys::root_id
[state 0]
	type=varset
	trigger1=!time
	sysvar(0)=var(15):=(root,id)
;>>sys::partner_id_search_init
[state 0]
	type=varset
	trigger1=!time
	var(49)=var(15)+(numpartner>0)
;>>sys::enemy_id
[state 0]
	type=varset
	trigger1=!time && numenemy
;bug;	var(16)=var(15)+ifelse(teamside=1,numpartner+1,-(enemy,numpartner)-1)
	var(16)=var(15)
;>>sys::addon_id
[state 0]
	type=varset
	trigger1=!time
	var(0)=90900
;---
[state 0]
	type=posset
	trigger1=!time
	y=0
;---
;---
;>>sys::init::system_switch_plus
;;>>@Config.System_Switch>>
;; ƒVƒXƒeƒ€İ’è
; v07: bit flag
[state 0] ;[.01]
	type=null
	trigger1=!time
	trigger1=1 || var(7):= 1073741823 ;;2147483647 ;; ;; default (enable all) (‰Šú’l‘S—LŒø)
;; uncomment to disable (ƒRƒƒ“ƒg‚ğŠO‚·‚Æ–³Œø‚É‚Å‚«‚Ü‚·)
 	trigger1=1||var(7):=(var(7)^1)        ;; 1st - dizzy/stun system
 	trigger1=1||var(7):=(var(7)^2)        ;; 2nd - guard_break system
 	trigger1=1||var(7):=(var(7)^4)        ;; 3rd - show combo_counter
 	trigger1=1||var(7):=(var(7)^8)        ;; 4th - show message
 	trigger1=1||var(7):=(var(7)^16)       ;; 5th - show score/cpu_level
 	trigger1=1||var(7):=(var(7)^32)       ;; 6th - show result_panel
 	trigger1=1||var(7):=(var(7)^64)       ;; 7th - play system voice
 	trigger1=1||var(7):=(var(7)^128)      ;; 8th - show key_input
 	trigger1=1||var(7):=(var(7)^256)      ;; 9th - show lifebar
 	trigger1=1||var(7):=(var(7)^512)      ;;10th - show powerbar
	trigger1=1||var(7):=(var(7)^1024)     ;;11th - tag system
	trigger1=1||var(7):=(var(7)^2048)     ;;12th - tag_assist
 	trigger1=1||var(7):=(var(7)^4096)     ;;13th - round_call
 	trigger1=1||var(7):=(var(7)^8192)     ;;14th - ko_call
 	trigger1=1||var(7):=(var(7)^16384)    ;;15th - show ground_dust effect
 	trigger1=1||var(7):=(var(7)^32768)    ;;16th - show portrait / face
	trigger1=1||var(7):=(var(7)^65536)    ;;17th - slow camera (warning: this may break your characters)
;	;trigger1=1||var(7):=(var(7)^131072)   ;;18th - tag_special_partners
;	trigger1=1||var(7):=(var(7)^262144)   ;;19th - ai action switch
 	trigger1=1||var(7):=(var(7)^524288)   ;;20th - show vs_screen
 
;@@Debug@@;

 
 







;---
;---
;>>sys::init::localcoord
; f0: scale: height [1:240p / 2:480p / (3:720p) / 4:1280p]
[state 0] ;[.02]
	type=null
	trigger1=!time
	trigger1=1|| fvar(0):=1.00 || fvar(0):=const240p(1) ;;<- 
	trigger1=1|| var(3):=floor(320*fvar(0)) || var(4):=floor(240*fvar(0)) || var(4):=floor(gameheight/gamewidth*var(3))
	;;* (vWin) game screen width/Height / (v1.0 / v1.1)	;(‰æ–Ê‰¡/c)
;;v1.0;;---
;;	trigger1=1|| var(3):=floor(gamewidth) || var(4):=floor(gameheight)
	;;* (v1.0) game screen width/Height	;(‰æ–Ê‰¡/c)
	;;* (v1.0):   ‰¡•‚É‡‚í‚¹‚Äc‚‚ğ’²® -> 240p(320)
	;;* (IKEMEN): c‚‚É‡‚í‚¹‚Ä‰¡•‚ğ’²® -> 240p(gamewidth/fvar(0))
;;v1.1 / IKEMEN;;---
;;	trigger1=1|| var(3):=floor(screenwidth) || var(4):=floor(screenheight)
;@@Debug@@;
	;;* (v1.1) game screen Width/Height	;(‰æ–Ê‰¡/c)

;---
;;>>sys::bonus_stages_flag ; (12th bit)
; no result panel / no combo
; ƒ{[ƒiƒXƒXƒe[ƒW
[state 0] ;[.03] ; on
	type=varset
	trigger1=root,numexplod(920000)
	trigger2=numenemy
	trigger2=enemy,numexplod(920000)
	var(9)=parent,var(9)|4096
;---
;>>sys::stage_type_set
;;>>@Config.Stage_Type>>
; stage type: ( 0: normal 1: water... )
[state 0] ;[.04]
	type=varset
	triggerall=!time && (var(7)&16384) ;; system_switch
	;;--- vWin
	trigger1=abs(root,pos x/fvar(0))=73 || abs(root,p2dist x/fvar(0))=146
	;;--- v1.x / ikemen
;v1.0;	trigger2=stagevar(info.author)="WATER" ;;(v1.0)
	var(24)=1
	;;* (v1.1) game screen Width/Height	;(‰æ–Ê‰¡/c)
[state 0] ;[.02v_ikemen]
	type=varset
	trigger1=const(Default.Enable.Tag)=1 && (teammode=tag)	 
	var(7)=(var(7)|1024)     ;;11th - tag system
;; ƒƒ‚:
;;  ƒ^ƒO‘Îí‚ÌŽí—Þ‚É‘Î‰ž
[state 0] ;[.02v_ikemen]
	type=varset
	trigger1=const(Default.Enable.SW.TagAssist)=1 && (teammode=tag)	 
	var(7)=(var(7)|2048)     ;;11th - tag system

;---
;;>>@Config.Power_Mode>>
; powerbar mode setting (v22: mode:1-4 / 10:off)
; ƒpƒ[ƒo[ƒ‚[ƒhİ’è
;>>sys::init_mode_single
[state 0] ;[.05a]
	type=varset
	trigger1=!time
	var(22)= 1 ;;default
;[state 0] ;[.05b]
;	type=varset
;	trigger1=!time && (root,teammode=single)
;	var(22)= ifelse( (root,palno)%3=0, 3, ((root,palno)%3) )
;>>sys::init_mode_tag
[state 0] ;[.05c]
	type=varset
	trigger1=!time && (root,teammode=tag) && const(Default.Enable.Tag)=1;(var(7)&1024) ;; system_switch
	var(22)= 4
	;;* (v1.1) game screen Width/Height	;(‰æ–Ê‰¡/c)

;---
;;>>@Config.Power_Start>>
;sys::powerbar_start_power ;; ƒpƒ[—ÊŠJn
[state 0]
	type=poweradd
	trigger1=!time && roundno=1 && power<1000
	value=1000
	persistent=0

;---
;---
[state 0] ;[.08]
	type=null
	trigger1=!time

;---
;;>>@Config.LifeBar>>
;; lifebar init ; ƒ‰ƒCƒtƒo[ ‰Šú’l
;sys::init_lifebar
	trigger1=1|| var(31):=ceil(ifelse(teamside=1,-18,18)*fvar(0)+var(3)/2) ;;<- lifebar_pos_x ;(XÀ•W)
	trigger1=1|| var(32):=ceil(14*fvar(0)) ;;<- lifebar_pos_y ;(YÀ•W)

;---
;;>>@Config.PowerBar>>
;; powerbar init ; ƒpƒ[ƒo[ ‰Šú’l
;sys::init_powerbar
	trigger1=1|| var(33):=var(31) +ceil(ifelse(teamside=1,-8,8)*fvar(0)) ;;<- powerbar_pos_x ;(XÀ•W)
	trigger1=1|| var(34):=var(32) +ceil(6*fvar(0)) ;;<- powerbar_pos_y ;(YÀ•W)
	trigger1=1|| var(46):=-5200 ;;<- draw_depth ;(•`‰æ[“x)
	trigger1=1|| var(57):=ifelse((root,sysvar(4)),(root,var(58)),0) ;;<- get root scores ;(e‚Ì“_”æ“¾)

;---
;;>>@Config.Name_Info>>
;---name draw info ; –¼‘O•`‰æî•ñ
;; fv10-19
;; player-main:     f10,f12: pos_x/y,  f14,f16: scale_x/y,  f18: alpha_SSS/DDD
;; player-partners: fv+1
	;;--- player-main
	trigger1=1|| fvar(10):=var(31)/fvar(0) + ifelse(teamside=1,-106,106) ;;Pos_X
	trigger1=1|| fvar(12):=var(32)/fvar(0) + 10 ;;Pos_Y
	trigger1=1|| fvar(14):=1 || fvar(16):=1 ;;Sacle_X/Y
	trigger1=1|| fvar(18):=256000 ;;Alpha_SSS/DDD
	;;--- partners
	trigger1=1|| fvar(11):=var(31)/fvar(0) + ifelse(numpartner<2,106,126) *ifelse(teamside=1,-1,1) ;;Pos_X
	trigger1=1|| fvar(13):=var(32)/fvar(0) + ifelse(numpartner<2,16,28) ;;Pos_Y
	trigger1=1|| fvar(15):=ifelse(numpartner<2,1,0.5) || fvar(17):=fvar(15) ;;Sacle_X/Y
	trigger1=1|| fvar(19):=128128 ;;Alpha_SSS/DDD

;---
;;>>@Config.Face_Info>>
;---face draw info ; Šç•`‰æî•ñ
;; fv20-36
;; player-main:     f20,f22: pos_x/y,  f24,f26: scale_x/y,  f28: alpha_SSS/DDD,  f32: spr-priority
;; player-partners: fv+1, f34-35: offset_x/y, f36: offset_scale_x&y
	;;--- player-main
	trigger1=1|| fvar(20):=var(31)/fvar(0) + ifelse(teamside=1,-142,142) ;;Pos_X
	trigger1=1|| fvar(22):=var(32)/fvar(0) ;;Pos_Y
	trigger1=1|| fvar(24):=1.0 || fvar(26):=fvar(24) ;;Sacle_X/Y
	trigger1=1|| fvar(28):=256000 ;;Alpha_SSS/DDD
	trigger1=1|| fvar(32):=var(46)+1 ;;Spr-Priority
	;;--- partners
	trigger1=1|| fvar(21):=var(31)/fvar(0) + ifelse(numpartner<2,122,141) *ifelse(teamside=1,-1,1) ;;Pos_X
	trigger1=1|| fvar(23):=var(32)/fvar(0) + ifelse(numpartner<2,2,20) ;;Pos_Y
	trigger1=1|| fvar(25):=ifelse(numpartner=1,1.0,0.5) || fvar(27):=fvar(25) ;;Sacle_X/Y
	trigger1=1|| fvar(29):=256000;;Alpha_SSS/DDD
	trigger1=1|| fvar(33):=var(46) +ifelse(numpartner=1,0,6) ;;Spr-Priority
	;---
	trigger1=1|| fvar(34):=0 || fvar(35):=4 ;;OffSet_X/Y
	trigger1=1|| fvar(36):=0 ;;OffSet_Scale_X&Y
	;---
;---
; Get Tag-Team assist-stateno (v53-56)
; ƒ^ƒbƒOx‰‡ƒXƒe[ƒg”Ô†æ“¾
;sys::tag_assist_stno-1
[state 0] ;[.20]
	type=varset
	trigger1=numpartner
	var(53)=ifelse((root,sysvar(0)>159), (root,sysvar(0)), 1000)
;sys::tag_assist_stno-2
[state 0] ;[.21]
	type=varset
	trigger1=numpartner && playeridexist(root,id+1)
	var(54)=ifelse((playerid(root,id+1),sysvar(0)>159), (playerid(root,id+1),sysvar(0)), 1000)
;--- plus
;sys::tag_assist_stno-3
[state 0] ;[.22]
	type=varset
	trigger1=numpartner>1 && playeridexist(root,id+2)
	var(55)=ifelse((playerid(root,id+2),sysvar(0)>159), (playerid(root,id+2),sysvar(0)), 1000)
;sys::tag_assist_stno-4
[state 0] ;[.23]
	type=varset
	trigger1=numpartner>2 && playeridexist(root,id+3)
	var(56)=ifelse((playerid(root,id+3),sysvar(0)>159), (playerid(root,id+3),sysvar(0)), 1000)

;---
;---
[state 0]
	type=screenbound
	trigger1=(var(7)&65536) ;; system_switch
	value=0
	movecamera=1,1

;---
;---
;>>sys::addon_version_check
;; ƒAƒhƒIƒ“”Å”ÔŠm”F
[state 0] ;[.ver]
	type=explod
	trigger1=!time && floor(const(size.air.front))!=2108130
	anim=f231330
	space=screen
	postype=left
	sprpriority=800
	ownpal=1
	pos=floor(ifelse(teamside=1,60*fvar(0),var(3)-60*fvar(0))), 0
	scale=1,1
	bindtime=-1
	ontop=1
	removetime=-1
	supermovetime=-1
	pausemovetime=-1
	persistent=0
;---
;---
;;sys::over
[state 0] ;[.end]
	type=selfstate
	trigger1=time>=numpartner
	value=90900

;==========================
; main-loop
;==========================
[statedef 90900]
type=s
movetype=i
physics=n
anim=909601 ;; empty
poweradd=0
velset=0,0
ctrl=0

;---
[state 0]
	type=assertspecial
	trigger1=(roundstate!=2) || (var(9)&4096) || (win) || (lose)
	flag=nobardisplay
;---
;>>sys::starter
[state 0]
	type=changestate
	trigger1=!var(0)
	value=90909
	persistent=0
;---
;---
;>>sys::camera::set
;--- let camera_pos follow me (v1.1 only) ; Å“_‚ğ‚±‚ÌÍÙÊß°‚É]‚í‚¹‚é (v1.1 ê—p)
;; screenbound (12th bit)
[state 0] ; init -on
	type=varset
	trigger1=(var(8)&4096)
	var(8)=var(8)^4096
[state 0] ; check -off
	type=varset
	trigger1=!(var(8)&4096)
	trigger1=var(15)>0 && (playeridexist(var(15)))
	trigger1=(playerid(var(15)),gethitvar(isbound)>0) || (playerid(var(15)),numprojid(920851)) || (playerid(var(15)),numexplod(920851)) ;; switch id
	var(8)=var(8)|4096
[state 0]
	type=screenbound
	trigger1=(var(7)&65536) ;; system_switch
	value=0 ;; [def=0]
	movecamera=1,1 ;; [x,y]
;--- bind helper(me) to players position ; ƒvƒŒ[ƒ„[‚ÉˆÊ’u‚ğ‡‚í‚¹‚é
[state 0]
	type=posadd
	trigger1=!(var(8)&4096) ;; screenbound switch
	trigger1=(roundstate>=2) && var(15)>0 && playeridexist(var(15))
	trigger1=(playerid(var(15)),stateno!=[190190,190196]) ;;<- not as a striker
	x= (playerid(var(15)),pos x-pos x!=[-1,1]) *(playerid(var(15)),pos x-pos x) *facing /20.0  ;;<- speed
	y= (playerid(var(15)),pos y-pos y-const240p(50) ) /20.0  ;;<- speed
[state 0]
	type=posadd
	trigger1=(var(8)&4096) ;; screenbound switch
	trigger1=(roundstate>=2) && pos y<-const240p(50) ;; ground pos
	y=1-(pos y / 5.0) ;; init pos y

;---
;>>sys::ai_switch
;;>>@Config.AI>>
;; ai”»’è  v51 [def:0 / ai:1-8 / hum:-1]
[state 0]
	type=varset
	trigger1=1
	;;--- vWin
	var(51)=ifelse((matchno>1&&ishometeam=1), ifelse(matchno+roundno-1<8, matchno+roundno-1, 8), 0)
	;;--- v1.0
;v1.0	var(51)=(root,ailevel) ;; (v1.x)
;@@Debug@@;

;==========================
;==========================
; current player ID / player change
; Œ»İƒvƒŒ[ƒ„[¯•Ê”Ô† / ØŠ·
;------------------------

;>>sys::mod-face-flag
[state 0]
	type=varset
	trigger1=(var(9)&262144)
	var(9)=var(9)^262144

;>>sys::partner_id_get1
[state 0] ;;+1
	type=varset
	trigger1=numpartner && roundstate=2 && playeridexist(root,id+1)
	trigger1=(var(7)&1024) ;; system_switch - tag system
	trigger1=playerid(root,id+1),ishelper=0 && playerid(root,id+1),alive && playerid(root,id+1),teamside=teamside && playerid(root,id+1),sysfvar(4)<1
	trigger1=var(15)!=root,id+1
	var(15)=root,id+1  +(var(9):=(var(9)|262144))*0
[state 0] ;;+2
	type=varset
	trigger1=numpartner>1 && roundstate=2 && playeridexist(root,id+2)
	trigger1=(var(7)&1024) ;; system_switch - tag system
	trigger1=playerid(root,id+2),ishelper=0 && playerid(root,id+2),alive && playerid(root,id+2),teamside=teamside && playerid(root,id+2),sysfvar(4)<1
	trigger1=var(15)!=root,id+2
	var(15)=root,id+2  +(var(9):=(var(9)|262144))*0
[state 0] ;;+3
	type=varset
	trigger1=numpartner>2 && roundstate=2 && playeridexist(root,id+3)
	trigger1=(var(7)&1024) ;; system_switch - tag system
	trigger1=playerid(root,id+3),ishelper=0 && playerid(root,id+3),alive && playerid(root,id+3),teamside=teamside && playerid(root,id+3),sysfvar(4)<1
	trigger1=var(15)!=root,id+3
	var(15)=root,id+3  +(var(9):=(var(9)|262144))*0
;---
;>>sys::partner_id_get2
[state 0]
	type=varset
	trigger1=var(15)!=root,id
	trigger1=root,alive && roundstate=2 && root,sysfvar(4)<1
	var(15)=(root,id)  +(var(9):=(var(9)|262144))*0 ;; redraw_lifebars

;---
;>>sys::partner_id_get3
;[state 0]
;	type=removeexplod
;	id=490000 ;; draw_lifebar_flag = lifebar_shadow
;	triggerall=!(var(7)&1024) ;; system_switch - tag system
;	triggerall=numpartner && roundstate=2 && playerid(var(15)),alive=0
;	triggerall=1|| (var(9):=(var(9)|262144))*0 ;; redraw_lifebars
;	trigger1=                (var(14):=(((var(15)-sysvar(0)+1)%(numpartner+1))+sysvar(0))) && playeridexist(var(14))
;	trigger1=playerid(var(14)),alive && playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside
;	trigger1=var(15):=var(14) +(var(9):=(var(9)|262144))*0 ;; redraw_lifebars
;	trigger2=numpartner>1 && (var(14):=(((var(15)-sysvar(0)+2)%(numpartner+1))+sysvar(0))) && playeridexist(var(14))
;	trigger2=playerid(var(14)),alive && playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside
;	trigger2=var(15):=var(14) +(var(9):=(var(9)|262144))*0 ;; redraw_lifebars
;	trigger3=numpartner>2 && (var(14):=(((var(15)-sysvar(0)+3)%(numpartner+1))+sysvar(0))) && playeridexist(var(14))
;	trigger3=playerid(var(14)),alive && playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside
;	trigger3=var(15):=var(14) +(var(9):=(var(9)|262144))*0 ;; redraw_lifebars
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1

;;---
;;>>@Config.Tag_FirstPlayer_Select>>
;>>sys::first_player_select
;; æ”­ƒLƒƒƒ‰‘I‘ğ
;[state 0]
;	type=explod
;	trigger1=numpartner && roundstate<2 && var(22)=4 && root,stateno!=5500
;	trigger1=(root,command="holdfwd" || root,command="holdback") && (var(7)&1024) ;; system_switch
;	trigger1=1|| var(15):=(root,id)+(root,command="holdfwd")+(root,command="holdback")-
;	postype=p1
;	facing=root,facing
;	anim=const(FxTagSwitchAI)+teamside
;	pos= floor(playerid(var(15)),pos x-pos x)*facing , floor(playerid(var(15)),pos y-pos y +playerid(var(15)),const(size.head.pos.y)-12*fvar(0))
;	scale=0.25,0.25
;	sprpriority=6
;	ownpal=1
;	bindtime=-1
;	removetime=1

;---
[state 0] ;;<-for safety
	type=varset
	trigger1=!playeridexist(var(15))
	var(15)=(root,id)  +(var(9):=(var(9)|262144))*0 ;; redraw_lifebars

;---
;>>sys::oppenent_id_get1
; current enemy/oppenents ID ; 相手識別番号
[state 0]
	type=varset
	trigger1=numenemy
	trigger1=enemy,sysfvar(0)>0 && playeridexist(floor(enemy,sysfvar(0)))
	trigger1=var(16)!=playerid(floor(enemy,sysfvar(0))),var(15) && playerid(floor(enemy,sysfvar(0))),var(0)=90900
	var(16)=playerid(floor(enemy,sysfvar(0))),var(15)


;==========================
;;>>@Config.Tag_Command>>
; Tag-Mode Command:: "Change","Partner-Assist" (v48)
; ƒ^ƒbƒOƒ‚[ƒh‘€ìƒRƒ}ƒ“ƒh

;==========================
;;>>@Config.Tag_Command>>
; Tag-Mode Command:: "Change","Partner-Assist" (v48)
; タッグモード時操作コマンド
;>>sys::tag_mode_cmd_reset
[state 0]
	type=varset
	trigger1=var(48)
	var(48)=0 ;; reset

;>>sys::tag_mode_cmd_reset
[state 0]
	type=varset
     trigger1 = map(thirdguy)>0 && map(thirdguycounter)<2
	var(49)=map(thirdguy);
     value = 1
;>>sys::tag_mode_cmd_reset
[state 0]
	type=mapadd
     trigger1 =  map(thirdguy)>0 && map(thirdguycounter)<2
	map ="thirdguycounter"
     value = 1
 
;; change [v48=11] ; Œğ‘Ö
;>>sys::tag_mode_cmd_change
[state 0]
	type=varset
	triggerall=roundstate=2 && numpartner && var(22)=4 && !var(48)
	triggerall=var(15)!=var(49) && playeridexist(var(49))
	triggerall=playerid(var(49)),stateno=[190191,190192] ;; stand-by ;; ‘Ò‹@’†
	;;--- player-controlled ;; ‘€ìŒğ‘Ö
     trigger1 = const(Default.Enable.Tag)=1	
     trigger1= (root,command="shift_fwd") || (root,command="shift_back") 
	trigger1=AILevel<1 && var(28)>200 ;; helpers_timer ; “à•”Œo‰ßŠÔ
	;;--- ai
     trigger2 = const(Default.Enable.Tag)=1	
	trigger2=AILevel>0 && var(28)>200 ;; helpers_timer ; “à•”Œo‰ßŠÔ
	trigger2=playerid(var(15)),sysfvar(4)<1 && (random%50=0) && playerid(var(15)),life<playerid(var(49)),life
	;;--- forced change (not-alive, stand-by) ;; ‹­§Œğ‘ÖiI~A‘Ò‹@’†j
	trigger3=playeridexist(var(15))
	trigger3=(playerid(var(15)),alive=0 && playerid(var(15)),stateno=5150) || (playerid(var(15)),stateno=[190191,190192])
	;;---
	var(48)=11
; 
;;; change-interrupted [v48=21] ; ??????????‘?
;;>>sys::tag_mode_cmd_change_interrupted
[state 0] ;; "Switch-Canceling"
	type=varset
	 triggerall = Statetype!=A
    triggerall=roundstate=2 && numpartner
     trigger1=playerid(var(49)),stateno=190192 ;; stand-by + Assist-OK ;; ‘??@’†+?x‰‡OK
	;---
	 trigger1= (root,command="shift_fwd") || (root,command="shift_back") 
       trigger1=power>=500 ;; player_cost_sc0 ;; ?p???[??”???
	;---
       trigger1 = (playerid(var(15)),stateno<const(superAttacksStartStateno))
       trigger1=playerid(var(15)),sysfvar(4)<1 && playerid(var(15)),alive 
    trigger1=playerid(var(15)),movetype =A  && !(Hitdefattr = SCA, HT, HA, HP) && playerid(var(15)),Movecontact  || playerid(var(15)),movetype!=H && playerid(var(15)),Movecontact || playerid(var(15)),movetype!=H &&  playerid(var(15)),Numtarget > 0 
      trigger1=playerid(var(15)),target,movetype =H || playerid(var(15)),Movecontact 
 ;trigger1 =        playerid(var(15)), prevmovetype!= A  
 ;trigger1 = playerid(var(15)), prevstateno!= [120, 155]  
 trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrStandingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrAerialNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingSpecialThrow)
 trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingHyperThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingHyperThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialHyperThrow)  
trigger1 =  p2movetype=H
       trigger1 = AILevel < 1
       trigger2 = AILevel 
       trigger2 = playerid(var(15)),StateNo >= const(SpecialAttackAIStartStateno) &&playerid(var(15)),StateNo < const(SpecialAttackAIEnStateno) 
       ;trigger2 = playerid(var(15)),target,incustomstate=0 
       trigger2=p2movetype=H
       trigger2 = Random < (11 + ((MoveHit)*5) + ((Life < Lifemax/6)*5))
      var(48)=20
       ignorehitpause=1
 



[state 0]
	type=varset
 triggerall=  var(15)!=var(49) && playeridexist(var(49)) 
 triggerall =playerid(var(49)),stateno=[190190,190192]  
 triggerall =playerid(var(15)),sysfvar(4)<1 && playerid(var(15)),alive &&  (playerid(var(15)),stateno<=const(superAttacksEndStateno))
  trigger1= power >= 500 && teamside = 1 && (playerID(56),Alive && playerID(57),Alive && playerID(58),Alive)
trigger1 =playerid(var(15)),movetype=A 
trigger1= (root,command="superassist_fwd") || (root,command="superassist_back")  && var(28)>200 && (var(7)&1024)||(var(51)>0 && var(28)>200 && (var(7)&1024) && playerid(var(15)),sysfvar(4)<1 && (random%50=0) && playerid(var(15)),life<playerid(var(49)),life ) 
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrStandingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrAerialNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingSpecialThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingHyperThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingHyperThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialHyperThrow)  
trigger1 = !AILevel  
trigger2 = AILevel 
trigger2 = playerid(var(15)),StateNo >=const(superAttacksStartStateno) && playerid(var(15)),StateNo < const(superAttacksEndStateno)
trigger2 = playerid(var(15)),target,incustomstate=0 
trigger2=p2movetype=H
trigger2 = Random < (11 + ((MoveHit)*5) + ((Life < Lifemax/6)*5))
var(48)  =15;
ignorehitpause =1 

[state 0]
	type=varset
 triggerall= var(15)!=var(49) && playeridexist(var(49))  
 triggerall= playerid(var(49)),stateno=[190190,190192] 
 triggerall =playerid(var(15)),sysfvar(4)<1 && playerid(var(15)),alive &&  (playerid(var(15)),stateno<=const(superAttacksEndStateno))
trigger1= power >= 500 && teamside = 2 && (enemy,teammode = tag || enemy,teammode = turns) && (playerID(59),Alive && playerID(60),Alive && playerID(61),Alive) 
trigger1= playerid(var(15)),movetype=A 
trigger1= (root,command="superassist_fwd") || (root,command="superassist_back") && var(28)>200 && (var(7)&1024)||(var(51)>0 && var(28)>200 && (var(7)&1024) && playerid(var(15)),sysfvar(4)<1 && (random%50=0) && playerid(var(15)),life<playerid(var(49)),life ) 
 trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrStandingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrAerialNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingSpecialThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingHyperThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingHyperThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialHyperThrow)  
trigger1 = !AILevel  
trigger2 = AILevel 
trigger2 = playerid(var(15)),StateNo >=const(superAttacksStartStateno) && playerid(var(15)),StateNo < const(superAttacksEndStateno)
trigger2 = playerid(var(15)),target,incustomstate=0 
trigger2=p2movetype=H
trigger2 = Random < (11 + ((MoveHit)*5) + ((Life < Lifemax/6)*5))
var(48)=15;
ignorehitpause =1 

[state 0]
	type=varset
 triggerall = var(15)!=var(49) && playeridexist(var(49))  
 triggerall =playerid(var(49)),stateno=[190190,190192]  
 triggerall =playerid(var(15)),sysfvar(4)<1 && playerid(var(15)),alive &&  (playerid(var(15)),stateno<=const(superAttacksEndStateno))
 trigger1 =power >= 500 && teamside = 2 && enemy,teammode = simul && (playerID(58),Alive && playerID(59),Alive && playerID(60),Alive) 
trigger1 =playerid(var(15)),movetype=A 
trigger1= (root,command="superassist_fwd") || (root,command="superassist_back")  && var(28)>200 && (var(7)&1024)||(var(51)>0 && var(28)>200 && (var(7)&1024) && playerid(var(15)),sysfvar(4)<1 && (random%50=0) && playerid(var(15)),life<playerid(var(49)),life ) 
 trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrStandingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrAerialNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingSpecialThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingHyperThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingHyperThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialHyperThrow)  
trigger1 = !AILevel  
trigger2 = AILevel 
trigger2 = playerid(var(15)),StateNo >=const(superAttacksStartStateno) && playerid(var(15)),StateNo < const(superAttacksEndStateno)
trigger2 = playerid(var(15)),target,incustomstate=0 
trigger2=p2movetype=H
trigger2 = Random < (11 + ((MoveHit)*5) + ((Life < Lifemax/6)*5))
var(48)=15
ignorehitpause =1 
 

[state 0]
type=varset
 triggerall= var(15)!=var(49) && playeridexist(var(49))  
 triggerall = playerid(var(49)),stateno=[190190,190192]  
 triggerall =playerid(var(15)),sysfvar(4)<1 && playerid(var(15)),alive &&  (playerid(var(15)),stateno<=const(superAttacksEndStateno))
 trigger1 =power >= 500 && teamside = 2 && enemy,teammode = single && (playerID(57),Alive && playerID(58),Alive && playerID(59),Alive) 
trigger1 =playerid(var(15)),movetype=A 
trigger1= (root,command="superassist_fwd") || (root,command="superassist_back")   && var(28)>200 && (var(7)&1024)||(var(51)>0 && var(28)>200 && (var(7)&1024) && playerid(var(15)),sysfvar(4)<1 && (random%50=0) && playerid(var(15)),life<playerid(var(49)),life ) 
 trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrStandingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrAerialNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingSpecialThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingHyperThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingHyperThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialHyperThrow)  
trigger1 = !AILevel  
trigger2 = AILevel 
trigger2 = playerid(var(15)),StateNo >=const(superAttacksStartStateno) && playerid(var(15)),StateNo < const(superAttacksEndStateno)
trigger2 = playerid(var(15)),target,incustomstate=0 
trigger2=p2movetype=H
trigger2 = Random < (11 + ((MoveHit)*5) + ((Life < Lifemax/6)*5))
var(48)=15
ignorehitpause =1 



[state 0]
type=varset
 triggerall= var(15)!=var(49) && playeridexist(var(49))  
 triggerall = playerid(var(49)),stateno=190192
 triggerall =playerid(var(15)),sysfvar(4)<1 && playerid(var(15)),alive &&  (playerid(var(15)),stateno<=const(superAttacksEndStateno))

trigger1= (root,command="superassist_fwd") || (root,command="superassist_back")   && var(28)>200 && (var(7)&1024)||(var(51)>0 && var(28)>200 && (var(7)&1024) && playerid(var(15)),sysfvar(4)<1 && (random%50=0) && playerid(var(15)),life<playerid(var(49)),life ) 
 trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrStandingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrAerialNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingSpecialThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingHyperThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingHyperThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialHyperThrow)  
trigger1 = !AILevel  
trigger2 = AILevel 
trigger2 = playerid(var(15)),StateNo >=const(superAttacksStartStateno) && playerid(var(15)),StateNo < const(superAttacksEndStateno)
trigger2 = playerid(var(15)),target,incustomstate=0 
trigger2=p2movetype=H
trigger2 = Random < (11 + ((MoveHit)*5) + ((Life < Lifemax/6)*5))
var(48)=15
ignorehitpause =1 







;
;;>>sys::tag_hyper_cancel_change_interrupted
;[state 0] ;; "Tag-Canceling"
;type=varset
;triggerall=  var(15)!=var(49) && playeridexist(var(49)) 
;triggerall= playerid(var(49)),stateno=[190190,190192] 
;triggerall= playerid(var(15)),sysfvar(4)<1 && playerid(var(15)),alive  
;trigger1= (playerid(var(15)),stateno =[const(superAttacksStartStateno),const(superAttacksEndStateno]))
;trigger1= (root,command="superassist_fwd") || (root,command="superassist_back")  
;trigger1=  power >= 500 && teamside = 1 && (playerID(56),Alive && playerID(57),Alive && playerID(58),Alive) 
;trigger1= playerid(var(15)),movetype=A 
;trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrStandingNormalThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingNormalThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrAerialNormalThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingSpecialThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingSpecialThrow)
;trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialSpecialThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingHyperThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingHyperThrow)
;trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialHyperThrow)  
;trigger1 = !AILevel  
;trigger2 = AILevel 
;trigger2 = playerid(var(15)),StateNo >=const(superAttacksStartStateno) && playerid(var(15)),StateNo < const(superAttacksEndStateno)
;trigger2 = playerid(var(15)),target,incustomstate=0 
;trigger2=p2movetype=H
;trigger2 = Random < (11 + ((MoveHit)*5) + ((Life < Lifemax/6)*5))
;var(48) =15;
;ignorehitpause = 1
; ;>>sys::tag_hyper_cancel_change_interrupted
;[state 0] ;; "Tag-Canceling"
;type=varset
;triggerall=  var(15)!=var(49) && playeridexist(var(49)) 
;triggerall= playerid(var(49)),stateno=[190190,190192] 
;triggerall= playerid(var(15)),sysfvar(4)<1 && playerid(var(15)),alive  
;trigger1= (playerid(var(15)),stateno =[const(superAttacksStartStateno),const(superAttacksEndStateno]))
;trigger1= (root,command="superassist_fwd") || (root,command="superassist_back")  
;trigger1 = power >= 500  
;;trigger1= playerid(var(15)),movetype=A 
;trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrStandingNormalThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingNormalThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrAerialNormalThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingSpecialThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingSpecialThrow)
;trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialSpecialThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingHyperThrow)
;trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingHyperThrow)
;trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialHyperThrow)  
;trigger1 = !AILevel 
;trigger2 = AILevel 
;trigger2 = playerid(var(15)),StateNo >=const(superAttacksStartStateno) && playerid(var(15)),StateNo < const(superAttacksEndStateno)
;trigger2 = playerid(var(15)),target,incustomstate=0 
;trigger2=p2movetype=H
;trigger2 = Random < (11 + ((MoveHit)*5) + ((Life < Lifemax/6)*5))
;ignorehitpause=1
;var(48)=15;
; 
;; striker-call / summon [v48=12] ; ƒXƒgƒ‰ƒCƒJ[ŒÄo
;>>sys::tag_mode_cmd_call
[state 0]
	type=varset
	triggerall=roundstate=2 && numpartner && var(22)=4 && !var(48) && (var(7)&2048) ;; system_switch
	triggerall=playerid(var(15)),sysfvar(4)<1 && playerid(var(15)),movetype!=h && playerid(var(15)),gethitvar(isbound)=0 && (playerid(var(15)),stateno!=[190190,190199])
	triggerall = (playerid(var(15)),stateno<const(superAttacksStartStateno));;--- player-controlled
	; trigger1 =        playerid(var(15)), prevmovetype!= A  
 ;trigger1 = playerid(var(15)), prevstateno!= [120, 155]  
 trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrStandingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrAerialNormalThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingSpecialThrow)
 trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialSpecialThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrStandingHyperThrow)
trigger1 =  playerid(var(15)), gethitvar(attr)!= const(AttrCrouchingHyperThrow)
trigger1 = playerid(var(15)), gethitvar(attr)!= const(AttrAerialHyperThrow)  
trigger1=((root,command="assist_fwd") || (root,command="assist_back")) && var(59)<1 ;;<- player-controlled
	;;--- ai
	trigger2=AILevel>0 && var(15)!=var(49) && playeridexist(var(49))
	trigger2=playerid(var(15)),sysfvar(4)<1 && (random%180=0) && random>(playerid(var(49)),life-playerid(var(15)),life)*100
	;;---
	var(48)=12


;;--- search partner for change or strike
; v14: temp v49: partners id
;; メモ：
;;   パートナー検索処理です、
;;   もっと条件を付けて、必要に応じて実行させると良いのですが、 オイラのスキルの限界です(- -;
;;   例(ex)によって、パートナーの総数を無限に増やせます。ご自分で改良なり、工夫なりして使ってください。

;>>sys::partner_id_search_def
[state 0]
	type=null
	triggerall=numpartner && var(22)=4 && (var(48)=12 || var(15)=var(49) || (playerid(var(15)),alive=0 && playerid(var(15)),stateno=5150 && playerid(var(15)),time=1))
	;;--- 1-partner
	trigger1=var(14):= var(15) -(var(15)-(root,id)>=numpartner  )*(numpartner+1) +1
	trigger1=playeridexist(var(14))
	trigger1=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
	trigger1=var(49):=var(14)
	;;--- 2-partner
	trigger2=var(14):= var(15) -(var(15)-(root,id)>=numpartner-1)*(numpartner+1) +2
	trigger2=numpartner>1 && playeridexist(var(14))
	trigger2=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
	trigger2=var(49):=var(14)
	;;--- 3-partner
	trigger3=var(14):= var(15) -(var(15)-(root,id)>=numpartner-2)*(numpartner+1) +3
	trigger3=numpartner>2 && playeridexist(var(14))
	trigger3=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
	trigger3=var(49):=var(14)
	;;--- #-partner
;ex;	trigger#=var(14):= var(15) -(var(15)-(root,id)>=numpartner-(#-1))*(numpartner+1) +#
;ex;	trigger#=numpartner>(#-1) && playeridexist(var(14))
;ex;	trigger#=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
;ex;	trigger#=var(49):=var(14)


;>>sys::partner_id_search_fwd
[state 0]
	type=null
	triggerall=numpartner && var(22)=4 && (var(48)=12 || var(15)=var(49) || (playerid(var(15)),alive=0 && playerid(var(15)),stateno=5150 && playerid(var(15)),time=1))
	triggerall=(root,command="assist_fwd") 
	;;--- 1-partner
	trigger1=var(14):= var(15) +(var(15)-(root,id)<1)*(numpartner+1) -1
	trigger1=playeridexist(var(14))
	trigger1=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
	trigger1=var(49):=var(14)
	;;--- 2-partner
	trigger2=var(14):= var(15) +(var(15)-(root,id)<2)*(numpartner+1) -2
	trigger2=numpartner>1 && playeridexist(var(14))
	trigger2=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
	trigger2=var(49):=var(14)
	;;--- 3-partner
	trigger3=var(14):= var(15) +(var(15)-(root,id)<3)*(numpartner+1) -3
	trigger3=numpartner>2 && playeridexist(var(14))
	trigger3=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
	trigger3=var(49):=var(14)
	;;--- #-partner
;ex;	trigger#=var(14):= var(15) -(var(15)-(root,id)<#)*(numpartner+1) -#
;ex;	trigger#=numpartner>(#-1) && playeridexist(var(14))
;ex;	trigger#=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
;ex;	trigger#=var(49):=var(14)
    ignorehitpause=1

;>>sys::partner_id_search_change1 ;; shift_fwd (default)
[state 0]
	type=null
	triggerall=(var(48)=11 || var(48)=15 || var(48)=20)
	;;--- 1-partner
	trigger1=var(14):= var(15) +(var(15)-(root,id)<1)*(numpartner+1) -1
	trigger1=playeridexist(var(14))
	trigger1=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && (playerid(var(14)),stateno=[190191,190192])
	trigger1=var(49):=var(14)
	;;--- 2-partner
	trigger2=var(14):= var(15) +(var(15)-(root,id)<2)*(numpartner+1) -2
	trigger2=numpartner>1 && playeridexist(var(14))
	trigger2=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && (playerid(var(14)),stateno=[190191,190192])
	trigger2=var(49):=var(14)
	;;--- 3-partner
	trigger3=var(14):= var(15) +(var(15)-(root,id)<3)*(numpartner+1) -3
	trigger3=numpartner>2 && playeridexist(var(14))
	trigger3=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && (playerid(var(14)),stateno=[190191,190192])
	trigger3=var(49):=var(14)
	;;--- #-partner
;ex;	trigger#=var(14):= var(15) -(var(15)-(root,id)<#)*(numpartner+1) -#
;ex;	trigger#=numpartner>(#-1) && playeridexist(var(14))
;ex;	trigger#=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
;ex;	trigger#=var(49):=var(14)

;;>>sys::partner_id_search_change2 ;; shift_back
[state 0]
	type=null
     triggerall=(var(48)=11|| var(48)=20 || var(48)=15)&& root,command="shift_back"
;ikemen	triggerall=(var(48)=11 || var(48)=21) && ((root,command="shift_back") || (root,command="assist_back"))
	;;--- 1-partner
	trigger1=var(14):= var(15) -(var(15)-(root,id)>=numpartner  )*(numpartner+1) +1
	trigger1=playeridexist(var(14))
	trigger1=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && (playerid(var(14)),stateno=[190191,190192])
	trigger1=var(49):=var(14)
	;;--- 2-partner
	trigger2=var(14):= var(15) -(var(15)-(root,id)>=numpartner-1)*(numpartner+1) +2
	trigger2=numpartner>1 && playeridexist(var(14))
	trigger2=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && (playerid(var(14)),stateno=[190191,190192])
	trigger2=var(49):=var(14)
	;;--- 3-partner
	trigger3=var(14):= var(15) -(var(15)-(root,id)>=numpartner-2)*(numpartner+1) +3
	trigger3=numpartner>2 && playeridexist(var(14))
	trigger3=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && (playerid(var(14)),stateno=[190191,190192])
	trigger3=var(49):=var(14)
	;;--- #-partner
;ex;	trigger#=var(14):= var(15) -(var(15)-(root,id)>=numpartner-(#-1))*(numpartner+1) +#
;ex;	trigger#=numpartner>(#-1) && playeridexist(var(14))
;ex;	trigger#=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && (playerid(var(14)),stateno=[190191,190192])
;ex;	trigger#=var(49):=var(14)





; Get Tag-Team assist-stateno (v53-56)
; ƒ^ƒbƒOx‰‡ƒXƒe[ƒg”Ô†æ“¾
;sys::tag_assist_stno-1
[state 0]
	type=varset
	trigger1=(playerid(var(49)),stateno=190193) && (playerid(var(49)),sysvar(1)>0)
	var(53-sysvar(0)+var(49)%4)=playerid(var(49)),sysvar(1)
[state 0]
	type=varset
	trigger1=(playerid(var(49)),stateno=190193) && (playerid(var(49)),Const(StateTagAssist))
	var(53-sysvar(0)+var(49))=playerid(var(49)),Const(StateTagAssist)

 
;==========================
; Message / ”­M v09,38-39,53
;==========================
; No	Color	Message
; --	---	---
; 01	Yellow	First Attack	(æ§UŒ‚)
; 02	Yellow	Counter Hit.	(Œã”­UŒ‚)
; 03	Blue..	Technical...	(‹ZI)
; 04	White.	Blocking....	(ƒuƒ[ƒLƒ“ƒO)
; 05	Red...	Just Defenced	(ƒWƒƒƒXƒgƒfƒBƒtƒFƒ“ƒX)
; 06	Green.	Reversal....	(•œ‹A)
; 07	Red...	Danger......	(ŠëŒ¯)
; 08	Red...	Stun........	(á¿ò)
; 10	Green.	Good........	(˜A‘±ƒqƒbƒg•]‰¿ 1/6)
; 11	Blue..	Great.......	(2/6)
; 12	Yellow	Beautiful...	(3/6)
; 13	Red...	Fantastic...	(4/6)
; 14	White.	Marvelous...	(5/6)
; 15	Color.	M.U.G.E.N...	(6/6 ÅãˆÊ)
; 20	Blue..	Partner Assist	(—»‹@x‰‡/ƒXƒgƒ‰ƒCƒJ[”­“®)
; 21	Green.	Change.....	(Œğ‘Ö)
; 22	Red...	Down.......	(“|‚ê)
; 23	White.	P-Asisst OK	(—»‹@x‰‡€”õ‚æ‚µ/ƒXƒgƒ‰ƒCƒJ[‘Ò‹@)

;--- msg type set
;---
;sys::msg_counter_hit
[state 0]
	type=varset
	trigger1=var(38)<99999999
	;trigger1=(var(9)&49152)=49152
	var(38)=var(38)*100+2
;---
;sys::msg_first_attack
;[state 0]
;	type=varset
;	triggerall=var(38)<99999999 && roundstate=2
;;__;	trigger1=!(var(9)&32)&&(var(9)&64)
;	trigger1=(var(9)&96)=64
;	var(38)=var(38)*100+1
;;---
;;sys::msg_technical
;[state 0]
;	type=varset
;	triggerall=var(38)<99999999 && roundstate=2
;	triggerall=(playerid(var(15)),time=2) && (var(26)!=playerid(var(15)),time)
;	trigger1=(playerid(var(15)),stateno=5201) || (playerid(var(15)),stateno=5210) ;;<-recovery
;	trigger2=(playerid(var(15)),stateno=115) && (playerid(var(15)),prevstateno=5201)
;	trigger3=(playerid(var(15)),prevstateno=5112) ;;<-quick up
;	trigger4=(playerid(var(15)),stateno=190130) && (playerid(var(15)),numtarget=0) ;;<-against throw
;	trigger5=(playerid(var(15)),stateno=110 || playerid(var(15)),stateno=115) && (playerid(var(15)),prevstateno=[150,152]) ;;<-guard cancel
;	var(38)=var(38)*100+3
;;---



;sys::msg_change 21
;[state 0]
;	type=varset
;	trigger1=var(38)<99999999 && roundstate=2 && numpartner
;	trigger1=playerid(var(15)),stateno=190193 && playerid(var(15)),time=2 && var(26)!=playerid(var(15)),time
;	var(38)=var(38)*100+21
;sys::msg_p-assist_ok 23
;sys::msg_partner_assist 20
;[state 0]
;	type=varset
;	trigger1=var(38)<99999999 && roundstate=2 && numpartner
;	trigger1=var(15)!=var(49) && (playerid(var(49)),stateno=[190192,190193]) && playerid(var(49)),time=2 && var(27)!=playerid(var(49)),time
;	var(38)=var(38)*100+20 +(playerid(var(49)),stateno=190192)*3
;---
; player_alive_flag (8-11th bit) ; ƒvƒŒ[ƒ„[¶‘¶Šm”F
;sys::flag_player_alive
[state 0] ; on/reset/alive
	type=varset
	trigger1=numpartner && roundstate=2
	trigger1=(var(8)&(256*(2**( var(14):=time%(numpartner+1) )))) && playerid(sysvar(0)+var(14)),alive
	var(8)=var(8)^(2**(8+var(14)))
;sys::helper::down
;[state 0]
;	type=helper
;	trigger1=numpartner && roundstate=2 && !numhelper(180020) && var(38)<99999999
;	trigger1=!(var(8)&(256*(2**( var(14):=time%(numpartner+1) )))) && playerid(sysvar(0)+var(14)),alive=0
;	trigger1=playerid(sysvar(0)),alive || playerid(sysvar(0)+1),alive || playerid(sysvar(0)+2*(numpartner>1) ),alive || playerid(sysvar(0)+3*(numpartner>2) ),alive
;	id=180020
;	stateno=180020  +(var(8):=(var(8)|(256*(2**var(14)))))*0  +(var(9):=(var(9)|262144))*0  +(var(38):=var(38)*100+22)*0
;	;--- dead / redraw_lifebars / msg_down
;	ownpal=1
;	supermovetime=88888
;	pausemovetime=88888
;---
;sys::msg_bk/jd
;[state 0]
;	type=varset
;	triggerall=var(38)<99999999 && roundstate=2
;	trigger1=playerid(var(15)),stateno=195500 && playerid(var(15)),time=2 && var(26)!=playerid(var(15)),time
;	var(38)=var(38)*100+4+(var(22)=3)  +(var(57):=var(57)+100) *0 ;;score/bonus_up
;;---
;;sys::msg_danger
;[state 0]
;	type=varset
;	triggerall=var(38)<99999999 && roundstate=2
;	trigger1=playerid(var(15)),stateno=190010 && playerid(var(15)),time=2 && var(26)!=playerid(var(15)),time ;;<-guard crush
;	trigger2=var(22)=2 && !(var(9)&8192) && (playerid(var(15)),life)<=(playerid(var(15)),lifemax)/3 ;;<-red life
;	var(38)=var(38)*100+7
;;---
;;sys::msg_stun
;[state 0]
;	type=varset
;	triggerall=var(38)<99999999 && roundstate=2
;	trigger1=playerid(var(15)),stateno=190116 && playerid(var(15)),time=2 && var(26)!=playerid(var(15)),time ;;<-dizzy state / stun
;	var(38)=var(38)*100+8
;---
; warnning sound / announcer.danger! (get danger)
;sys::sound_danger
;[state 0]
;	type=playsnd
;	trigger1=(var(38)%100=[7,8]) && (var(7)&64) ;; system_switch
;	value=f10200,1
;	channel=0
;	abspan=ifelse(teamside=1,-1,1)*facing*320
;---
;sys::msg_reversal
[state 0]
	type=removeexplod
	triggerall=var(38)<99999999 && roundstate=2 && playerid(var(15)),time=2 && (var(26)!=playerid(var(15)),time)
	trigger1=playerid(var(15)),stateno=190119 ;;recover
	trigger2=numexplod(1856852) && (playerid(var(15)),movetype=a) && (playerid(var(15)),stateno>=1000)
	id=1856852  +( var(38):=var(38)*100+6 )*0  +( var(57):=var(57)+500 )*0  ;;score/bonus_up
;sys::msg_reversal_checker
[state 0]
	type=explod
	triggerall=!numexplod(1856852)
	trigger1=(playerid(var(15)),stateno=151||playerid(var(15)),stateno=153||playerid(var(15)),stateno=5001||playerid(var(15)),stateno=5011) && playerid(var(15)),hitover
	trigger2=playerid(var(15)),stateno=5120 && playerid(var(15)),animtime=-1
	anim=0
	id=1856852
	scale=0,0
	removetime=5

;--- allocate pos_y(index) max=5 ; •`‰æ”Ô†(ˆÊ’u)‚ğŠ„‚è“–‚Ä‚é ŒÜŒÂ‚Ü‚Å
;sys::msg_pos_y
[state 0]
	type=varset
	trigger1=(var(38)%100>0) ;&& (var(7)&8) ;; system_switch
	var(39)=ifelse(!numexplod(66001),1,ifelse(!numexplod(66002),2,ifelse(!numexplod(66003),3,ifelse(!numexplod(66004),4,ifelse(!numexplod(66005),5,ifelse(!numexplod(66006),6,0))))))

;;>>@Config.Message_Pos>>
;sys::msg_draw ;; draw_messages
;[state 0] ; bg
;	type=explod
;	trigger1=(var(38)%100>0) && var(39) && !numexplod(66100+var(39))
;	id=66100+var(39)
;	anim=f66005+(var(38)%100)*10
;	space=screen
;	postype=left
;	sprpriority=var(46)+20
;	ownpal=1
;	pos=floor(ifelse(teamside=1,50*fvar(0),var(3)-50*fvar(0))), floor((76+var(39)*10)*fvar(0))
;	scale=0.5*ifelse(teamside=1,1,-1),0.15
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;sys::msg_change 21
[state 0]
	type=LifebarAction
     trigger1=roundstate=2 && numpartner
	trigger1=playerid(var(15)),stateno=190193 && playerid(var(15)),time=2 && var(26)!=playerid(var(15)),time
	spr = const(MsgPartnerChange)
     top =1
;[state 0]
;	type=varset
;	trigger1=var(38)<99999999 && roundstate=2 && numpartner
;	trigger1=var(15)!=var(49) && (playerid(var(49)),stateno=[190192,190193]) && playerid(var(49)),time=2 && var(27)!=playerid(var(49)),time
;	var(38)=var(38)*100+20 +(playerid(var(49)),stateno=190192)*3
;---

;sys::msg_change 21
[state 0]
	type=LifebarAction
     trigger1=roundstate=2 && numpartner
	trigger1=playerid(var(15)),stateno=190197 && playerid(var(15)),time=2 && var(26)!=playerid(var(15)),time
	spr = const(MsgActiveSwitch)
     top =1
;sys::msg_change 21
[state 0]
	type=LifebarAction
     trigger1=roundstate=2 && numpartner
	trigger1=var(15)!=var(49) && (playerid(var(49)),stateno=[190192,190193]) && playerid(var(49)),time=2 && var(27)!=playerid(var(49)),time
	spr = const(MsgPartnerAssist)+(playerid(var(49)),stateno=190192)*3
     top =1
 ;sys::msg_change 21
;[state 0]
;	type=LifebarAction
;     trigger1=roundstate=2 && numpartner
;;&& !numhelper(180020) && var(38)<99999999
;	trigger1= playerid(var(15)),alive=0  
;;trigger1= playerid(sysvar(0)+var(14)),alive=0
;	;trigger1=(playerid(sysvar(0)),alive=0 && playerid(sysvar(0)),stateno=5150) || (playerid(sysvar(0)),sysfvar(4)>2)
;;trigger1=playerid(sysvar(0)),alive || playerid(sysvar(0)+1),alive || playerid(sysvar(0)+2*(numpartner>1) ),alive || playerid(sysvar(0)+3*(numpartner>2) ),alive
;	spr= const(MsgPartnerDown)
;     top =1
 ;---
[state 0]
	type=LifebarAction
	trigger1=roundstate=2 && numpartner && playeridexist(sysvar(0))   
	trigger1=(playerid(sysvar(0)),alive=0 && playerid(sysvar(0)),stateno=5150) ;|| (playerid(sysvar(0)),sysfvar(4)>0)
	spr= const(MsgPartnerDown)
     top =1
     persistent=0

;[state 0] ; msg
;	type=explod
;     trigger1=var(38)<99999999 && roundstate=2 && numpartner
;	;trigger1=(var(38)%100>0) && var(39) && !numexplod(66000+var(39))
;	id=66000+var(39)
;	anim=Const(FXAssistOK);f66000+(var(38)%100)*10+teamside
;	space=screen
;	postype=left
;	sprpriority=var(46)+21
;	ownpal=1
;	pos=floor(ifelse(teamside=1,50*fvar(0),var(3)-50*fvar(0))), floor((76+var(39)*10-6)*fvar(0))
;	scale=0.25,0.25
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1

;sys::msg_p-assist_ok 23
;sys::msg_partner_assist 20
;[state 0]
;	type=varset
;	trigger1=var(38)<99999999 && roundstate=2 && numpartner
;	trigger1=var(15)!=var(49) && (playerid(var(49)),stateno=[190192,190193]) && playerid(var(49)),time=2 && var(27)!=playerid(var(49)),time
;	var(38)=var(38)*100+20 +(playerid(var(49)),stateno=190192)*3

;sys::msg_p-assist_ok 23
;sys::msg_partner_assist 20
;[state 0]
;	type=varset
;	trigger1=var(38)<99999999 && roundstate=2 && numpartner
;	trigger1=var(15)!=var(49) && (playerid(var(49)),stateno=[190192,190193]) && playerid(var(49)),time=2 && var(27)!=playerid(var(49)),time
;	var(38)=var(38)*100+20 +(playerid(var(49)),stateno=190192)*3
;---
;sys::rank_get_tech1
[state 0]
	type=varadd
	triggerall=roundstate=2 && var(38)
	trigger1=(var(38)%100=[1,6])
	fvar(5)=0.025

;---
;sys::msg_id_init ;; (right_shift)
[state 0]
	type=varset
	trigger1=var(38)
	var(38)=var(38)/100
;
;==========================
; against throw ; “Š‚°ŠO‚µ”»’è v17
;==========================
;sys::counter_against_throw
;[state 0]
;	type=varset
;	trigger1=roundstate=2 && numenemy
;	trigger1=(enemynear,ctrl) || (enemynear,stateno=[120,159])
;	var(17)=10
;[state 0]
;	type=varadd
;	trigger1=var(17)>0 && numenemy
;	trigger1=(enemynear,gethitvar(isbound)=0)
;	var(17)=-1
;
;==========================
; life setting ; ƒ‰ƒCƒtİ’è
;==========================
; indicate life bar (3rd bit) v10,40-43 ; ƒ‰ƒCƒtƒo[•\¦ƒXƒCƒbƒ`
;sys::lifebar_display_switch
;[state 0] ; on
;	type=varset
;	trigger1=!(var(9)&4) && roundstate=2
;	var(9)=var(9)|4
;[state 0] ; off
;	type=varset
;	triggerall=(var(9)&4)
;	trigger1=(roundstate!=2) || win || lose || drawgame || (var(9)&4096)
;	trigger2=playerid(var(15)),numexplod(920861) ;; switch id
;	trigger3=numenemy
;	trigger3=enemy,numexplod(920861) ;; switch id
;	var(9)=var(9)^4
;
;
;------------------------
; getting damage switch (5th bit) ; ƒ_ƒ[ƒW”»’è
;sys::lifebar_get_damage_switch
;[state 0] ; off
;	type=varset
;	trigger1=(var(9)&16)
;	var(9)=var(9)^16
;[state 0] ; on
;	type=varset
;	triggerall=!(var(9)&16) && (playerid(var(15)),ctrl=0)
;	trigger1=(playerid(var(15)),movetype=h) || (playerid(var(15)),gethitvar(isbound))
;	trigger2=(playerid(var(15)),stateno=[5000,5120]) || (playerid(var(15)),stateno=[190110,190116]) ; stun/dizzy
;	trigger3=(playerid(var(15)),gethitvar(hittime)>0)
;	var(9)=var(9)|16 ;;<- damage
;
;
;------------------------
;------------------------
;; [OPTIONS]
;sys::options_noKO-off (16th bit,17th bit)
;[state 0] ; opt-noko-off
;	type=varset
;	trigger1=(var(9)&65536)
;	trigger1=!(var(9)&16) ;;get_damage_flag
;	var(9)=var(9)^65536
;
;sys::options_mod-life-stop
;[state 0] ; opt-mod-life-off
;	type=varset
;	triggerall=(var(9)&131072) && !(var(9)&65536)
;	trigger1=var(41)<=(playerid(var(15)),life) ;;life-recover/damage
;	trigger2=playerid(var(15)),movetype=h
;	trigger2=playerid(var(15)),stateno!=[120,159] ;;guard
;	trigger2=playerid(var(15)),stateno!=195500 ;;bk/jd
;	var(9)=var(9)^131072
;
;sys::options_noko_set
;[state 0] ; opt-noko-on / opt-mod-life-on
;	type=varset
;	;;---
;	trigger1=playerid(var(15)),gethitvar(chainid)=8200
;op;	trigger1=playerid(var(15)),gethitvar(hitshaketime)>0
;	;---
;	trigger2=var(16)>0 && playeridexist(var(16))
;	trigger2=playerid(var(16)),stateno=8200 && playerid(var(16)),movehit=1
;	;---
;	;;---
;__;	var(9)=var(9)| 65536 ;;<-(1)opt-noko
;__;	var(9)=var(9)|131072 ;;<-(2)opt-mod-life
;	var(9)=var(9)|196608 ;;(1)+(2)
;
;sys::options_mod-life v23
;[state 0] ; off
;	type=varset
;	trigger1=var(23)
;	var(23)=0
;[state 0] ; mod-life
;	type=varset
;	triggerall=(var(9)&131072)
;	trigger1=var(41)>playerid(var(15)),life && playerid(var(15)),movetype!=h && (time%3=0)
;	trigger2=playerid(var(15)),life<=0
;	var(23)=1
;
;
;------------------------
;------------------------
; red life flag , under 1/3 (13th bit) ; Ô‘Ì—Í”»’èAO•ª‚ÌˆêˆÈ‰º
;sys::lifebar_red_switch
;[state 0] ; off
;	type=varset
;	trigger1=(var(9)&8192)
;	trigger1=(playerid(var(15)),life>playerid(var(15)),lifemax/3)
;	var(9)=var(9)^8192
;[state 0] ; on
;	type=varset
;	trigger1=!(var(9)&8192)
;	trigger1=(playerid(var(15)),life<=playerid(var(15)),lifemax/3)
;	var(9)=var(9)|8192
;
;
;------------------------
;------------------------
;;>>@Config.LifeBar_Draw>>
; draw life bar ; ƒ‰ƒCƒtƒo[•`‰æ
;------------------------
;sys::lifebar_cls0
; life-bar-bg ; ”wŒi
;[state 0]
;	type=removeexplod
;	trigger1=!(var(9)&4) || (roundstate!=2)
;	id=490000
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490000)
;	id=490010
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490000)
;	id=490020
; life-bar
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490000)
;	id=490200
; life-bar-under 1/3
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490000)
;	id=490202
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490000)
;	id=490210
; life-bar-light ; ƒ‰ƒCƒtƒo[ Œõ‘ò
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490000)
;	id=490220
; damage-bar
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490000)
;	id=490201
; face-bg / mask
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490000) || (var(9)&262144) ;;mod-face-flag
;	id=490600
; p2/partner-life-bar
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490600)
;	id=490601
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490600)
;	id=490602
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490600)
;	id=490603
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490600)
;	id=490604
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490600)
;	id=490605
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490600)
;	id=490606
;
;------------------------
;sys::lifebar_draw0
;sys::lifebar_d_shadow ; ”wŒi
;[state 0]
;	type=explod
;	trigger1=(var(9)&4) && (var(7)&256) ;; system_switch
;	trigger1=!numexplod(490000)
;	id=490000
;	anim=f201200
;	sprpriority=var(46)-1
;	ownpal=1
;	space=screen
;	postype=left
;	pos=var(31),var(32)
;	facing=ifelse(teamside=1,1,-1)
;	removetime=-1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;
;---
;sys::lifebar_d_mod-life_bar ; ƒ‰ƒCƒt•Ï—Êƒo[
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(490000) ;;<- no-life-bars
;	trigger2=!(var(9)&131072) ;;<-opt-mod-life
;	id=490203
;[state 0]
;	type=explod
;	trigger1=var(41)>playerid(var(15)),life && var(41)>1
;	trigger1=numexplod(490000) && !numexplod(490203)
;	id=490203
;	anim=f201300
;	sprpriority=var(46)+1
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31),var(32)
;	scale=var(41)*1.00/(playerid(var(15)),lifemax) , ifelse(numpartner=1, 0.6, 1)
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	;;---
;	trans=addalpha
;	alpha=128,128
;
;---
;sys::lifebar_d_damage_bar ; ƒ_ƒ[ƒWƒo[
;[state 0]
;	type=explod
;	trigger1=numexplod(490000) && !numexplod(490201)
;	id=490201
;	anim=f201310
;	sprpriority=var(46)
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31),var(32)
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=1, ifelse(numpartner=1, 0.6, 1)
;
;sys::lifebar_d_damage_bar_scale ; ƒ_ƒ[ƒWƒo[•
;[state 0]
;	type=modifyexplod
;	trigger1=(var(9)&16) && var(42)!=(playerid(var(15)),life)
;	id=490201
;	scale=(var(42)*1.00/(playerid(var(15)),lifemax)) *(var(42)>1) *(numexplod(490203)=0)
;	trans=addalpha
;	alpha=(var(29):=128),256-var(29)
;sys::lifebar_d_damage_bar_alphablend ;; fade-out ; ƒ_ƒ[ƒWƒo[Á¸
;[state 0]
;	type=modifyexplod
;	trigger1=var(29)>=0
;	id=490201
;	trans=addalpha
;	alpha=(var(29):=var(29)-2),256-var(29) ;;+(gametime%5)*5*(var(29)>0)
;
;---
;sys::lifebar_d_lifebar ; ƒ‰ƒCƒtƒo[
;[state 0]
;	type=explod
;	trigger1=numexplod(490000) && !numexplod(490200)
;	id=490200
;	anim=f201300
;	sprpriority=var(46)+2
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31),var(32)
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=1, ifelse(numpartner=1, 0.6, 1)
;[state 0]
;	type=modifyexplod
;	trigger1=(var(8)&1)
;	id=490200
;	scale= (var(43)*1.00/(playerid(var(15)),lifemax)) *(var(43)>1)
;
;---
;sys::lifebar_d_bar_stun_alert ; ƒsƒˆƒŠŒx
;[state 0]
;	type=explod
;	trigger1=(var(50)>800) || (playerid(var(15)),anim=5300) || (playerid(var(15)),numhelper(403000)) ;;<- stun_counter || stun_state || dizzy_birds
;	trigger1=numexplod(490000) && (time%10=0)
;	id=490000
;	anim=f201312
;	sprpriority=var(46)+3
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31),var(32)
;	bindtime=-1
;	removetime=5
;	trans=sub
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=1, ifelse(numpartner=1, 0.6, 1)
;
;---
; lifebar under 1/3 ; ƒ‰ƒCƒtƒo[ 1/3ˆÈ‰ºŒx
;[state 0]
;	type=explod
;	trigger1=numexplod(490000) && !numexplod(490202)
;	id=490202
;	anim=f201312
;	sprpriority=var(46)+4
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31),var(32)
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=1, ifelse(numpartner=1, 0.6, 1)
;[state 0]
;	type=modifyexplod
;	trigger1=(var(8)&1)
;	id=490202
;	scale= (var(43)*1.00/(playerid(var(15)),lifemax)) *((playerid(var(15)),life)=[2,(playerid(var(15)),lifemax)/3])
;
;---
;sys::lifebar_d_lifebar_light ; ƒ‰ƒCƒtƒo[ Œõ‘ò
;[state 0]
;	type=explod
;	trigger1=numexplod(490000) && !numexplod(490220)
;	id=490220
;	anim=f201320
;	sprpriority=var(46)+3
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31),var(32)
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0]
;	type=modifyexplod
;	trigger1=numexplod(490220)
;	id=490220
;	scale=((playerid(var(15)),life)=((playerid(var(15)),lifemax)/3,(playerid(var(15)),lifemax)))
;
;;---
;;sys::lifebar_d_timer_bg; ŠÔBG
;[state 0]
;	type=explod
;	trigger1=teamside=1 && numexplod(490000) && !numexplod(490020)
;	id=490020
;	anim=f201203
;	sprpriority=var(46)+6
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(3)/2, var(32)+floor(6*fvar(0))
;	scale=0.5,0.075
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;
;---
;>>@Config.Face>>
;sys::lifebar_d_face_shadow ; Šç‰e
;[state 0]
;	type=explod
;	trigger1=(var(9)&4) && (var(7)&32768) ;; system_switch
;	trigger1=!numexplod(490600) && selfanimexist(909002)
;	id=490600
;	sprpriority=var(46)-8
;	ownpal=1
;	space=screen
;	postype=left
;	anim=f201301
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31)+floor(142*fvar(0))*ifelse(teamside=1,-1,1), var(32)+floor(25*fvar(0))
;	scale=1,1
;	removetime=-1
;	bindtime=-1
;
;---
;---face draw info ; Šç•`‰æî•ñ
;; fv20-36
;; player-main:     f20,f22: pos_x/y,  f24,f26: scale_x/y,  f28: alpha_SSS/DDD,  f32: spr-priority
;; player-partners: fv+1, f34-35: offset_x/y, f36: offset_scale_x&y
;
;---
;sys::lifebar_partner_life ; ƒp[ƒgƒi[ - ƒ‰ƒCƒt
;sys::lifebar_partner_life_1a (only one partners)
;[state 0]
;	type=explod
;	trigger1=numpartner=1 && numexplod(490600) && !numexplod(490604)
;	id=490604
;	anim=f201300
;	sprpriority=var(46)+3
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31),var(32)+floor(4*fvar(0))
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=1, 0.2
;---
;sys::lifebar_d_partner_lifebar_bg ; ƒp[ƒgƒi[ - ƒ‰ƒCƒt”wŒi
;[state 0]
;	type=explod
;	trigger1=numpartner
;	trigger1=( var(14):=var(15)+1+(time%numpartner) -(var(15)-(root,id)+1+(time%numpartner)>numpartner)*(numpartner+1) ) && playeridexist(var(14))
;	trigger1=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
;	trigger1=numexplod(490600) && !numexplod(490601+(time%numpartner))
;	id=490601+(time%numpartner)
;	anim=f201301
;	sprpriority=floor(fvar(33)) +(time%numpartner)*10 +1
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31)+floor(132*fvar(0))*ifelse(teamside=1,-1,1), var(32)+floor((28+(time%numpartner)*4)*fvar(0))
;	scale=1,(numpartner>1)*2
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;---
;sys::lifebar_d_partner_lifebar_bar ; ƒp[ƒgƒi[ - ƒ‰ƒCƒt
;[state 0]
;	type=explod
;	trigger1=numpartner>1
;	trigger1=playeridexist(var(14))
;	trigger1=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive
;	trigger1=numexplod(490600) && !numexplod(490604+(time%numpartner))
;	id=490604+(time%numpartner)
;	anim=f201302+var(14)%(numpartner+1)
;	sprpriority=floor(fvar(33)) +(time%numpartner)*10 +2
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31)+floor(132*fvar(0))*ifelse(teamside=1,-1,1), var(32)+floor((27+(time%numpartner)*4)*fvar(0))
;	scale=1,2
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;---
;sys::lifebar_partner_life_changed
;[state 0]
;	type=modifyexplod
;	trigger1=numpartner
;	trigger1=( var(14):=var(15)+1+(time%numpartner) -(var(15)-(root,id)+1+(time%numpartner)>numpartner)*(numpartner+1) ) && playeridexist(var(14))
;	trigger1=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside
;	id=490604+(time%numpartner)
;	scale=(playerid(var(14)),life)*1.0/(playerid(var(14)),lifemax)
;	trans=addalpha
;	alpha= ifelse(playerid(var(14)),stateno=190192, abs((playerid(var(14)),time%65)-32)*4+128, 256), 0
;sys::lifebar_partner_alive_changed
;[state 0]
;	type=removeexplod
;	trigger1=numpartner
;	trigger1=numexplod(490601+(time%numpartner)) && playeridexist(var(14))
;	trigger1=playerid(var(14)),ishelper=0 && playerid(var(14)),teamside=teamside && playerid(var(14)),alive=0
;	id=490601+(time%numpartner)  +(var(9):=(var(9)|262144))*0 ;;<-face_redraw_switch
;
;------------------------
;------------------------
;sys::sound_announcer_big_damage ;; (opponent)
; •ú‘—‰¹.‘åƒ_ƒ[ƒW (‘Šè)
;[state 0]
;	type=playsnd
;	triggerall=(roundstate=2) && (playerid(var(15)),life)>0 && var(40)-(playerid(var(15)),life)>228 ;; damage is more then 228
;	triggerall=(var(7)&64) ;; system_switch
;	trigger1=(playerid(var(15)),movetype=h) && (playerid(var(15)),gethitvar(guarded)=0) && (playerid(var(15)),stateno!=[190190,190199])
;	value=f10100,4 +(random%3)
;	channel=0
;	abspan=ifelse(teamside=1,1,-1)*facing*320
;
;------------------------
;------------------------
; combo indicator, code by k' d(^-^)b
; modified by MageKing17
; ƒRƒ“ƒ{”•\¦AK'‚³‚ñ‚æ‚èAMageKing17‚³‚ñ‰ü—Ç
; v11:	nums temp + now ([0-9999]*1000 + [0-9999])
; v12:	real combo + timer (timer[0-9999]*1000 + [0-9999])
; v13:	pos_x / timer
; v14:	temp: combo_counter / hittype
;--- ---
; >03 hits: good
; >05 hits: great
; >10 hits: beautiful
; >15 hits: fantastic
; >20 hits: marvelous
; >25 hits: m.u.g.e.n
;;--- announcer.combine + msg_combo (opponent)
;sys::sound_announcer_combo
;[state 0]
;	type=playsnd
;	trigger1=(roundstate=2) && var(38)<99999999 && numenemy
;	trigger1=(enemy,sysfvar(0)>0) && (playeridexist(floor(enemy,sysfvar(0))))
;	trigger1=(playerid(floor(enemy,sysfvar(0))),var(0)=90900) && (playerid(floor(enemy,sysfvar(0))),var(11)%10000<1) && (var(14):=(playerid(floor(enemy,sysfvar(0))),var(12)%10000)) && var(14)>2
;	trigger1=(var(38):=var(38)*100+10+(var(14)>4)+(var(14)>9)+(var(14)>14)+(var(14)>19)+(var(14)>24)) && (var(14)>4) && (var(7)&64) ;; system_switch
;	value=f10100,3 +(var(14)>9) +(var(14)>14) +(var(14)>19) +(var(14)>24)
;	channel=0
;	abspan=ifelse(teamside=1,-1,1)*facing*320
;
;sys::combo_real_reset
;[state 0]
;	type=varset
;	trigger1=(var(11)%10000<1)
;	var(12)=0
;---
;sys::combo_indicate_nums
;; ƒRƒ“ƒ{”ŒvZ
;[state 0]
;	type=varadd
;	triggerall=(var(11)/10000)=(var(11)%10000) && (var(11)%10000)<9999 ;;<- max combo
;	triggerall=(playerid(var(15)),ctrl=0) && (playerid(var(15)),stateno!=[120,159]) && (playerid(var(15)),stateno!=[190190,190199]) && (playerid(var(15)),stateno!=195500)
;	trigger1=var(40)>(playerid(var(15)),life) && (var(9)&16) ;;<-life changed && getting damage
;	trigger2=playerid(var(15)),gethitvar(hitshaketime)>0 && playerid(var(15)),gethitvar(damage)=0 && playerid(var(15)),time=1 && (var(26)!=playerid(var(15)),time)
;	var(11)=1 +( var(12):=var(12)+(playerid(var(15)),stateno=[5000,5199]) )*0 ;;<-real combo set
;
;sys::combo_indicate_init
;[state 0]
;	type=varset
;	triggerall=(var(11)%10000)>0
;	trigger1=(roundstate>3) || !(var(9)&16) ;;<-not getting damage
;	trigger2=(playerid(var(15)),ctrl) || (playerid(var(15)),stateno<160) || (playerid(var(15)),stateno=8200) || (var(9)&4096) ;;<-bonus stage
;	var(11)=0
;---
;;;>>@Config.Combo.Pos>>
;;sys::combo_d_pos ;; v13: pos x (240p)
;[state 0]
;	type=null
;	trigger1=(var(11)%10000=2) && ((var(11)/10000)!=(var(11)%10000)) ;;<- combo start 
;	trigger1=1|| var(13):=ifelse(teamside=2,-150,floor(var(3)/fvar(0))+150) ;;<-init pos x
;	trigger2=(var(11)%10000>1) && (var(11)/10000)<(var(11)%10000) ;;<-combo update
;	trigger2=1|| var(13):=var(13)+4*ifelse(teamside=2,-1,1) ;;<-shake
;	trigger3=numexplod(97800) && ((teamside=2 && var(13)<50) || (teamside=1 && var(13)>floor(var(3)/fvar(0))-50)) ;; goal pos x
;	trigger3=1|| var(13):=var(13)+(ifelse(teamside=2,50,floor(var(3)/fvar(0))-50)-var(13))/3 +teamside*2-3 ;;<-combo pos x shift
;---
;sys::combo_d_cls
;[state 0]
;	type=removeexplod
;	trigger1=(var(11)%10000>1) && ((var(11)/10000)!=(var(11)%10000) || (var(12)/10000=0))
;	id=97800  +( var(12):= (var(12)%10000) +280000 )*0 ;;<-view time reset
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(97800)
;	id=97801
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(97800)
;	id=97802
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(97800)
;	id=97803
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(97800)
;	id=97804
;[state 0]
;	type=removeexplod
;	trigger1=!numexplod(97800)
;	id=97805
;---
;sys::combo_d_bg
;[state 0]
;	type=explod
;	id=97800
;	triggerall=(var(7)&4) ;; system_switch
;	trigger1=(var(11)%10000>1) && !numexplod(97800)
;	anim=f300155 +( var(14):=(playerid(var(15)),stateno!=[5000,5199]) ) ;;<-hit type
;	space=screen
;	postype=left
;	sprpriority=var(46)+22
;	ownpal=1
;	scale=0.65,0.85
;	facing=ifelse(teamside=1,-1,1)
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;sys::combo_d_hits
;[state 0]
;	type=explod
;	id=97801
;	trigger1=numexplod(97800) && !numexplod(97801)
;	anim=f300150+var(14)
;	space=screen
;	postype=left
;	sprpriority=var(46)+23
;	ownpal=1
;	scale=0.25,0.25
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;sys::combo_d_nums
;[state 0]
;	type=explod
;	id=97802
;	trigger1=numexplod(97800) && !numexplod(97802)
;	anim=f300050+((var(11)%10000)%10)  +var(14)*10
;	space=screen
;	postype=left
;	sprpriority=var(46)+24
;	ownpal=1
;	scale=0.25,0.25
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0]
;	type=explod
;	id=97803
;	trigger1=(var(11)%10000>9) && numexplod(97800) && !numexplod(97803)
;	anim=f300050+(((var(11)%10000)/10)%10)  +var(14)*10
;	space=screen
;	postype=left
;	sprpriority=var(46)+24
;	ownpal=1
;	scale=0.25,0.25
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0]
;	type=explod
;	id=97804
;	trigger1=(var(11)%10000>99) && numexplod(97800) && !numexplod(97804)
;	anim=f300050+(((var(11)%10000)/100)%10)  +var(14)*10
;	space=screen
;	postype=left
;	sprpriority=var(46)+24
;	ownpal=1
;	scale=0.25,0.25
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0]
;	type=explod
;	id=97805
;	trigger1=(var(11)%10000>999) && numexplod(97800) && !numexplod(97805)
;	anim=f300050+(((var(11)%10000)/1000)%10)  +var(14)*10
;	space=screen
;	postype=left
;	sprpriority=var(46)+24
;	ownpal=1
;	scale=0.25,0.25
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;---
;sys::combo_d_changed
;[state 0]
;	type=modifyexplod
;	trigger1=numexplod(97800)
;	id=97800
;	postype=left
;	pos=floor(var(13)*fvar(0)), floor(75*fvar(0))
;[state 0]
;	type=modifyexplod
;	trigger1=numexplod(97801)
;	id=97801
;	postype=left
;	pos=floor((var(13)+(numexplod(97803)+numexplod(97804)+numexplod(97805))*7.5-42)*fvar(0)), floor(69*fvar(0))
;[state 0]
;	type=modifyexplod
;	trigger1=numexplod(97802)
;	id=97802
;	postype=left
;	pos=floor((var(13)+(numexplod(97803)+numexplod(97804)+numexplod(97805))*7.5-9)*fvar(0)), floor(79*fvar(0))
;[state 0]
;	type=modifyexplod
;	trigger1=numexplod(97803)
;	id=97803
;	postype=left
;	pos=floor((var(13)+(numexplod(97803)+numexplod(97804)+numexplod(97805))*7.5-24)*fvar(0)), floor(79*fvar(0))
;[state 0]
;	type=modifyexplod
;	trigger1=numexplod(97804)
;	id=97804
;	postype=left
;	pos=floor((var(13)+(numexplod(97803)+numexplod(97804)+numexplod(97805))*7.5-39)*fvar(0)), floor(79*fvar(0))
;[state 0]
;	type=modifyexplod
;	trigger1=numexplod(97805)
;	id=97805
;	postype=left
;	pos=floor((var(13)+(numexplod(97803)+numexplod(97804)+numexplod(97805))*7.5-54)*fvar(0)), floor(79*fvar(0))
;---
;sys::combo_update_counter
;[state 0]
;	type=varset
;	trigger1=(var(11)/10000)!=(var(11)%10000)
;	var(11)=(var(11)%10000)*10001
;sys::combo_d_display_time
;[state 0]
;	type=varadd
;	trigger1=(var(12)>=10000)
;	var(12)=-10000
;
;
;------------------------
;------------------------
; modify life bar switch (1st bit)
; •`‰æ•Ï“®
;sys::life_changed
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&1)
;	trigger1=var(43)=(playerid(var(15)),life)
;	var(8)=var(8)|1
;[state 0] ; on
;	type=varset
;	trigger1=!(var(8)&1)
;	trigger1=var(43)!=(playerid(var(15)),life)
;	var(8)=var(8)^1
;---
;;>>@Config.DamageToPower>>
;sys::manage_damage_to_pow ; ƒpƒ[ŠÇ— ; pow type v22 [1,2,3,4]
;---
;[state 0]
;	type=poweradd
;	triggerall=roundstate=2 && var(20)=power && (var(22)=1||var(22)=4) ;; type::1,4 ;normal,tag
;	trigger1=var(40)-(playerid(var(15)),life)>0 ;; get damage
;	value=(var(40)-(playerid(var(15)),life))*ifelse(playerid(var(15)),gethitvar(guarded),3,1)
;[state 0]
;	type=poweradd
;	triggerall=roundstate=2 && var(20)=power && (var(22)=3) ;; type::3 jd
;	trigger1=var(40)-(playerid(var(15)),life)>0 ;; get damage
;	trigger2=playerid(var(15)),stateno=150||playerid(var(15)),stateno=152||playerid(var(15)),stateno=154 ;air
;	trigger2=playerid(var(15)),time=1 && (var(26)!=playerid(var(15)),time)
;	value=floor((var(40)-(playerid(var(15)),life)+10)*ifelse(playerid(var(15)),gethitvar(guarded),5,1))
;---
;sys::memo_life ;; ƒ‰ƒCƒt•Û‘¶
;[state 0]
;	type=varset
;	trigger1=var(40)!=(playerid(var(15)),life) && roundstate=2
;	var(40)=(playerid(var(15)),life)
;
;sys::memo_mod-life ;; ƒ‰ƒCƒt•Ï“®•Û‘¶
;[state 0]
;	type=varset
;	trigger1=var(41)!=(playerid(var(15)),life)
;	trigger1=!(var(9)&131072) ;;<-opt-mod-life
;	var(41)=(playerid(var(15)),life) +(playerid(var(15)),life<=0) ;; <-avoids zero life
;
;sys::memo_damage ;; ƒ_ƒ[ƒW•Û‘¶
;[state 0]
;	type=varset
;	trigger1=var(42)!=(playerid(var(15)),life)
;	trigger1=!(var(9)&16) ;;<-get_damage_flag
;	var(42)=(playerid(var(15)),life)
;
;sys::modify_life_for_view ;; ƒ‰ƒCƒt•Ï‰»
;[state 0]
;	type=varadd
;	trigger1=var(43)!=(playerid(var(15)),life) && roundstate=2
;	var(43)=((playerid(var(15)),life)-var(43))/2+ifelse(var(43)>(playerid(var(15)),life),-1,1)
;
;
;------------------------
;------------------------
;
;
;==========================
; guard crush point
; ƒK[ƒh ƒNƒ‰ƒbƒVƒ… ƒ|ƒCƒ“ƒg
;==========================
; v35-36
;sys::guard_b_recover1 ;; recover -> stop ; (‰ñ•œ -> ’â~)
;[state 0]
;	type=varset
;	trigger1=var(35) && playerid(var(15)),movetype=h
;	var(35)=0
;sys::guard_b_recover2 ;; recover -> start_normal_speed ; (‰ñ•œ -> ŠJn - ’Êí‘¬“x)
;[state 0]
;	type=varset
;	trigger1=!var(35) && playeridexist(var(16))
;	trigger1=playerid(var(16)),movetype=h
;	var(35)=1
;sys::guard_b_cost ;; guard_point_consumptiom ; (ƒK[ƒhƒ|ƒCƒ“ƒgÁ–Õ)
;[state 0]
;	type=varadd
;	triggerall=(var(7)&2) ;; system_switch
;	trigger1=(playerid(var(15)),stateno=150)||(playerid(var(15)),stateno=152)||(playerid(var(15)),stateno=154) ;air
;	trigger1=(playerid(var(15)),time=1) && (var(26)!=playerid(var(15)),time)
;	var(36)=2 +playerid(var(15)),gethitvar(damage) +playerid(var(15)),gethitvar(hitshaketime)*2
;sys::guard_b_recover ; (‰ñ•œ)
;[state 0]
;	type=varadd
;	triggerall=var(36)>0
;	trigger1=var(35)=1 && (time%125=0)
;	trigger2=(playerid(var(15)),stateno=190010) ;;<-guardcrush_state ƒK[ƒhƒNƒ‰ƒbƒVƒ…
;	var(36)=-50 ;;ifelse(var(36)>=50,-50, var(36)-50 )
;sys::guard_b_range ; (”ÍˆÍ)
;[state 0]
;	type=varset
;	trigger1=(var(36)!=[0,1000])
;	var(36)=ifelse(var(36)<0,0,1000)
;
;------------------------
;;>>@Config.GuardBar>>
; draw guard bar ; ƒK[ƒhƒQ[ƒW•`‰æ
;sys::guardbar_d_cls
;[state 0] ; bar1
;	type=removeexplod
;;op;	trigger1=(roundstate!=2) || !(var(9)&4)
;	trigger1=!numexplod(490000)
;	id=493000
;[state 0] ; bar2
;	type=removeexplod
;	trigger1=!numexplod(493000)
;	id=493010
;---
;sys::guardbar_d_bar ; ƒK[ƒhƒQ[ƒW
;[state 0]
;	type=explod
;	trigger1=(var(9)&4) && (var(7)&2) ;; system_switch
;	trigger1=numexplod(490000) && !numexplod(493000)
;	id=493000
;	anim=f201700
;	sprpriority=var(46)+3
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31) +floor(80*fvar(0))*ifelse(teamside=1,-1,1) ,  var(32)-floor(2*fvar(0))
;	removetime=-1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0]
;	type=explod
;	trigger1=numexplod(493000) && !numexplod(493010)
;	id=493010
;	anim=f201710
;	sprpriority=var(46)+4
;	ownpal=1
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	pos=var(31) +floor(80*fvar(0))*ifelse(teamside=1,-1,1) ,  var(32)-floor(2*fvar(0))
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;---
;sys::guardbar_d_changed ; ƒK[ƒhƒo[•Ï‰»
;[state 0]
;	type=modifyexplod
;	trigger1=(var(8)&4) && numexplod(493000)
;	id=493010
;	scale=((1000-var(37))/1000.0),1
;
;------------------------
;------------------------
;sys::guard_b_modify ; (3rd bit)
; •`‰æ•Ï“®
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&4)
;	trigger1=var(37)=var(36)
;	var(8)=var(8)|4
;[state 0] ; on
;	type=varset
;	trigger1=!(var(8)&4)
;	trigger1=var(37)!=var(36)||!time
;	var(8)=var(8)^4
;
;sys::guard_b_memo_guard_point
; ƒK[ƒhƒ|ƒCƒ“ƒg•Û‘¶
;[state 0]
;	type=varset
;	trigger1=var(37)!=var(36)
;	var(37)=var(36)
;
;
;;==========================
;; power bar ; ƒpƒ[ƒo[
;;==========================
;; v20-22,25,30
;; v22: type
;; 1: N(normal)
;; 2: C(blocking)
;; 3: S(just defense)
;; 4: T(team mode striker)
;
;;sys::powerbar_indicate_switch ;; (4th bit)
;; ƒpƒ[ƒo[•\¦ƒXƒCƒbƒ`
;
;;[state 0] ; on
;;	type=varset
;;	trigger1=!(var(9)&8) && roundstate=2
;;	var(9)=var(9)|8
;;
;;[state 0] ; off
;;	type=varset
;;	triggerall=(var(9)&8)
;;	trigger1=(roundstate!=2) || win || lose || drawgame || (var(9)&4096) || const(size.height)=1 || !(var(7)&512) ;; system_switch
;;	trigger2=(playerid(var(15)),numexplod(920861)) || (playerid(var(15)),numexplod(920862)) ;; switch id
;;	trigger3=numenemy
;;	trigger3=enemy,numexplod(920861) ;; switch id
;;	var(9)=var(9)^8
;;
;;;------------------------
;;; modify power ; ƒpƒ[§Œä
;;;------------------------
;;;------------------------
;;;;>>@Config.PowerBar_Draw>>
;;; draw power bar ; ƒpƒ[•`‰æ
;;;------------------------
;;;sys::powerbar_d_cls
;;[state 0] ; bg
;;	type=removeexplod
;;	triggerall=numexplod(492000)
;;	trigger1=!(var(9)&8)
;;	trigger2=(var(20)/1000)!=(power/1000)
;;	id=492000
;;[state 0]
;;	type=removeexplod
;;	trigger1=!numexplod(492000)
;;	id=492001
;;[state 0]
;;	type=removeexplod
;;	trigger1=!numexplod(492000)
;;	id=492002
;;[state 0]
;;	type=removeexplod
;;	trigger1=!numexplod(492000)
;;	id=492200
;;
;;;------------------------
;;;------------------------
;;;sys::powerbar_d_bg ; ”wŒi
;;[state 0]
;;	type=explod
;;	trigger1=(var(9)&8)
;;	trigger1=!numexplod(492000)
;;	id=492000
;;	anim=f202000
;;	sprpriority=var(46)+3
;;	ownpal=1
;;	space=screen
;;	postype=left
;;	facing=ifelse(teamside=1,1,-1)
;;	pos=var(33),var(34)
;;	bindtime=-1
;;	removetime=-1
;;	ignorehitpause=1
;;	supermovetime=-1
;;	pausemovetime=-1
;;
;;;sys::powerbar_d_bg2 ;; stock ; ”wŒi 2
;;[state 0]
;;	type=explod
;;	trigger1=(var(9)&8)
;;	trigger1=!numexplod(492001)
;;	id=492001
;;	anim=f202001
;;	sprpriority=var(46)+2
;;	ownpal=1
;;	space=screen
;;	postype=left
;;	facing=ifelse(teamside=1,1,-1)
;;	pos=var(33),var(34)
;;	bindtime=-1
;;	removetime=-1
;;	ignorehitpause=1
;;	supermovetime=-1
;;	pausemovetime=-1
;;
;;;sys::powerbar_d_bar ; ƒpƒ[ƒo[
;;[state 0]
;;	type=explod
;;	trigger1=(var(9)&8)
;;	trigger1=!numexplod(492200) && numexplod(492000)
;;	id=492200
;;	anim=f202300
;;	sprpriority=var(46)+4
;;	ownpal=1
;;	space=screen
;;	postype=left
;;	facing=ifelse(teamside=1,1,-1)
;;	pos=var(33),var(34)
;;	bindtime=-1
;;	removetime=-1
;;	ignorehitpause=1
;;	supermovetime=-1
;;	pausemovetime=-1
;;
;;[state 0]
;;	type=modifyexplod
;;	trigger1=(var(9)&8) && (var(8)&2)
;;	id=492200
;;	scale=ifelse(var(21)>=powermax||var(21)>=10000,1,(var(21)%1000)/1000.00)
;;
;;[state 0]
;;	type=modifyexplod
;;	trigger1=(var(9)&8) && (var(8)&2)
;;	id=492200
;;	postype=left
;;;;	facing=ifelse(teamside=1,1,-1)
;;	pos=var(33) + floor(5 *ifelse(var(21)>=10000,9,var(21)/1000) *fvar(0)) *ifelse(teamside=1,-1,1) ,  var(34)
;;[state 0]
;;	type=modifyexplod
;;	trigger1=(var(9)&8) && (var(8)&2)
;;	id=492000
;;	postype=left
;;;;	facing=ifelse(teamside=1,1,-1)
;;	pos=var(33) + floor(5 *ifelse(var(21)>=10000,9,var(21)/1000) *fvar(0)) *ifelse(teamside=1,-1,1) ,  var(34)
;;
;;;sys::powerbar_d_shadow_width ; ‰e•
;;[state 0]
;;	type=modifyexplod
;;	trigger1=(var(9)&8) && (var(8)&2)
;;	id=492002
;;	scale=44 + ifelse(var(21)>=10000,9,var(21)/1000) *5
;;
;;;------------------------
;;;------------------------
;;;sys::power_changed ;; (2nd bit) ; •`‰æ•Ï“®
;;[state 0] ; off
;;	type=varset
;;	trigger1=var(8)&2
;;	trigger1=var(21)=var(20)
;;	var(8)=var(8)|2
;;[state 0] ; on
;;	type=varset
;;	trigger1=!(var(8)&2)
;;	trigger1=var(21)!=var(20)
;;	var(8)=var(8)^2
;;;sys::memo_power ; ƒpƒ[‘¶—p
;;[state 0]
;;	type=varset
;;	trigger1=var(20)!=power && (roundstate=2)
;;	var(20)=power
;;;sys::modify_power_for_view ; ƒpƒ[•Ï‰»
;;;;[state 0]
;;;;	type=varadd
;;;;	trigger1=var(21)!=power && (roundstate=2)
;;;;	var(21)=(power-var(21))/8+ifelse(var(21)>power,-1,1)
;;[state 0]
;;	type=varadd
;;	trigger1=var(21)!=var(20) && (roundstate=2)
;;	var(21)=(var(20)-var(21))/8+ifelse(var(21)>var(20),-1,1)
;;
;;;==========================
;;;==========================
;;;sys::jump_counter ;; v44 ; ƒWƒƒƒ“ƒvŒv
;;[state 0]
;;	type=varset
;;	trigger1=(root,command="holddown") && var(44)<2 && playerid(var(15)),statetype!=a
;;	var(44)=16
;;[state 0]
;;	type=varadd
;;	trigger1=var(44)>0
;;	var(44)=-1
;;
;;;sys::blocking/jd_system ; ƒuƒƒLƒ“ƒO/ƒWƒƒƒXƒgD (projid=195502/195503)
;;[state 0]
;;	type=projectile
;;	triggerall=(var(22)=[2,3]) && roundstate=2 && (root,numprojid(195502)<3) && (root,numprojid(195503)<3)
;;	trigger1=(root,command="holdfwd"&&!(var(8)&16384)&&var(22)=2)||(root,command="holdback"&&!(var(8)&32768)&&var(22)=3)
;;	trigger2=var(51)*120>random ;; ai
;;;debug;	trigger3=1 ;; for_debug
;;	projid=195500+var(22)
;;	projanim=anim
;;	projscale=0,0
;;	sparkno=-1
;;	projhitanim=-1
;;	projremovetime=6 ;; length
;;	attr=a,nt
;;	guard.dist=0
;;	projedgebound=8000
;;	projstagebound=8000
;;	projheightbound=-8000,8000
;;	postype=left
;;	offset=ifelse(teamside=1,1,-1)*2000
;;	ignorehitpause=1
;;
;;;==========================
;;;==========================
;;; First Attack (6th-7th bit) ; ê§UŒ‚
;;; for special chars and stages ; “ÁêƒLƒƒƒ‰AƒXƒe[ƒW—p
;;;sys::fa_switch
;;[state 0] ; diasable
;;	type=varset
;;	triggerall=!(var(9)&32) && roundstate=2 && win=0 && lose=0
;;	trigger1=(var(9)&64) ;;<- on
;;	trigger2=playerid(var(15)),gethitvar(isbound)
;;	trigger3=playerid(var(15)),movetype=h && playerid(var(15)),gethitvar(guarded)=0 && (playerid(var(15)),stateno!=[190190,190196]) && playerid(var(15)),stateno!=195500
;;;op;	trigger4=(var(9)&4096) ;;<-bonus stage
;;	var(9)=var(9)|32
;;[state 0] ; on
;;	type=varset
;;;__;	triggerall=!(var(9)&32) && !(var(9)&64)
;;	triggerall=!(var(9)&96)
;;	triggerall=roundstate=2 && win=0 && lose=0 && playeridexist(var(16))
;;	trigger1=playerid(var(16)),gethitvar(isbound)
;;	trigger2=playerid(var(16)),movetype=h && playerid(var(16)),gethitvar(guarded)=0 && (playerid(var(16)),stateno!=[190190,190196]) && playerid(var(16)),stateno!=195500
;;	var(9)=var(9)|64
;;;---
;;;;>>@Config.Icon_FirstAttack_Pos>>
;;;;æ§UŒ‚ƒAƒCƒRƒ“
;;;sys::fa_d_icon
;;[state 0] ; fa_icon / first attack icon
;;	type=explod
;;	triggerall=(var(7)&16) ;; system_switch
;;;__;	trigger1=(var(9)&4) && (var(9)&64) && !numexplod(400010)
;;	trigger1=(var(9)&68)=68 && !numexplod(400010)
;;	id=400010
;;	anim=f202450
;;	sprpriority=var(46)
;;	ownpal=1
;;	space=screen
;;	postype=left
;;	pos=var(31) +floor(101*fvar(0)) *ifelse(teamside=1,-1,1) ,  var(32) -floor(4*fvar(0))
;;	bindtime=-1
;;	removetime=-1
;;	ignorehitpause=1
;;	supermovetime=-1
;;	pausemovetime=-1
;;;sys::fa_d_cls
;;[state 0] ; ma_icon_remove
;;	type=removeexplod
;;	trigger1=!(var(9)&4) && numexplod(400010)
;;	id=400010
;;;---
;;;sys::sound_announcer_first_attack
;;[state 0]
;;	type=playsnd
;;	triggerall=(var(7)&64) ;; system_switch
;;;__;	trigger1=!(var(9)&32) && (var(9)&64) && (roundstate=2)
;;	trigger1=(var(9)&96)=64 && (roundstate=2)
;;	value=f10100,1
;;	channel=0
;;	abspan=ifelse(teamside=1,-1,1)*facing*320
;;;sys::fa_bonus
;;[state 0]
;;	type=varadd
;;;__;	trigger1=(roundstate=2) && !(var(9)&32) && (var(9)&64)
;;	trigger1=(roundstate=2) && (var(9)&96)=64
;;	var(57)=1000 ;; plus 2k pts
;;
;;;==========================
;;;;>>@Config.Counter_Hit>>
;;;==========================
;;;sys::counter_hit ;; (14-15th bit) ; ƒJƒEƒ“ƒ^[
;;[state 0] ; init
;;	type=varset
;;	trigger1=(var(9)&49152)
;;;op;	trigger1=numenemy
;;	trigger1=(playerid(var(15)),movetype!=a)||(playerid(var(15)),stateno=195500) ;;<-bk/jd
;;	trigger1=playeridexist(var(16))
;;	trigger1=(playerid(var(16)),movetype!=a)||(playerid(var(16)),stateno=195500) ;;<-bk/jd
;;	var(9)=(var(9)|49152)^49152
;;[state 0] ; off - hold
;;	type=varset
;;	trigger1=(var(9)&49152)=49152
;;	var(9)=var(9)^32768
;;[state 0] ; set
;;	type=varset
;;	trigger1=!(var(9)&49152) && (roundstate=2)
;;;op;	trigger1=numenemy
;;	trigger1=(playerid(var(15)),movetype!=a)
;;	trigger1=playeridexist(var(16))
;;	trigger1=(playerid(var(16)),movetype=a) && (playerid(var(16)),stateno!=195500)
;;	var(9)=var(9)|32768
;;[state 0] ; on
;;	type=varset
;;	trigger1=(var(9)&49152)=32768 && (roundstate=2)
;;;op;	trigger1=numenemy
;;	trigger1=(playerid(var(15)),movetype!=h)
;;	trigger1=playeridexist(var(16))
;;	trigger1=(playerid(var(16)),movetype=h) && (playerid(var(16)),stateno!=[120,159]) ;;<-not guard state
;;	trigger1=(playerid(var(16)),stateno!=[190190,190199]) ;;<-not assist
;;	trigger1=(playerid(var(16)),stateno!=195500) && (playerid(var(16)),alive)
;;	var(9)=var(9)|16384
;;;sys::sound_announcer_counter_hit
;;[state 0]
;;	type=playsnd
;;	triggerall=(var(7)&64) ;; system_switch
;;	trigger1=(var(9)&49152)=49152 && (roundstate=2)
;;	value=f10200,0
;;	abspan=ifelse(teamside=1,-1,1)*facing*320
;;;op;	channel=0
;;;sys::counter_hit_bonus
;;[state 0]
;;	type=varadd
;;	trigger1=(var(9)&49152)=49152 && (roundstate=2)
;;	var(57)=500
;;;sys::screen_edge_dark_counter_hit
;;[state 0]
;;	type=explod
;;	trigger1=(var(9)&49152)=49152 && (roundstate=2)
;;	anim=f3020
;;	sprpriority=var(46)-20
;;	ownpal=1
;;	space=screen
;;	postype=left
;;	pos=-floor(35*fvar(0)),var(4)/2
;;	scale=0.5,var(4)/240.0/fvar(0)
;;	bindtime=-1
;;	ignorehitpause=1
;;	supermovetime=-1
;;	pausemovetime=-1
;;[state 0]
;;	type=explod
;;	trigger1=(var(9)&49152)=49152 && (roundstate=2)
;;	anim=f3020
;;	sprpriority=var(46)-20
;;	ownpal=1
;;	space=screen
;;	postype=left
;;	pos=var(3)+floor(35*fvar(0)),var(4)/2
;;	scale=-0.5,var(4)/240.0/fvar(0)
;;	bindtime=-1
;;	ignorehitpause=1
;;	supermovetime=-1
;;	pausemovetime=-1
;
;
;;==========================
;; indicate scores v57-58
;; “_”•\¦
;;==========================
;; score up ; ƒXƒRƒA‘
;;sys::bonus_up
;[state 0]
;	type=varadd
;	triggerall=roundstate=2 && playeridexist(var(15)) && playeridexist(var(16))
;	trigger1=(playerid(var(16)),gethitvar(guarded)=0 && playerid(var(16)),gethitvar(hittime)>0) || playerid(var(16)),gethitvar(isbound) || playerid(var(15)),movehit
;	var(57)=1 +(playerid(var(15)),hitdefattr=sca,sa,sp,st||(playerid(var(16)),gethitvar(chainid)=[1000,2999]))*4 +(playerid(var(15)),hitdefattr=sca,ha,hp,ht||playerid(var(16)),gethitvar(chainid)>2999)*9
;
;;------------------------
;;;>>@Config.Score>>
;; draw scores
;; * remove this part to improve speed (if you have a slow machine)
;; “_”•`‰æ
;; * uˆ——‚¿v‚ª‚Ğ‚Ç‚¢‚ÍA‚±‚Ì•”•ª‚ğíœ‚·‚ê‚Î‰ü‘P‚Å‚«‚Ü‚·B
;;------------------------
;;sys::flag_score_redraw (v08 4th bit)
;[state 0] ; on
;	type=varset
;	trigger1=!(var(8)&8) && var(57)!=var(58) && playerid(var(16)),gethitvar(hittime)<0 && (time%60=0)
;	var(8)=(var(8)|8)
;;sys::score_d_cls
;[state 0]
;	type=removeexplod
;	trigger1=!(var(9)&4) || var(51)>0 || ((var(8)&8) && var(57)!=var(58))
;	id=98000
;[state 0]
;	type=removeexplod
;	trigger1=!(var(9)&4) || var(51)>0 || ((var(8)&8) && var(57)/10!=var(58)/10)
;	id=98001
;[state 0]
;	type=removeexplod
;	trigger1=!(var(9)&4) || var(51)>0 || ((var(8)&8) && var(57)/100!=var(58)/100)
;	id=98002
;[state 0]
;	type=removeexplod
;	trigger1=!(var(9)&4) || var(51)>0 || ((var(8)&8) && var(57)/1000!=var(58)/1000)
;	id=98003
;[state 0]
;	type=removeexplod
;	trigger1=!(var(9)&4) || var(51)>0 || ((var(8)&8) && var(57)/10000!=var(58)/10000)
;	id=98004
;[state 0]
;	type=removeexplod
;	trigger1=!(var(9)&4) || var(51)>0 || ((var(8)&8) && var(57)/100000!=var(58)/100000)
;	id=98005
;[state 0]
;	type=removeexplod
;	trigger1=!(var(9)&4) || var(51)>0 || ((var(8)&8) && var(57)/1000000!=var(58)/1000000)
;	id=98006
;[state 0]
;	type=removeexplod
;	trigger1=!(var(9)&4) || var(51)>0 || ((var(8)&8) && var(57)/10000000!=var(58)/10000000)
;	id=98007
;;---
;;sys::memo_score ;; “_”•Û‘¶
;[state 0]
;	type=varset
;	trigger1=var(57)!=var(58) && (var(8)&8)
;	var(58)=var(57)
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&8)
;	var(8)=(var(8)^8)
;;---
;;sys::score_d ;; draw scores (00000000)
;[state 0] ;1/8
;	type=explod
;	id=98000
;	trigger1=(var(9)&4) && (var(7)&16) ;; system_switch
;	trigger1=var(51)<1 && !numexplod(98000) && var(58)>0
;	anim=f202500+(var(58)%10)
;	space=screen
;	postype=left
;	pos=var(31)+floor(ifelse(teamside=1,floor(log(10,var(58)))*4-86,85)*fvar(0)), var(32) -floor(4*fvar(0))
;	sprpriority=var(46)
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0] ;2/8
;	type=explod
;	id=98001
;	trigger1=numexplod(98000) && !numexplod(98001) && var(58)>9
;	anim=f202500+((var(58)/10)%10)
;	space=screen
;	postype=left
;	pos=var(31)+floor(ifelse(teamside=1,floor(log(10,var(58)))*4-90,81)*fvar(0)), var(32) -floor(4*fvar(0))
;	sprpriority=var(46)
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0] ;3/8
;	type=explod
;	id=98002
;	trigger1=numexplod(98000) && !numexplod(98002) && var(58)>99
;	anim=f202500+((var(58)/100)%10)
;	space=screen
;	postype=left
;	pos=var(31)+floor(ifelse(teamside=1,floor(log(10,var(58)))*4-94,77)*fvar(0)), var(32) -floor(4*fvar(0))
;	sprpriority=var(46)
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0] ;4/8
;	type=explod
;	id=98003
;	trigger1=numexplod(98000) && !numexplod(98003) && var(58)>999
;	anim=f202500+((var(58)/1000)%10)
;	space=screen
;	postype=left
;	pos=var(31)+floor(ifelse(teamside=1,floor(log(10,var(58)))*4-98,73)*fvar(0)), var(32) -floor(4*fvar(0))
;	sprpriority=var(46)
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0] ;5/8
;	type=explod
;	id=98004
;	trigger1=numexplod(98000) && !numexplod(98004) && var(58)>9999
;	anim=f202500+((var(58)/10000)%10)
;	space=screen
;	postype=left
;	pos=var(31)+floor(ifelse(teamside=1,floor(log(10,var(58)))*4-102,69)*fvar(0)), var(32) -floor(4*fvar(0))
;	sprpriority=var(46)
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0] ;6/8
;	type=explod
;	id=98005
;	trigger1=numexplod(98000) && !numexplod(98005) && var(58)>99999
;	anim=f202500+((var(58)/100000)%10)
;	space=screen
;	postype=left
;	pos=var(31)+floor(ifelse(teamside=1,floor(log(10,var(58)))*4-106,65)*fvar(0)), var(32) -floor(4*fvar(0))
;	sprpriority=var(46)
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0] ;7/8
;	type=explod
;	id=98006
;	trigger1=numexplod(98000) && !numexplod(98006) && var(58)>999999
;	anim=f202500+((var(58)/1000000)%10)
;	space=screen
;	postype=left
;	pos=var(31)+floor(ifelse(teamside=1,floor(log(10,var(58)))*4-108,61)*fvar(0)), var(32) -floor(4*fvar(0))
;	sprpriority=var(46)
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0] ;8/8
;	type=explod
;	id=98007
;	trigger1=numexplod(98000) && !numexplod(98007) && var(58)>9999999
;	anim=f202500+((var(58)/10000000)%10)
;	space=screen
;	postype=left
;	pos=var(31)+floor(ifelse(teamside=1,floor(log(10,var(58)))*4-112,57)*fvar(0)), var(32) -floor(4*fvar(0))
;	sprpriority=var(46)
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;
;;==========================
;;==========================
;;;>>@Config.Icon_CPU_Pos>>
;;sys::cpu_icon ; CPU-•W‹L
;[state 0]
;	type=explod
;	triggerall=(var(7)&16) ;; system_switch
;	trigger1=(var(9)&4) && (var(51)>0) && !numexplod(297000)
;	id=297000
;	anim=f202400+ifelse(var(51)>8,8,var(51))
;	space=screen
;	postype=left
;	pos=var(31)+floor(78*fvar(0))*ifelse(teamside=1,-1,1), var(32)-floor(4*fvar(0))
;	sprpriority=var(46)
;	ownpal=1
;	removetime=-1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;[state 0]
;	type=removeexplod
;	trigger1=numexplod(297000) && (var(51)<1 || !(var(9)&4))
;	id=297000
;
;;==========================
;;==========================
;; stun/dizzy process v50,52
;; ‹Câˆ—
;;sys::dizzy_recover
;[state 0]
;	type=varadd
;	trigger1=var(50)>0 && (gametime%2=0)
;	trigger1=playerid(var(15)),movetype=i || playerid(var(15)),movetype=a || playerid(var(15)),ctrl
;	var(50)=-1
;;sys::dizzy_reset
;[state 0]
;	type=varset
;	trigger1=playerid(var(15)),stateno=190116
;	var(50)=0
;;sys::dizzy_accumulate
;[state 0]
;	type=varadd
;	triggerall=(var(7)&1) ;; system_switch
;	triggerall=(playerid(var(15)),stateno=5000)||(playerid(var(15)),stateno=5010)||(playerid(var(15)),stateno=5020)||(playerid(var(15)),stateno=5070)
;	triggerall=(playerid(var(15)),time=3)&&(playerid(var(15)),gethitvar(isbound)=0)&&(playerid(var(15)),gethitvar(hittime)>0)&&(playerid(var(15)),hitover=0)&&(playerid(var(15)),gethitvar(hitcount)>0)
;	triggerall=numenemy && var(50)<=1000
;	triggerall=!(enemy,hitdefattr=sca,ha,hp,ht)
;	trigger1=((enemy,projhittime(0)>=0)&&(enemy,numtarget(3000)=0)) || (enemy,projhittime(0)<0)
;	var(50)=(playerid(var(15)),gethitvar(hitshaketime)*16+1)/playerid(var(15)),gethitvar(hitcount)
;	;;; var(50)=1000 ; for_debug
;
;;==========================
;;==========================
;; evaluate / rank ; (•]‰¿)
;;sys::rank_get_hitcombo
;[state 0]
;	type=varset
;	trigger1=numenemy && roundstate=2
;	trigger1=(enemy,sysfvar(0)>0) && (playeridexist(floor(enemy,sysfvar(0))))
;	trigger1=(playerid(floor(enemy,sysfvar(0))),var(0)=90900) && fvar(3)<(playerid(floor(enemy,sysfvar(0))),var(12)%10000)
;	fvar(3)=(playerid(floor(enemy,sysfvar(0))),var(12)%10000) ;;<-real combo
;;sys::rank_get_tech3
;[state 0]
;	type=varadd
;	trigger1=roundstate=2 && playeridexist(var(15)) && playeridexist(var(16))
;	trigger1=(playerid(var(15)),stateno=[20,119]) && (playerid(var(15)),inguarddist) && (var(26)!=playerid(var(15)),time)
;	fvar(5)=0.00001
;;sys::rank_get_bk/jd2
;[state 0]
;	type=varadd
;	trigger1=roundstate=2 && playeridexist(var(15))
;	trigger1=(playerid(var(15)),stateno=195500) && (var(26)!=playerid(var(15)),time)
;	fvar(6)=0.001
;;sys::rank_get_guard/def
;[state 0]
;	type=varadd
;	trigger1=roundstate=2 && playeridexist(var(15))
;	trigger1=((playerid(var(15)),stateno=[120,155])||(playerid(var(15)),stateno=195500)) && (var(26)!=playerid(var(15)),time)
;	fvar(7)=0.05
;;sys::rank_get_attack/off
;[state 0]
;	type=varadd
;	triggerall=roundstate=2 && playeridexist(var(16))
;	trigger1=(playerid(var(16)),stateno=5000)||(playerid(var(16)),stateno=5010)||(playerid(var(16)),stateno=5020)||(playerid(var(16)),stateno=5070)
;	trigger2=(playerid(var(16)),gethitvar(isbound)) || (playerid(var(16)),stateno=190116) ;;<-dizzy
;	fvar(8)=0.05
;
;;==========================
;;==========================
;;sys::flag_finest_ko (v09 25th bit)
;[state 0] ; off
;	type=varset
;	trigger1=(var(9)&33554432)
;	trigger1=playerid(var(16)),ctrl
;	var(9)=var(9)^33554432
;[state 0] ; on
;	type=varset
;	trigger1=!(var(9)&33554432) && roundstate=2
;	trigger1=playerid(var(16)),hitdefattr=sca,ha,ht,hp || playerid(var(16)),numhelper(88870) ;;max2bg
;	var(9)=var(9)|33554432
;
;;;>>@Config.KO>>
;; call KO_Helper (new helper) ; KO‚ğŒÄ‚Ño‚· (VÍÙÊß°)
;;sys::helper::ko
;;[state 0]
;;	type=helper
;;	triggerall=(var(7)&8192) ;; system_switch
;;	trigger1=win && !(var(9)&512) && !numhelper(180010) && !(var(9)&4096) ;;<- bonus stage
;;	id=180010
;;	stateno=180010
;;	ownpal=1
;;	ignorehitpause=1
;;	supermovetime=88888
;;	pausemovetime=88888
;;	persistent=0
;
;;------------------------
;;------------------------
;;sys::roundover-flag ;; (10th bit) ; I—¹”»’è
;[state 0]
;	type=varset
;	trigger1=win && !(var(9)&512)
;	var(9)=var(9)|512
;	ignorehitpause=1
;
;;==========================
;;==========================
;; call Result_Helper (new helper) ; Œ‹‰Ê‚ğŒÄ‚Ño‚· (VÍÙÊß°)
;;sys::helper::result
;[state 0]
;	type=helper
;	trigger1=roundstate>3 && !numhelper(99980)
;	id=99980
;	stateno=99980
;	ownpal=1
;	ignorehitpause=1
;	supermovetime=88888
;	pausemovetime=88888
;	persistent=0
;;---
;;sys::score_up_to_parent ; e‚É‰ÁZ
;[state 0]
;	type=parentvarset
;	trigger1=numhelper(99980) && parent,sysvar(4) && var(58)>parent,var(58)
;	var(58)=var(58)
;
;
;;==========================
;;==========================
;;;>>@Config.Ground_Dust_Effect>>
;;; Ground_Dust ; šº
;;sys::slide_dust
;[state 0]
;	type=helper
;	triggerall=playeridexist(var(14):=var(15)) && (var(7)&16384) ;; system_switch
;	triggerall=(playerid(var(14)),stateno!=[190190,190193])
;	trigger1=(playerid(var(14)),stateno=151 || playerid(var(14)),stateno=153 || playerid(var(14)),stateno=5001 || playerid(var(14)),stateno=5011)
;	trigger1=playerid(var(14)),time=1 && var(26)!=playerid(var(14)),time && playerid(var(14)),pos y=0 && playerid(var(14)),vel x && playerid(var(14)),numhelper(152050)=0 && !numhelper(152050)
;	id=152050
;	stateno=152050
;	facing=playerid(var(14)),facing*facing
;	pos=floor(playerid(var(14)),pos x-pos x)*facing,floor(-pos y)
;	size.xscale=ifelse((playerid(var(14)),stateno<5000), 0.7, 0.8)
;	size.yscale=ifelse((playerid(var(14)),stateno<5000), 0.6, 0.7)
;	ownpal=1
;;sys::slide_dust_partner
;[state 0]
;	type=helper
;	triggerall=numpartner && var(15)!=var(49) && playeridexist(var(14):=var(49)) && (var(7)&16384) ;; system_switch
;	triggerall=(playerid(var(14)),stateno!=[190190,190193])
;	trigger1=(playerid(var(14)),stateno=151 || playerid(var(14)),stateno=153 || playerid(var(14)),stateno=5001 || playerid(var(14)),stateno=5011)
;	trigger1=playerid(var(14)),time=1 && var(27)!=playerid(var(14)),time && playerid(var(14)),pos y=0 && playerid(var(14)),vel x && playerid(var(14)),numhelper(152050)=0 && !numhelper(152050)
;	id=152050
;	stateno=152050
;	facing=playerid(var(14)),facing*facing
;	pos=floor(playerid(var(14)),pos x-pos x)*facing,floor(-pos y)
;	size.xscale=ifelse((playerid(var(14)),stateno<5000), 0.7, 0.8)
;	size.yscale=ifelse((playerid(var(14)),stateno<5000), 0.6, 0.7)
;	ownpal=1
;
;;sys::ground_wave
;[state 0]
;	type=helper
;	triggerall=playeridexist(var(14):=var(15)) && (var(7)&16384) ;; system_switch
;	trigger1=(playerid(var(14)),stateno=5100 || (playerid(var(14)),stateno=[5110,5111])) && playerid(var(14)),time=1 && var(26)!=playerid(var(14)),time
;	trigger1=playerid(var(14)),numhelper(159005)=0 && numhelper(159005)=0 && numhelper(159006)=0
;	id=159005
;	stateno=159005
;	facing=playerid(var(14)),facing*facing
;	pos=floor(playerid(var(14)),pos x-pos x)*facing,floor(-pos y)
;	ownpal=1
;	size.height=1+(playerid(var(14)),stateno=5100)
;	size.ground.front=floor(playerid(var(14)),const(size.ground.front)/fvar(0))
;	size.ground.back= floor(playerid(var(14)),const(size.ground.back)/fvar(0))
;;sys::ground_wave_partner
;[state 0]
;	type=helper
;	triggerall=numpartner && var(15)!=var(49) && playeridexist(var(14):=var(49)) && (var(7)&16384) ;; system_switch
;	trigger1=(playerid(var(14)),stateno=5100 || (playerid(var(14)),stateno=[5110,5111])) && playerid(var(14)),time=1 && var(27)!=playerid(var(14)),time
;	trigger1=playerid(var(14)),numhelper(159005)=0 && numhelper(159005)=0 && numhelper(159006)=0
;	id=159006
;	stateno=159005
;	facing=playerid(var(14)),facing*facing
;	pos=floor(playerid(var(14)),pos x-pos x)*facing,floor(-pos y)
;	ownpal=1
;	size.height=1+(playerid(var(14)),stateno=5100)
;	size.ground.front=floor(playerid(var(14)),const(size.ground.front)/fvar(0))
;	size.ground.back= floor(playerid(var(14)),const(size.ground.back)/fvar(0))
;
;;sys::ground_land_dust
;[state 0]
;	type=helper
;	triggerall=playeridexist(var(14):=var(15)) && var(28)>1 && (var(7)&16384) ;; system_switch
;	triggerall=(var(26)!=playerid(var(14)),time) && !numhelper(152000) && !numhelper(152020)
;	triggerall=playerid(var(14)),numhelper(159005)=0 && numhelper(159005)=0 && numhelper(159006)=0
;	triggerall=(playerid(var(14)),stateno!=[190190,190193])
;	trigger1=(playerid(var(14)),pos y=0) && (playerid(var(14)),vel y=0) && (var(8)&16)
;	trigger1=1|| var(8):=(var(8)^16)
;	trigger1=(playerid(var(14)),stateno!=5030) && (playerid(var(14)),stateno!=5050) && (playerid(var(14)),stateno!=5071) && (playerid(var(14)),stateno!=5100) && (playerid(var(14)),stateno!=[5110,5111])
;	trigger2=(playerid(var(14)),pos y<0) && !(var(8)&16)
;	trigger2=1|| var(8):=(var(8)|16)
;	trigger2=(playerid(var(14)),vel y<0) && (playerid(var(14)),stateno!=5030) && (playerid(var(14)),stateno!=5050) && (playerid(var(14)),stateno!=5071) && (playerid(var(14)),stateno!=5100) && (playerid(var(14)),stateno!=[5110,5111])
;	id=152000      +ifelse((playerid(var(14)),pos y<0), 20, 0)
;	stateno=152000 +ifelse((playerid(var(14)),pos y<0), 20, 0)
;	facing=playerid(var(14)),facing*facing
;	pos=floor(playerid(var(14)),pos x-pos x)*facing,floor(-pos y)
;	ownpal=1
;	size.ground.front=floor(playerid(var(14)),const(size.ground.front)/fvar(0))
;	size.ground.back= floor(playerid(var(14)),const(size.ground.back)/fvar(0))
;;sys::ground_land_dust_partner
;[state 0]
;	type=helper
;	triggerall=numpartner && var(15)!=var(49) && playeridexist(var(14):=var(49)) && var(28)>1 && (var(7)&16384) ;; system_switch
;	triggerall=(var(27)!=playerid(var(14)),time) && !numhelper(152000) && !numhelper(152020)
;	triggerall=playerid(var(14)),numhelper(159005)=0 && numhelper(159005)=0 && numhelper(159006)=0
;	triggerall=(playerid(var(14)),stateno!=[190190,190193])
;	trigger1=(playerid(var(14)),pos y=0) && (playerid(var(14)),vel y=0) && (var(8)&32)
;	trigger1=1|| var(8):=(var(8)^32)
;	trigger1=(playerid(var(14)),stateno!=5030) && (playerid(var(14)),stateno!=5050) && (playerid(var(14)),stateno!=5071) && (playerid(var(14)),stateno!=5100) && (playerid(var(14)),stateno!=[5110,5111])
;	trigger2=(playerid(var(14)),pos y<0) && !(var(8)&32)
;	trigger2=1|| var(8):=(var(8)|32)
;	trigger2=(playerid(var(14)),vel y<0) && (playerid(var(14)),stateno!=5030) && (playerid(var(14)),stateno!=5050) && (playerid(var(14)),stateno!=5071) && (playerid(var(14)),stateno!=5100) && (playerid(var(14)),stateno!=[5110,5111])
;	id=152000      +ifelse((playerid(var(14)),pos y<0), 20, 0)
;	stateno=152000 +ifelse((playerid(var(14)),pos y<0), 20, 0)
;	facing=playerid(var(14)),facing*facing
;	pos=floor(playerid(var(14)),pos x-pos x)*facing,floor(-pos y)
;	ownpal=1
;	size.ground.front=floor(playerid(var(14)),const(size.ground.front)/fvar(0))
;	size.ground.back= floor(playerid(var(14)),const(size.ground.back)/fvar(0))
;;---
;;sys::water_move ; (…_ˆÚ“®)
;[state 0]
;	type=explod
;	trigger1=var(24)=1 && var(28)>1
;	trigger1=(playerid(var(15)),pos y=0) && (playerid(var(15)),vel x) && (time%16=0) && var(26)!=playerid(var(15)),time && !numexplod(119900)
;	id=119900
;	anim=f10330
;	postype=p1
;	sprpriority=7
;	ownpal=1
;	facing=playerid(var(15)),facing*facing*ifelse((playerid(var(15)),vel x>0), 1, -1)
;	pos=floor((playerid(var(15)),pos x-pos x)*facing*10)/10,floor(-pos y*10)/10 ;;{ (#.#*10)/10 -> Ceil(#.#) }
;	scale=(playerid(var(15)),const(size.ground.front)+playerid(var(15)),const(size.ground.back))*0.031/fvar(0), (playerid(var(15)),const(size.ground.front)+playerid(var(15)),const(size.ground.back))*0.02/fvar(0)
;;;sys::water_move_sound
;;[state 0]
;;	type=playsnd
;;	trigger1=var(24)=1
;;	trigger1=(playerid(var(15)),pos y=0) && (playerid(var(15)),vel x) && (time%32=0) && var(26)!=playerid(var(15)),time
;;	pan=floor(playerid(var(15)),pos x-pos x)*facing
;;	value=f127,(random%2)+1
;;	channel=2
;;sys::water_move_partner
;[state 0]
;	type=explod
;	trigger1=var(24)=1 && numpartner && var(28)>1 && !numexplod(119901)
;	trigger1=(playerid(var(49)),pos y=0) && (playerid(var(49)),vel x) && (time%16=8) && var(27)!=playerid(var(49)),time
;	id=119901
;	anim=f10330
;	postype=p1
;	sprpriority=7
;	ownpal=1
;	facing=-playerid(var(49)),facing*facing*ifelse((playerid(var(49)),vel x>0), 1, -1)
;	pos=floor((playerid(var(49)),pos x-pos x)*facing*10)/10,floor(-pos y*10)/10 ;;{ (#.#*10)/10 -> Ceil(#.#) }
;	scale=(playerid(var(49)),const(size.ground.front)+playerid(var(49)),const(size.ground.back))*0.031/fvar(0), (playerid(var(49)),const(size.ground.front)+playerid(var(49)),const(size.ground.back))*0.02/fvar(0)
;;sys::water_ground ; (…_‘«Œ³)
;[state 0]
;	type=explod
;	trigger1=var(24)=1 && var(28)>1 && !numexplod(119902)
;	id=119902
;	anim=f10335
;	postype=p1
;	sprpriority=7
;	ownpal=1
;	removetime=-1
;;sys::water_ground_partner
;[state 0]
;	type=explod
;	trigger1=var(24)=1 && var(28)>1 && numpartner && !numexplod(119903)
;	id=119903
;	anim=f10335
;	postype=p1
;	sprpriority=7
;	ownpal=1
;	removetime=-1
;;sys::water_effect
;[state 0]
;	type=modifyexplod
;	trigger1=numexplod(119902)
;	id=119902
;	postype=p1
;	facing=playerid(var(15)),facing*facing
;	pos=floor((playerid(var(15)),pos x-pos x)*facing*10)/10,floor(-pos y*10)/10 ;;{ (#.#*10)/10 -> Ceil(#.#) }
;	scale=(playerid(var(15)),const(size.ground.front)+playerid(var(15)),const(size.ground.back))*0.031/fvar(0)*ifelse(playerid(var(15)),statetype=l,2,1), 0.75*(playerid(var(15)),pos y=0)
;;sys::water_effect_partner
;[state 0]
;	type=modifyexplod
;	trigger1=numexplod(119903) && numpartner
;	id=119903
;	postype=p1
;	facing=playerid(var(49)),facing*facing
;	pos=floor((playerid(var(49)),pos x-pos x)*facing*10)/10,floor(-pos y*10)/10 ;;{ (#.#*10)/10 -> Ceil(#.#) }
;	scale=(playerid(var(49)),const(size.ground.front)+playerid(var(49)),const(size.ground.back))*0.031/fvar(0)*ifelse(playerid(var(49)),statetype=l,2,1), 0.75*(playerid(var(49)),pos y=0)
;
;
;;==========================
;;;>>@Config.AI_Ref>>
;; [ai] ReActions ID Ref. / s“®‘ÎˆQÆ”Ô†
;;==========================
;; v14: temp: enemynear,id {=v16}
;; v15: current player ID //ƒvƒŒ[ƒ„[¯•Ê”Ô†
;; v16: current enemy ID //‘Šè¯•Ê”Ô†
;; v18: action/state no. // s“®/ó‘Ô”Ô†
;; v19: enemy state //‘Šèó‘Ô
;;---
;
;;sys::ai_projid(910#0)_counter_me
;[state 0]
;	type=projectile
;	triggerall=roundstate=2 && playeridexist(var(14):=sysvar(0)+(time%(numpartner+1)))
;	trigger1=playerid(var(14)),numprojid(var(19):=91050)||playerid(var(14)),numprojid(var(19):=91040)||playerid(var(14)),numprojid(var(19):=91030)
;	trigger2=playerid(var(14)),numprojid(var(19):=91020)||playerid(var(14)),numprojid(var(19):=91010)
;	projid=var(19)+5
;	projanim=909601 ;; empty
;	projscale=0,0
;	projhitanim=-1
;	projremovetime=1+numpartner ;op; *(root,numprojid(var(19)+5)=0)
;
;;sys::ai_get_enemy-id
;;sys::ai_act_id
;[state 0] ; init
;	type=varset
;	trigger1=1|| var(14):=var(16) ;; def_enemy_id
;	trigger1=1|| var(18):=0 ;; init_ai_act_id2
;	var(19)=0 ;; init
;
;;sys::ai_projid(910#5)_counter_opponent
;[state 0]
;	type=varset
;	trigger1=numenemy && roundstate=2
;	trigger1=enemy,numprojid(91015)||enemy,numprojid(91025)||enemy,numprojid(91035)||enemy,numprojid(91045)||enemy,numprojid(91055)
;	var(19)=(enemy,numprojid(91015)>0)*10+(enemy,numprojid(91025)>0)*100+(enemy,numprojid(91035)>0)*1000+(enemy,numprojid(91045)>0)*10000+(enemy,numprojid(91055)>0)*100000
;
;;---
;;sys::ai_act_san ; —§_‹ß_U ; standing attack near
;[state 0]
;	type=varadd
;	triggerall=var(51)>1 && (var(7)&262144) && roundstate=2 && playeridexist(var(14)) && playeridexist(var(15))
;	triggerall=playerid(var(15)),statetype!=a && playerid(var(15)),ctrl && playerid(var(14)),statetype!=l
;	;---
;	trigger1=playerid(var(14)),movetype!=a && (playerid(var(15)),pos x-playerid(var(14)),pos x=[-55,55]) && (playerid(var(15)),pos y-playerid(var(14)),pos y=[0,55])
;	;---
;	var(18)=1 ;;######1
;;---
;;sys::ai_act_sar ; ’n_‰“_Œ¡§ ; standing retrain
;[state 0]
;	type=varset
;	triggerall=var(51)>1 && (var(7)&262144) && roundstate=2 && playeridexist(var(14)) && playeridexist(var(15))
;	triggerall=playerid(var(15)),statetype!=a && playerid(var(15)),ctrl && (gametime%50>25) && random<200
;	;---
;	trigger1=playerid(var(14)),stateno!=190116 && (!var(19)%10 || (!(var(19)/10)%10 && !(var(19)/100)%10))
;	trigger1=playerid(var(14)),statetype!=l && playerid(var(14)),movetype!=a && (abs(playerid(var(15)),pos x-playerid(var(14)),pos x)=[90,230]) && (playerid(var(15)),pos y-playerid(var(14)),pos y=[0,85])
;	;---
;	var(18)=2 ;;######2
;;---
;;sys::ai_act_ca ; ‹ü_‹ß_U ; crouching attack
;[state 0]
;	type=varadd
;	triggerall=var(51)>1 && (var(7)&262144) && roundstate=2 && playeridexist(var(14)) && playeridexist(var(15))
;	triggerall=playerid(var(15)),statetype!=a && playerid(var(15)),ctrl && playerid(var(14)),statetype!=l
;	;---
;	trigger1=playerid(var(14)),statetype!=a && playerid(var(14)),movetype!=a && (playerid(var(15)),pos x-playerid(var(14)),pos x=[-55,55]) && (playerid(var(15)),pos y-playerid(var(14)),pos y=[0,55])
;	;---
;	var(18)=10 ;;#####1#
;;---
;;sys::ai_act_aa ; ‹ó_U ; jumping attack
;[state 0]
;	type=varadd
;	triggerall=var(51)>1 && (var(7)&262144) && roundstate=2 && playeridexist(var(14)) && playeridexist(var(15))
;	triggerall=playerid(var(15)),statetype=a && playerid(var(15)),ctrl
;	;---
;	trigger1=(playerid(var(15)),pos x-playerid(var(14)),pos x=[-75,75]) && (playerid(var(15)),pos y-playerid(var(14)),pos y=[-50,50])
;	trigger2=(playerid(var(15)),pos y>-75) && (playerid(var(15)),vel y>0) && random<500
;	;---
;	var(18)=100 ;;####1##
;;---
;;sys::ai_act_upper-cut ; ‘Î‹ó
;[state 0]
;	type=varadd
;	triggerall=var(51)>1 && (var(7)&262144) && roundstate=2 && playeridexist(var(14)) && playeridexist(var(15))
;	triggerall=playerid(var(15)),statetype!=a && playerid(var(15)),ctrl && playerid(var(14)),statetype=a
;	;---
;	trigger1=(playerid(var(15)),pos x-playerid(var(14)),pos x=[-50,50]) && (playerid(var(15)),pos y-playerid(var(14)),pos y=[0,70])
;	;---
;	var(18)=1000 ;;###1###
;;---
;;sys::ai_act_guard ; –hŒä
;[state 0]
;	type=varadd
;	triggerall=var(51)>1 && (var(7)&262144) && roundstate=2 && playeridexist(var(14)) && playeridexist(var(15)) && random<(roundno+matchno+var(51))*100
;	triggerall=playerid(var(15)),inguarddist
;	;--- against proj ; ”ò‚Ñ“¹‹ï‘Îˆ ;{ 91#10 guard ;91#20 guard/roll/jump ; 91#30 roll/jump ; 91#40 jump ; 91#50 jump fwd }
;	trigger1=(var(19)/10)%10 || ((var(19)/100)%10 && random<200)
;	;--- ground_guard
;	trigger2=((playerid(var(15)),pos x-playerid(var(14)),pos x=[-85,85])||random<250) && (playerid(var(15)),pos y-playerid(var(14)),pos y=[0,120])
;	trigger2=(playerid(var(15)),statetype!=a) && playerid(var(14)),movetype=a && !(playerid(var(14)),hitdefattr=sca,nt,st,ht)
;;;op;	trigger2=(playerid(var(14)),hitdefattr=sca,na,np && random<500) || (playerid(var(14)),hitdefattr=sca,sa,sp && random<750) || (playerid(var(14)),hitdefattr=sca,ha,hp)
;	;--- air_guard
;	trigger3=(playerid(var(15)),pos x-playerid(var(14)),pos x=[-70,70]) && ((playerid(var(15)),pos y-playerid(var(14)),pos y=[-56,56]) || random<250)
;	trigger3=(var(22)!=[2,3]) && (playerid(var(15)),statetype=a) && playerid(var(14)),movetype=a && !(playerid(var(14)),hitdefattr=sca,nt,st,ht)
;	trigger3=(playerid(var(14)),hitdefattr=sca,sa,sp && random<500)
;	;---
;	var(18)=10000 ;;##1####
;;sys::ai_act_guard_from_getup ; ‹N‚«ã‚ª‚è–hŒä
;[state 0]
;	type=varadd
;	triggerall=var(51)>1 && (var(7)&262144) && roundstate=2 && playeridexist(var(14)) && playeridexist(var(15)) && random<(roundno+matchno+var(51))*250
;	triggerall=(playerid(var(15)),stateno=0 && playerid(var(15)),ctrl && playerid(var(15)),time<8 && playerid(var(15)),inguarddist && playerid(var(15)),prevstateno=5120) || playerid(var(15)),stateno=5120
;	trigger1=playerid(var(14)),movetype=a && !(playerid(var(14)),hitdefattr=sca,nt,st,ht) && (playerid(var(15)),pos x-playerid(var(14)),pos x=[-60,60]) && (playerid(var(15)),pos y-playerid(var(14)),pos y=[0,90])
;	;---
;	var(18)=10000 ;;##1####
;;---
;;sys::ai_act_roll ; ‰ñ”ğ
;[state 0]
;	type=varadd
;	triggerall=var(51)>1 && (var(7)&262144) && roundstate=2 && playeridexist(var(14)) && playeridexist(var(15)) && random<(roundno+matchno+var(51))*50
;	triggerall=(var(22)!=[2,3]) && playerid(var(15)),statetype!=a && playerid(var(15)),ctrl
;	;---
;	trigger1=playerid(var(14)),movetype=a && !(playerid(var(14)),hitdefattr=sca,nt,st,ht) && (playerid(var(15)),pos x-playerid(var(14)),pos x=[-70,70]) && (playerid(var(15)),pos y-playerid(var(14)),pos y=[0,70])
;	;--- against proj ; ”ò‚Ñ“¹‹ï‘Îˆ ;91#20 guard/roll/jump ; 91#30 roll/jump
;	trigger2=((var(19)/100)%10 && random<580) || ((var(19)/1000)%10 && random<400)
;	;---
;	var(18)=100000 ;;#[1-3]#####
;;---
;;sys::ai_act_jump ; ’µ–ô
;[state 0]
;	type=null
;	triggerall=var(51)>1 && (var(7)&262144) && roundstate=2 && playeridexist(var(14)) && playeridexist(var(15))
;	triggerall=playerid(var(15)),statetype!=a && playerid(var(15)),ctrl
;
;	;;--- jump { 142000 + / n:00 l:+10 s:+20 m+30 / N:+0 F:+1 B:+2 }
;	trigger1=(playerid(var(15)),pos x-playerid(var(14)),pos x=[-200,200]) && playerid(var(14)),movetype!=a && !((var(19)/100)%10) && random<25
;	trigger1=1|| var(18):= (var(18)%100000)+100000 *(ifelse(random<650,10,(random<650)*20) +4+(random<300))  ;;[0-2][4-7]#####
;
;	;;--- jump long_fwd [142011]
;	trigger2=(playerid(var(15)),pos x-playerid(var(14)),pos x!=[-200,200]) && playerid(var(14)),movetype!=a && !((var(19)/100)%10) && random<50
;	trigger2=1|| var(18):= (var(18)%100000)+100000 *(ifelse(random<750,10,(random<100)*20) +5) ;;[0-2][4-7]#####
;
;	;;--- small [142020] / mid [142030] / leap [48]
;	trigger3=(var(22)=2) && (playerid(var(15)),pos x-playerid(var(14)),pos x=[-100,100]) && (playerid(var(14)),statetype=c || random<250) && random<100
;	trigger3=1|| var(18):= (var(18)%100000)+100000 *(ifelse(random<650,10,(random<500)*20) +6+(p2bodydist x>50))
;
;	;;--- against proj ; ”ò‚Ñ“¹‹ï‘Îˆ ;{ 91#10 guard ; 91#20 guard/roll/jump ; 91#30 roll/jump ; 91#40 jump ; 91#50 jump fwd }
;	trigger4=((var(19)/100)%10 && random<160) || ((var(19)/1000)%10 && random<520) || ((var(19)/10000)%10 && random<680) || ((var(19)/100000)%10 && random<880) || playerid(var(14)),hitdefattr=sca,nt,st,ht
;	trigger4=random<(roundno+matchno+var(51))*80
;	trigger4=1|| var(18):= (var(18)%100000)+100000 *( (playerid(var(15)),pos x-playerid(var(14)),pos x!=[-52,52])*10 +4+((var(19)/100)%10 || (var(19)/1000)%10) )
;
;	;;--- after guard cancel ;{  }
;	trigger5=playerid(var(15)),time<3 && playerid(var(15)),prevstateno=8200 && playerid(var(15)),numtarget && random<500
;	trigger5=1|| var(18):= (var(18)%100000)+100000 *(14+(random<500))  ;;[1][4-5]#####
;
;
;;==========================
;;==========================
;;;>>@Config.Display_Input>>
;;; (v.180728) display input v47 ; (‘€ì“ü—Í•\¦)
;;; (* the result seems NOT always corect. especially when the player has been placed in a custom state)
;;; (* Œ‹‰Ê‚ª‚¢‚Â‚à³‚µ‚¢‚Æ‚ÍŒÀ‚è‚Ü‚¹‚ñA“Á‚ÉƒXƒe[ƒg‚ª’D‚í‚ê‚½‚Æ‚«)
;
;;---
;;sys::ki_arrow_key_pressed
;[state 0]
;	type=explod
;	triggerall=(var(8)&33554432)
;	;---
;	trigger1=root,command="holdfwd"  && !(var(8)&16384)
;	trigger2=root,command="holdback" && !(var(8)&32768)
;	trigger3=root,command="holdup"   && !(var(8)&65536)
;	trigger4=root,command="holddown" && !(var(8)&131072)
;	;---
;	trigger5=(var(8)&16384) ;;root,command="holdfwd"
;	trigger5=(root,command!="holddown" && var(8)&131072) || (root,command!="holdup" && var(8)&65536) || (root,command!="holdback" && var(8)&32768)
;	;---
;	trigger6=(var(8)&32768) ;;root,command="holdback"
;	trigger6=(root,command!="holddown" && var(8)&131072) || (root,command!="holdup" && var(8)&65536) || (root,command!="holdfwd" && var(8)&16384)
;	;---
;	trigger7=(var(8)&65536) ;;root,command="holdup"
;	trigger7=(root,command!="holddown" && var(8)&131072) || (root,command!="holdfwd" && var(8)&16384) || (root,command!="holdback" && var(8)&32768)
;	;---
;	trigger8=(var(8)&131072) ;;root,command="holddown"
;	trigger8=(root,command!="holdup" && var(8)&65536) || (root,command!="holdfwd" && var(8)&16384) || (root,command!="holdback" && var(8)&32768)
;	;---
;	id=230100 +( (var(47):=var(47)+30101) %100) ;;v47 {AABBCC: AA:Timer / BB:Pos_X++ / CC:Pos_Y++}
;	anim=f230150 +((root,command="holdfwd")-(root,command="holdback"&&root,command!="holdfwd"))*20*(root,facing) +((root,command="holddown"&&root,command!="holdup")-(root,command="holdup"))*5
;	ontop=1
;	postype=left
;	ownpal=1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=0.25,0.25
;	pos=var(3)*(teamside=2)+floor(13*fvar(0))*ifelse(teamside=1,1,-1) , floor((50+(var(47)%100)*8)*fvar(0))
;
;;;sys::ki_arrow_key_hold
;[state 0]
;	type=explod
;	trigger1=(var(8)&33554432)
;	trigger1=(root,command="holdfwd")||(root,command="holdback")||(root,command="holdup")||(root,command="holddown")
;	id=230199
;	anim=f230150 +((root,command="holdfwd")-(root,command="holdback"))*20*(root,facing) +((root,command="holddown")-(root,command="holdup"))*5
;	ontop=1
;	postype=left
;	ownpal=1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=0.25,0.25
;	pos=var(3)*(teamside=2)+floor(5*fvar(0))*ifelse(teamside=1,1,-1) , floor((50+(var(47)%100)*8)*fvar(0))
;	removetime=1
;	trans=addalpha
;	alpha=128,128
;
;;--- button_all
;;sys::ki_key_simultaneously ;“¯‰Ÿ‚µ”»’è
;[state 0]
;	type=varadd
;	triggerall=(var(8)&33554432)
;	trigger1=(root,command="x") && !(var(8)&262144)
;	trigger2=(root,command="y") && !(var(8)&524288)
;	trigger3=(root,command="z") && !(var(8)&1048576)
;	trigger4=(root,command="a") && !(var(8)&2097152)
;	trigger5=(root,command="b") && !(var(8)&4194304)
;	trigger6=(root,command="c") && !(var(8)&8388608)
;	var(47)=ifelse(var(47)>99,100,1) +10000
;
;;--- button
;;sys::ki_key_x
;[state 0]
;	type=explod
;	trigger1=(var(8)&33554432)
;	trigger1=(root,command="x") && !(var(8)&262144)
;	id=230100 +(var(47)%100)
;	anim=f230203
;	ontop=1
;	postype=left
;	ownpal=1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=0.28,0.28
;	pos=var(3)*(teamside=2)+floor((5+(var(47):=var(47)+100)/100%100*8)*fvar(0))*ifelse(teamside=1,1,-1) , floor((50+(var(47)%100)*8)*fvar(0))
;;sys::ki_key_y
;[state 0]
;	type=explod
;	trigger1=(var(8)&33554432)
;	trigger1=(root,command="y") && !(var(8)&524288)
;	id=230100 +(var(47)%100)
;	anim=f230204
;	ontop=1
;	postype=left
;	ownpal=1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=0.28,0.28
;	pos=var(3)*(teamside=2)+floor((5+(var(47):=var(47)+100)/100%100*8)*fvar(0))*ifelse(teamside=1,1,-1) , floor((50+(var(47)%100)*8)*fvar(0))
;;sys::ki_key_z
;[state 0]
;	type=explod
;	trigger1=(var(8)&33554432)
;	trigger1=(root,command="z") && !(var(8)&1048576)
;	id=230100 +(var(47)%100)
;	anim=f230205
;	ontop=1
;	postype=left
;	ownpal=1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=0.28,0.28
;	pos=var(3)*(teamside=2)+floor((5+(var(47):=var(47)+100)/100%100*8)*fvar(0))*ifelse(teamside=1,1,-1) , floor((50+(var(47)%100)*8)*fvar(0))
;;sys::ki_key_a
;[state 0]
;	type=explod
;	trigger1=(var(8)&33554432)
;	trigger1=(root,command="a") && !(var(8)&2097152)
;	id=230100 +(var(47)%100)
;	anim=f230200
;	ontop=1
;	postype=left
;	ownpal=1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=0.28,0.28
;	pos=var(3)*(teamside=2)+floor((5+(var(47):=var(47)+100)/100%100*8)*fvar(0))*ifelse(teamside=1,1,-1) , floor((50+(var(47)%100)*8)*fvar(0))
;;sys::ki_key_b
;[state 0]
;	type=explod
;	trigger1=(var(8)&33554432)
;	trigger1=(root,command="b") && !(var(8)&4194304)
;	id=230100 +(var(47)%100)
;	anim=f230201
;	ontop=1
;	postype=left
;	ownpal=1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=0.28,0.28
;	pos=var(3)*(teamside=2)+floor((5+(var(47):=var(47)+100)/100%100*8)*fvar(0))*ifelse(teamside=1,1,-1) , floor((50+(var(47)%100)*8)*fvar(0))
;;sys::ki_key_c
;[state 0]
;	type=explod
;	trigger1=(var(8)&33554432)
;	trigger1=(root,command="c") && !(var(8)&8388608)
;	id=230100 +(var(47)%100)
;	anim=f230202
;	ontop=1
;	postype=left
;	ownpal=1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	scale=0.28,0.28
;	pos=var(3)*(teamside=2)+floor((5+(var(47):=var(47)+100)/100%100*8)*fvar(0))*ifelse(teamside=1,1,-1) , floor((50+(var(47)%100)*8)*fvar(0))
;
;
;;--- Curent_Pos_Y_UnderLine
;[state 0]
;	type=explod
;	trigger1=(var(8)&33554432)
;	trigger1=numexplod(230100+(var(47)%100)) && var(47)>9999 ;op; && !numexplod(230000+(var(47)%100))
;	id=230000+(var(47)%100)
;	anim=f201302 +teamside ;;+(random%5);;[0-4]
;	ontop=1
;	postype=left
;	ownpal=1
;	bindtime=-1
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;	pos=var(3)*(teamside=2), floor((56+(var(47)%100)*8)*fvar(0))
;	scale=ifelse(teamside=1,1,-1),1
;	sprpriority=-1
;	removetime=1
;
;;;--- ---
;;sys::ki_icon_index/pos_reset
;[state 0]
;	type=varset
;	trigger1=(var(47)%100>12)
;	trigger2=var(47) && !(numexplod(230100)||numexplod(230101)||numexplod(230102))
;	var(47)=0 ;; Pos_Y_ReSet
;[state 0]
;	type=varset
;	trigger1=(var(47)>99)
;	var(47)= (var(47)%100) +var(47)/10000*10000 -(var(47)>9999)*10000 ;; Pos_X_ReSet / Timer_Count_Down
;;sys::ki_icon_index_cls
;[state 0]
;	type=removeexplod
;	trigger1=numexplod(230101 +(var(47)%100))
;	id=230101 +(var(47)%100)
;
;;==========================
;;==========================
;;; Key Pressed Switch / ƒ{ƒ^ƒ“ŠJ•Â
;;; v08: bit flag (15th-24th,26th)
;;;---
;;sys::ki_switch00
;;;---
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&16384)
;	trigger1=(root,command!="holdfwd")
;	var(8)=var(8)^16384
;[state 0] ; on
;	type=varset
;	trigger1=(root,command="holdfwd")
;	trigger1=!(var(8)&16384)
;	var(8)=var(8)|16384
;;;---
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&32768)
;	trigger1=(root,command!="holdback")
;	var(8)=var(8)^32768
;[state 0] ; on
;	type=varset
;	trigger1=(root,command="holdback")
;	trigger1=!(var(8)&32768)
;	var(8)=var(8)|32768
;;;---
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&65536)
;	trigger1=(root,command!="holdup")
;	var(8)=var(8)^65536
;[state 0] ; on
;	type=varset
;	trigger1=(root,command="holdup")
;	trigger1=!(var(8)&65536)
;	var(8)=var(8)|65536
;;;---
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&131072)
;	trigger1=(root,command!="holddown")
;	var(8)=var(8)^131072
;[state 0] ; on
;	type=varset
;	trigger1=(root,command="holddown")
;	trigger1=!(var(8)&131072)
;	var(8)=var(8)|131072
;;;---
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&262144)
;	trigger1=(root,command!="x")
;	var(8)=var(8)^262144
;[state 0] ; on
;	type=varset
;	trigger1=(root,command="x")
;	trigger1=!(var(8)&262144)
;	var(8)=var(8)|262144
;;;---
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&524288)
;	trigger1=(root,command!="y")
;	var(8)=var(8)^524288
;[state 0] ; on
;	type=varset
;	trigger1=(root,command="y")
;	trigger1=!(var(8)&524288)
;	var(8)=var(8)|524288
;;;---
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&1048576)
;	trigger1=(root,command!="z")
;	var(8)=var(8)^1048576
;[state 0] ; on
;	type=varset
;	trigger1=(root,command="z")
;	trigger1=!(var(8)&1048576)
;	var(8)=var(8)|1048576
;;;---
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&2097152)
;	trigger1=(root,command!="a")
;	var(8)=var(8)^2097152
;[state 0] ; on
;	type=varset
;	trigger1=(root,command="a")
;	trigger1=!(var(8)&2097152)
;	var(8)=var(8)|2097152
;;;---
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&4194304)
;	trigger1=(root,command!="b")
;	var(8)=var(8)^4194304
;[state 0] ; on
;	type=varset
;	trigger1=(root,command="b")
;	trigger1=!(var(8)&4194304)
;	var(8)=var(8)|4194304
;;;---
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&8388608)
;	trigger1=(root,command!="c")
;	var(8)=var(8)^8388608
;[state 0] ; on
;	type=varset
;	trigger1=(root,command="c")
;	trigger1=!(var(8)&8388608)
;	var(8)=var(8)|8388608
;;;---
;;;--- display flag
;[state 0] ; off
;	type=varset
;	trigger1=(var(8)&33554432)
;	var(8)=var(8)^33554432
;[state 0] ; on
;	type=varset
;	trigger1=!(var(8)&33554432)
;	trigger1=var(51)<1 && (var(7)&128) ;; system_switch
;	trigger1=(root,movetype!=h)||(root,stateno=[120,159])||(root,stateno=[5000,5199])||(root,stateno=[190190,190196])
;	var(8)=var(8)|33554432


;==========================
; info. update
;==========================
;--- Player Time
;sys::update_player_time
[state 0]
	type=varset
	trigger1=playeridexist(var(15))
	var(26)=ifelse(var(26)<=(playerid(var(15)),time) , (playerid(var(15)),time) , -1 )
;sys::update_partner_time
[state 0]
	type=varset
	trigger1=numpartner && var(15)!=var(49) && playeridexist(var(49))
	var(27)=ifelse(var(27)<=(playerid(var(49)),time) , (playerid(var(49)),time) , -1 )

;--- RoundState Time
;sys::update_helpers_timer ; “à•”Œo‰ßŠÔ
[state 0]
	type=varadd
	trigger1=1
	var(28)=1
;sys::timer-reset_roundstate2 ; roundstate2 Äİ’è
[state 0]
	type=varset
	trigger1=(roundstate=2)
	var(28)=0
	persistent=0
;sys::timer-reset_roundstate3 ; roundstate3 Äİ’è
[state 0]
	type=varset
	trigger1=(roundstate=3)
	var(28)=0
	persistent=0



;==========================
;==========================
; DestroySelf State [helper] ; ƒwƒ‹ƒp[—p©ŒÈÁ‹ƒXƒe[ƒg
;==========================
[statedef 159990]
type=s
anim=909601 ;; empty
velset=0,0
ctrl=0
[state 0]
	type=destroyself
	trigger1=ishelper
	ignorehitpause=1


;==========================

;==========================



;==========================
;[statedef -2]
;;==========================
;
;;---
;;sys::-2::partners_standby ; ƒp[ƒgƒi[‘Ò‹@
;[state 0]
;	type=selfstate
;	value=190190
;	ctrl=0
;	;;---
;	triggerall=!ishelper && numpartner && roundstate=2 && alive && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
;	triggerall=(stateno!=[190190,190199]) && playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(22)=4
;	;;---// switch / change ;(Œğ‘Ö)
;	trigger1=sysfvar(4)<1 && ( ctrl || (time<2 && stateno<600) ) && playerid(floor(sysfvar(0))),var(48)=11
;	trigger1=(pos y>=0) && movetype!=h && gethitvar(isbound)=0 && (stateno!=5120) && (stateno!=[5200,5210])
;	;;---// assist ;(‹¦—Í)
;	trigger2=sysfvar(4)=1 && ( ctrl || (stateno-playerid(floor(sysfvar(0))),var(53+id-playerid(floor(sysfvar(0))),sysvar(0))!=[0,999]) )
;	trigger2=(pos y>=0) && movetype!=h && gethitvar(isbound)=0 && (stateno!=5120) && (stateno!=[5200,5210])
;	;;---// switch-canceling ;(Š„‚è‚İŒğ‘Ö)
;	trigger3=sysfvar(4)=2 && ( ctrl || stateno<160 )
;	trigger3=(pos y>=0) && movetype!=h && gethitvar(isbound)=0 && (stateno!=5120) && (stateno!=[5200,5210])
;	;;---// player-priority ;(‡ˆÊ)
;	trigger4=sysfvar(4)<1 && playerid(floor(sysfvar(0))),var(15)!=id
;	;;---
;	ignorehitpause=1
;
;;sys::-2::partners_change_interrupted ; Š„‚è‚İŒğ‘Ö
;[state 0]
;	type=varset
;	trigger1=!ishelper && numpartner && roundstate=2 && alive && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(48)=21 && sysfvar(4)<1
;	sysfvar(4)=2 ;; (0:main / 1:assist / 2:switch-canceling)
;
;;sys::-2::helper::bar004 ; ƒ‰ƒCƒtƒo[
;[state 0]
;	type=helper
;	triggerall=!ishelper && !numhelper(90900)
;	trigger1=numpartner
;	trigger1=id<(partner,id) && partner,numhelper(90900)=0
;	trigger2=!numpartner
;	id=90900
;	stateno=90900
;	helpertype=normal
;	ownpal=1
;;op;	size.ground.front=###
;;op;	size.ground.back=###
;	size.air.front=2108130 ;; <<-version
;;op;	size.air.back=###
;	size.height=0 ;; 1;; <<-powerbar off mode
;	ignorehitpause=1
;	supermovetime=88888
;	pausemovetime=88888
;	;---
;;op;	size.xscale=0
;;op;	size.yscale=0
;	;---
;	pos=0,88888
;
;;sys::-2::get_helper::bar004_id ; IDæ“¾
;[state 0]
;	type=varset
;	trigger1=!ishelper && numhelper(90900)
;	trigger1=(helper(90900),var(0)=90900) && (sysfvar(0)!=helper(90900),id)
;	sysfvar(0)=(helper(90900),id)
;;sys::-2::get_players_id2
;[state 0]
;	type=varset
;	trigger1=!ishelper && numpartner
;	trigger1=!numhelper(90900) && (partner,numhelper(90900)) && (sysfvar(0)!=(partner,sysfvar(0)))
;	sysfvar(0)=(partner,sysfvar(0))
;
;;sys::-2::helper::intro
;[state 0]
;	type=helper
;	trigger1=(stateno=5900) && !ishelper && !numhelper(185905)
;	id=185905
;	stateno=185905
;	helpertype=normal
;	ownpal=1
;	supermovetime=88888
;	pausemovetime=88888
;	ignorehitpause=1
;
;;sys::-2::bk/jd_system ; ƒuƒƒLƒ“ƒO/ƒWƒƒƒXƒgD
;[state 0]
;	type=hitoverride
;	triggerall=!ishelper && roundstate=2 && alive && (ctrl || stateno=52)
;	trigger1=numprojid(195502)||numprojid(195503)
;	trigger2=numpartner
;	trigger2=partner,numprojid(195502)||partner,numprojid(195503)
;	attr=sca,na,sa,ha,np,sp,hp
;	stateno=195500
;	time=1
;	ignorehitpause=1
;
;
;;//==========================
;;//==========================
;;;>>@Config.Face>>
;;sys::-2::face_d_mod
;[state 0]
;	type=removeexplod
;	trigger1=roundstate!=2 || (stateno=5150 && time=5 && !alive)
;	trigger2=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger2=(playerid(floor(sysfvar(0))),var(0)=90900)
;	trigger2=!(playerid(floor(sysfvar(0))),var(9)&4) || (playerid(floor(sysfvar(0))),var(9)&262144)
;	id=490600
;	ignorehitpause=1
;
;;sys::-2::face_d_main ; portrait (Šç)
;[state 0]
;	type=explod
;	trigger1=!ishelper && alive && !numexplod(490600) && selfanimexist(909002)
;	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0))) && roundstate=2
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490600)
;	trigger1=id=playerid(floor(sysfvar(0))),var(15)
;	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
;	id=490600
;	anim=909002
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(20))), floor(const240p(playerid(floor(sysfvar(0))),fvar(22)))
;	scale=playerid(floor(sysfvar(0))),fvar(24), playerid(floor(sysfvar(0))),fvar(26)
;	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(32))
;	trans=addalpha
;	alpha=floor(playerid(floor(sysfvar(0))),fvar(28))/1000, floor(playerid(floor(sysfvar(0))),fvar(28))%1000
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;
;;;sys::-2::face_d_partner_#+option
;[state 0]
;	type=explod
;	trigger1=numpartner
;	trigger1=!ishelper && alive && !numexplod(490600) && selfanimexist(909001)
;	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0))) && roundstate=2
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490601+(gametime%numpartner))
;	trigger1=(id+numpartner+1-playerid(floor(sysfvar(0))),var(15))%(numpartner+1)=(gametime%numpartner)+1
;	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
;	id=490600
;	anim=909001
;	space=screen
;	postype=left
;	facing=ifelse(teamside=1,1,-1)
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(21) +playerid(floor(sysfvar(0))),fvar(34)*(gametime%numpartner) )), floor(const240p(playerid(floor(sysfvar(0))),fvar(23) +playerid(floor(sysfvar(0))),fvar(35)*(gametime%numpartner) ))
;	scale=playerid(floor(sysfvar(0))),fvar(25) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner), playerid(floor(sysfvar(0))),fvar(27) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner)
;	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(33))+(gametime%numpartner)*10
;	trans=addalpha
;	alpha=floor(playerid(floor(sysfvar(0))),fvar(29))/1000, floor(playerid(floor(sysfvar(0))),fvar(29))%1000
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;
;;#Options_Char_Name
;;sys::-2::name_d_main_left&right
;[state 0]
;	type=explod
;	trigger1=numexplod(490600)=1 && selfanimexist(909010+teamside)
;	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && id=playerid(floor(sysfvar(0))),var(15)
;	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
;	id=490600
;	anim=909010+teamside
;	space=screen
;	postype=left
;	facing=1
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(10))), floor(const240p(playerid(floor(sysfvar(0))),fvar(12)))
;	scale=playerid(floor(sysfvar(0))),fvar(14), playerid(floor(sysfvar(0))),fvar(16)
;	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(32))+2
;	trans=addalpha
;	alpha=floor(playerid(floor(sysfvar(0))),fvar(18))/1000, floor(playerid(floor(sysfvar(0))),fvar(18))%1000
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;
;;;sys::-2::name_d_partner_#left&right
;[state 0]
;	type=explod
;	trigger1=numpartner
;	trigger1=numexplod(490600)=1 && selfanimexist(909010+teamside)
;	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490601+(gametime%numpartner))
;	trigger1=(id+numpartner+1-playerid(floor(sysfvar(0))),var(15))%(numpartner+1)=(gametime%numpartner)+1
;	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
;	id=490600
;	anim=909010+teamside
;	space=screen
;	postype=left
;	facing=1
;	ownpal=1
;	bindtime=-1
;	removetime=-1
;	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(11) +playerid(floor(sysfvar(0))),fvar(34)*(gametime%numpartner) )), floor(const240p(playerid(floor(sysfvar(0))),fvar(13) +playerid(floor(sysfvar(0))),fvar(35)*(gametime%numpartner) ))
;	scale=playerid(floor(sysfvar(0))),fvar(15) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner), playerid(floor(sysfvar(0))),fvar(17) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner)
;	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(33))+(gametime%numpartner)*10+3
;	trans=addalpha
;	alpha=floor(playerid(floor(sysfvar(0))),fvar(19))/1000, floor(playerid(floor(sysfvar(0))),fvar(19))%1000
;	ignorehitpause=1
;	supermovetime=-1
;	pausemovetime=-1
;
;
;;//==========================
;;;>>@Config.Camera>>
;;sys::-2::camera_nc ; Å“_•ÏX
;[state 0]
;	type=screenbound
;	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && numpartner && (sysfvar(4)>0 || stateno=5150)
;	value=0
;	movecamera=0,0
;	ignorehitpause=1
;;sys::-2::camera_np
;[state 0]
;	type=playerpush
;	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && numpartner && (sysfvar(4)>0 || stateno=5150)
;	value=0
;	ignorehitpause=1
;;sys::-2::camera_nc2
;[state 0]
;	type=screenbound
;	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && (playerid(floor(sysfvar(0))),var(7)&65536) ;; system_switch
;	value= ((numpartner && sysfvar(4)<1) || !numpartner) ;; [def=0]
;	movecamera=0,0 ;; [x,y]
;	ignorehitpause=1
;
;;//==========================
;;sys::-2::add.option2-noko
;[state 0] ;; opt-noko
;	type=assertspecial
;	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
;	trigger1=id=playerid(floor(sysfvar(0))),var(15) && (playerid(floor(sysfvar(0))),var(9)&65536) ;; opt-noko
;	flag=noko
;	ignorehitpause=1
;;sys::-2::add.option3-life-mod
;[state 0] ;; opt-life-mod
;	type=lifeadd
;	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
;	trigger1=id=playerid(floor(sysfvar(0))),var(15) && playerid(floor(sysfvar(0))),var(23)!=0 ;; opt-mod-life
;	value=playerid(floor(sysfvar(0))),var(23)
;	kill=0
;	ignorehitpause=1
;
;;//==========================
;;// optional settings
;;sys::-2::guard_crush_fx ; ƒK[ƒhƒNƒ‰ƒbƒVƒ…
;[state 0]
;	type=palfx
;	trigger1=(stateno=150 || stateno=152) && alive && !ishelper && (gametime%5=0) && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(36)>=800
;	time=2
;	add=200,0,0
;;sys::-2::guard_crush_cs
;[state 0]
;	type=changestate
;	trigger1=(stateno=150 || stateno=152) && alive && !ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(36)>=1000
;	value=190010
;	ignorehitpause=1
;;;--- dizzy
;;sys::-2::goto-dizzy_s/c
;[state 0] ;[.03-2d1]
;	type=selfstate
;	trigger1=(stateno=5001 || stateno=5011) && hitover      && alive && !ishelper && roundstate=2 && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(50)>=1000
;	value=195201 ;; (goto-dizzy:190116)
;;sys::-2::goto-dizzy_a/l
;[state 0] ;[.03-2d2]
;	type=selfstate
;	trigger1=(stateno=5030 || stateno=5071) && hitshakeover && alive && !ishelper && roundstate=2 && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(50)>=1000
;	value=195050
;;sys::-2::goto-dizzy_fd
;[state 0] ;[.03-2e1]
;	type=selfstate
;	trigger1=(stateno=[5110,5111]) && alive && !ishelper && roundstate=2 && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
;	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(50)>=1000
;	value=195110
;;;--- fadeout when KOed ; KOŒãÁ‚¦‚é
;;sys::-2::st5150-1
;[state 0]
;	type=varset
;	trigger1=stateno=5150 && time=1 && alive=0 && !ishelper && numpartner
;	sysvar(1)=(roundstate<=2)
;;sys::-2::st5150-2
;[state 0]
;	type=assertspecial
;	trigger1=stateno=5150 && alive=0 && !ishelper && numpartner && sysvar(1) && (((time=[80,150]) && time%10<5) || time>150)
;	flag=invisible
;	flag2=noshadow
;;;--- intro-pos-reset
;;;--- <<IKEMEN‚É‚Í–³—p>>
;;sys::-2::st5900-f
;[state 0]
;	type=turn
;	trigger1=stateno=5900 && time=0
;	trigger1=!ishelper && numpartner>1 && facing=ifelse(teamside=1,-1,1)
;;sys::-2::st5900-pp3
;[state 0]
;	type=posset
;	trigger1=stateno=5900 && time=0
;	trigger1=!ishelper && numpartner>1 && playeridexist(id-2)
;	trigger1=playerid(id-2),ishelper=0 && playerid(id-2),teamside=teamside
;	x=const240p(120)*ifelse(teamside=1,-1,1)
;;sys::-2::st5900-pp4
;[state 0]
;	type=posset
;	trigger1=stateno=5900 && time=0
;	trigger1=!ishelper && numpartner>2 && playeridexist(id-3)
;	trigger1=playerid(id-3),ishelper=0 && playerid(id-3),teamside=teamside
;	x=const240p(145)*ifelse(teamside=1,-1,1)
;;;---
;;;---
;;//[EOF]
